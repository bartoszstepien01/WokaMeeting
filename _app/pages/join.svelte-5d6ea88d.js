import{b as k,_ as j}from"../chunks/paths-16c013c9.js";import{S as w,i as P,s as R,j as q,m as E,o as I,x as p,u as h,v as L,e as v,t as x,k as G,l as b,J,c as g,a as N,g as S,d as u,n as A,b as _,H as d,f as y,w as C,A as D,r as K}from"../chunks/vendor-07f555be.js";import{G as M}from"../chunks/Gallery-4bcb3b09.js";function $(f){let r,s;return r=new M({props:{streams:f[0]}}),{c(){q(r.$$.fragment)},l(e){E(r.$$.fragment,e)},m(e,i){I(r,e,i),s=!0},p(e,i){const l={};i&1&&(l.streams=e[0]),r.$set(l)},i(e){s||(p(r.$$.fragment,e),s=!0)},o(e){h(r.$$.fragment,e),s=!1},d(e){L(r,e)}}}function T(f){let r,s,e,i,l,o,c,t=f[0].length!==0&&$(f);return{c(){r=v("link"),s=v("link"),e=v("script"),i=x("let parcelRequire;"),l=G(),t&&t.c(),o=b(),this.h()},l(a){const n=J('[data-svelte="svelte-uncxtc"]',document.head);r=g(n,"LINK",{rel:!0,href:!0}),s=g(n,"LINK",{rel:!0,href:!0}),e=g(n,"SCRIPT",{});var m=N(e);i=S(m,"let parcelRequire;"),m.forEach(u),n.forEach(u),l=A(a),t&&t.l(a),o=b(),this.h()},h(){_(r,"rel","icon"),_(r,"href",""+(k+"/favicon.png")),_(s,"rel","manifest"),_(s,"href",""+(k+"/manifest.json")),document.title="Join"},m(a,n){d(document.head,r),d(document.head,s),d(document.head,e),d(e,i),y(a,l,n),t&&t.m(a,n),y(a,o,n),c=!0},p(a,[n]){a[0].length!==0?t?(t.p(a,n),n&1&&p(t,1)):(t=$(a),t.c(),p(t,1),t.m(o.parentNode,o)):t&&(K(),h(t,1,1,()=>{t=null}),C())},i(a){c||(p(t),c=!0)},o(a){h(t),c=!1},d(a){u(r),u(s),u(e),a&&u(l),t&&t.d(a),a&&u(o)}}}function U(f,r,s){let e=[];return D(async()=>{const l=(await j(()=>import("../chunks/peerjs.min-90eb8cad.js").then(function(a){return a.p}),["chunks/peerjs.min-90eb8cad.js","chunks/vendor-07f555be.js"])).default;let o=new l,c=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});s(0,e=[c]);let t=new URL(window.location.href);o.on("open",()=>{o.call(t.searchParams.get("room"),c).on("stream",n=>{e.map(m=>m.id).includes(n.id)||s(0,e=[...e,n])})})}),[e]}class z extends w{constructor(r){super();P(this,r,U,T,R,{})}}export{z as default};

import{b as k,_ as j}from"../chunks/paths-16c013c9.js";import{S as w,i as P,s as R,j as q,m as E,o as I,x as p,u as h,v as L,e as v,t as x,k as G,l as b,J,c as g,a as N,g as S,d as u,n as A,b as _,H as d,f as y,w as C,A as D,r as K}from"../chunks/vendor-07f555be.js";import{G as M}from"../chunks/Gallery-4bcb3b09.js";function $(f){let a,n;return a=new M({props:{streams:f[0]}}),{c(){q(a.$$.fragment)},l(e){E(a.$$.fragment,e)},m(e,o){I(a,e,o),n=!0},p(e,o){const l={};o&1&&(l.streams=e[0]),a.$set(l)},i(e){n||(p(a.$$.fragment,e),n=!0)},o(e){h(a.$$.fragment,e),n=!1},d(e){L(a,e)}}}function T(f){let a,n,e,o,l,i,c,t=f[0].length!==0&&$(f);return{c(){a=v("link"),n=v("link"),e=v("script"),o=x("let parcelRequire;"),l=G(),t&&t.c(),i=b(),this.h()},l(r){const s=J('[data-svelte="svelte-uncxtc"]',document.head);a=g(s,"LINK",{rel:!0,href:!0}),n=g(s,"LINK",{rel:!0,href:!0}),e=g(s,"SCRIPT",{});var m=N(e);o=S(m,"let parcelRequire;"),m.forEach(u),s.forEach(u),l=A(r),t&&t.l(r),i=b(),this.h()},h(){_(a,"rel","icon"),_(a,"href",""+(k+"/favicon.png")),_(n,"rel","manifest"),_(n,"href",""+(k+"/manifest.json")),document.title="Join"},m(r,s){d(document.head,a),d(document.head,n),d(document.head,e),d(e,o),y(r,l,s),t&&t.m(r,s),y(r,i,s),c=!0},p(r,[s]){r[0].length!==0?t?(t.p(r,s),s&1&&p(t,1)):(t=$(r),t.c(),p(t,1),t.m(i.parentNode,i)):t&&(K(),h(t,1,1,()=>{t=null}),C())},i(r){c||(p(t),c=!0)},o(r){h(t),c=!1},d(r){u(a),u(n),u(e),r&&u(l),t&&t.d(r),r&&u(i)}}}function U(f,a,n){let e=[];return D(async()=>{const l=(await j(()=>import("../chunks/peerjs.min-90eb8cad.js").then(function(s){return s.p}),["chunks/peerjs.min-90eb8cad.js","chunks/vendor-07f555be.js"])).default;let i=new l,c=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});n(0,e=[c]);let t=new URL(window.location.href);i.call(t.searchParams.get("room"),c).on("stream",s=>{e.map(m=>m.id).includes(s.id)||n(0,e=[...e,s])})}),[e]}class z extends w{constructor(a){super();P(this,a,U,T,R,{})}}export{z as default};

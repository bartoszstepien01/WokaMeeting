import{b as O,_ as Z}from"../chunks/paths-16c013c9.js";import{S as z,i as B,s as F,j as H,m as C,o as N,x as D,u as L,v as T,A as W,e as k,t as G,k as j,c as R,a as M,g as K,d,n as P,b,J as X,f as A,H as v,h as y,K as x,L as ee,w as se,r as te}from"../chunks/vendor-f7df6e26.js";import{P as re,N as ae,C as le,M as ne,G as oe,S as ie}from"../chunks/Members-555fba25.js";function fe(r){let a,t,s,l,c,n,i,m,h,w,_,S,p,I;return{c(){a=k("div"),t=k("div"),s=k("h1"),l=G("Scan QR code"),c=j(),n=k("img"),m=j(),h=k("div"),w=k("h1"),_=G("Enter URL"),S=j(),p=k("p"),I=G(r[1]),this.h()},l(u){a=R(u,"DIV",{class:!0});var g=M(a);t=R(g,"DIV",{class:!0});var f=M(t);s=R(f,"H1",{class:!0});var e=M(s);l=K(e,"Scan QR code"),e.forEach(d),c=P(f),n=R(f,"IMG",{class:!0,src:!0,alt:!0}),f.forEach(d),m=P(g),h=R(g,"DIV",{class:!0});var o=M(h);w=R(o,"H1",{class:!0});var V=M(w);_=K(V,"Enter URL"),V.forEach(d),S=P(o),p=R(o,"P",{class:!0});var E=M(p);I=K(E,r[1]),E.forEach(d),o.forEach(d),g.forEach(d),this.h()},h(){b(s,"class","text-white text-xl"),b(n,"class","p-2"),X(n.src,i="http://api.qrserver.com/v1/create-qr-code/?data="+r[1]+"&format=svg&color=ffffff&bgcolor=1f2937")||b(n,"src",i),b(n,"alt",r[1]),b(t,"class","flex flex-col gap-2"),b(w,"class","text-white text-xl"),b(p,"class","bg-gray-700 rounded-md text-white px-2 py-1"),b(h,"class","flex flex-col gap-2"),b(a,"class","flex flex-col h-auto flex-1 gap-9 mt-2")},m(u,g){A(u,a,g),v(a,t),v(t,s),v(s,l),v(t,c),v(t,n),v(a,m),v(a,h),v(h,w),v(w,_),v(h,S),v(h,p),v(p,I)},p(u,g){g&2&&!X(n.src,i="http://api.qrserver.com/v1/create-qr-code/?data="+u[1]+"&format=svg&color=ffffff&bgcolor=1f2937")&&b(n,"src",i),g&2&&b(n,"alt",u[1]),g&2&&y(I,u[1])},d(u){u&&d(a)}}}function ce(r){let a,t;return a=new re({props:{title:"Share",visible:r[0],$$slots:{default:[fe]},$$scope:{ctx:r}}}),a.$on("close",r[4]),{c(){H(a.$$.fragment)},l(s){C(a.$$.fragment,s)},m(s,l){N(a,s,l),t=!0},p(s,[l]){const c={};l&1&&(c.visible=s[0]),l&34&&(c.$$scope={dirty:l,ctx:s}),a.$set(c)},i(s){t||(D(a.$$.fragment,s),t=!0)},o(s){L(a.$$.fragment,s),t=!1},d(s){T(a,s)}}}function me(r,a,t){let s,{visible:l}=a,{id:c}=a,n="";W(()=>{let m=new URL(window.location.href);t(3,n=m.origin+m.pathname+"join?room=")});function i(m){x.call(this,r,m)}return r.$$set=m=>{"visible"in m&&t(0,l=m.visible),"id"in m&&t(2,c=m.id)},r.$$.update=()=>{r.$$.dirty&12&&t(1,s=n+c)},[l,s,c,n,i]}class he extends z{constructor(a){super();B(this,a,me,ce,F,{visible:0,id:2})}}function Y(r){let a,t;return a=new oe({props:{streams:r[1],sidePanelVisible:r[4]||r[5]||r[6]}}),{c(){H(a.$$.fragment)},l(s){C(a.$$.fragment,s)},m(s,l){N(a,s,l),t=!0},p(s,l){const c={};l&2&&(c.streams=s[1]),l&112&&(c.sidePanelVisible=s[4]||s[5]||s[6]),a.$set(c)},i(s){t||(D(a.$$.fragment,s),t=!0)},o(s){L(a.$$.fragment,s),t=!1},d(s){T(a,s)}}}function ue(r){let a,t,s,l,c,n,i,m,h,w,_,S,p,I,u,g;i=new ae({props:{time:r[2]}}),i.$on("videoswitch",r[8]),i.$on("muteswitch",r[9]),i.$on("sourceswitch",r[10]),i.$on("chatswitch",r[11]),i.$on("membersswitch",r[12]),i.$on("shareswitch",r[13]);let f=r[1].length!==0&&Y(r);return _=new le({props:{visible:r[4],messages:r[3]}}),_.$on("close",r[14]),_.$on("messagesend",r[15]),p=new ne({props:{visible:r[5],users:r[1]}}),p.$on("close",r[16]),u=new he({props:{visible:r[6],id:r[7]}}),u.$on("close",r[17]),{c(){a=k("link"),t=k("link"),s=k("script"),l=G("let parcelRequire;"),c=j(),n=k("div"),H(i.$$.fragment),m=j(),f&&f.c(),w=j(),H(_.$$.fragment),S=j(),H(p.$$.fragment),I=j(),H(u.$$.fragment),this.h()},l(e){const o=ee('[data-svelte="svelte-tu3wcf"]',document.head);a=R(o,"LINK",{rel:!0,href:!0}),t=R(o,"LINK",{rel:!0,href:!0}),s=R(o,"SCRIPT",{});var V=M(s);l=K(V,"let parcelRequire;"),V.forEach(d),o.forEach(d),c=P(e),n=R(e,"DIV",{class:!0});var E=M(n);C(i.$$.fragment,E),m=P(E),f&&f.l(E),E.forEach(d),w=P(e),C(_.$$.fragment,e),S=P(e),C(p.$$.fragment,e),I=P(e),C(u.$$.fragment,e),this.h()},h(){b(a,"rel","icon"),b(a,"href",""+(O+"/favicon.png")),b(t,"rel","manifest"),b(t,"href",""+(O+"/manifest.json")),document.title="Home",b(n,"class",h=""+((r[4]||r[5]||r[6]?"hidden":"flex")+" md:flex flex-col h-screen w-full items-center"))},m(e,o){v(document.head,a),v(document.head,t),v(document.head,s),v(s,l),A(e,c,o),A(e,n,o),N(i,n,null),v(n,m),f&&f.m(n,null),A(e,w,o),N(_,e,o),A(e,S,o),N(p,e,o),A(e,I,o),N(u,e,o),g=!0},p(e,[o]){const V={};o&4&&(V.time=e[2]),i.$set(V),e[1].length!==0?f?(f.p(e,o),o&2&&D(f,1)):(f=Y(e),f.c(),D(f,1),f.m(n,null)):f&&(te(),L(f,1,1,()=>{f=null}),se()),(!g||o&112&&h!==(h=""+((e[4]||e[5]||e[6]?"hidden":"flex")+" md:flex flex-col h-screen w-full items-center")))&&b(n,"class",h);const E={};o&16&&(E.visible=e[4]),o&8&&(E.messages=e[3]),_.$set(E);const $={};o&32&&($.visible=e[5]),o&2&&($.users=e[1]),p.$set($);const U={};o&64&&(U.visible=e[6]),o&128&&(U.id=e[7]),u.$set(U)},i(e){g||(D(i.$$.fragment,e),D(f),D(_.$$.fragment,e),D(p.$$.fragment,e),D(u.$$.fragment,e),g=!0)},o(e){L(i.$$.fragment,e),L(f),L(_.$$.fragment,e),L(p.$$.fragment,e),L(u.$$.fragment,e),g=!1},d(e){d(a),d(t),d(s),e&&d(c),e&&d(n),T(i),f&&f.d(),e&&d(w),T(_,e),e&&d(S),T(p,e),e&&d(I),T(u,e)}}}function de(r,a,t){let s,l=[],c=0,n=[],i=!1,m=!1,h=!1,w="",_="";return W(async()=>{const U=(await Z(()=>import("../chunks/Host-da0e6f67.js"),["chunks/Host-da0e6f67.js","chunks/index-d400411c.js","chunks/vendor-f7df6e26.js","assets/vendor-b8c56e4e.css"])).default;w=window.prompt("Enter username: ");let J=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});t(0,s=new U(w,J)),s.on("peer",q=>{l.map(Q=>Q.stream.id).includes(q.stream.id)||t(1,l=[...l,q])}),s.on("open",q=>{t(1,l=[{id:q,username:w,stream:J}]),t(7,_=q),setInterval(()=>t(2,c++,c),1e3)}),s.on("disconnect",q=>{t(1,l=l.filter(Q=>Q.id!=q))}),s.on("message",q=>{t(3,n=[...n,q])})}),[s,l,c,n,i,m,h,_,()=>{l[0].stream.getVideoTracks().forEach($=>$.enabled=!$.enabled),t(1,l)},()=>{l[0].stream.getAudioTracks().forEach($=>$.enabled=!$.enabled),t(1,l)},async $=>{let U=$.detail.source==ie.Screen?await navigator.mediaDevices.getDisplayMedia({video:!0}):await navigator.mediaDevices.getUserMedia({video:!0});s.replaceStream(U)},()=>{t(4,i=!i),t(5,m=!1),t(6,h=!1)},()=>{t(5,m=!m),t(4,i=!1),t(6,h=!1)},()=>{t(6,h=!h),t(4,i=!1),t(5,m=!1)},()=>t(4,i=!1),$=>s.send($.detail.message),()=>t(5,m=!1),()=>t(6,h=!1)]}class be extends z{constructor(a){super();B(this,a,de,ue,F,{})}}export{be as default};

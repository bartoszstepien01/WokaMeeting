import{_ as h}from"../chunks/preload-helper-549b4fe8.js";import{R as v,S as y,i as j,s as k,j as $,m as q,o as w,x as p,u as m,v as R,e as E,t as P,k as S,l as f,J as x,c as C,a as G,g as J,d as u,n as T,H as d,f as g,w as A,T as D,A as I,r as M}from"../chunks/vendor-5dfe71dc.js";import{G as H}from"../chunks/Gallery-df3fa11a.js";const L=()=>{const a=v("__svelte__");return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:a.navigating.subscribe}},session:a.session}},N={subscribe(a){return L().page.subscribe(a)}};function b(a){let t,n;return t=new H({props:{streams:a[0]}}),{c(){$(t.$$.fragment)},l(s){q(t.$$.fragment,s)},m(s,o){w(t,s,o),n=!0},p(s,o){const i={};o&1&&(i.streams=s[0]),t.$set(i)},i(s){n||(p(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){R(t,s)}}}function O(a){let t,n,s,o,i,e=a[0].length!==0&&b(a);return{c(){t=E("script"),n=P("let parcelRequire;"),s=S(),e&&e.c(),o=f(),this.h()},l(r){const l=x('[data-svelte="svelte-8i7r37"]',document.head);t=C(l,"SCRIPT",{});var c=G(t);n=J(c,"let parcelRequire;"),c.forEach(u),l.forEach(u),s=T(r),e&&e.l(r),o=f(),this.h()},h(){document.title="Join"},m(r,l){d(document.head,t),d(t,n),g(r,s,l),e&&e.m(r,l),g(r,o,l),i=!0},p(r,[l]){r[0].length!==0?e?(e.p(r,l),l&1&&p(e,1)):(e=b(r),e.c(),p(e,1),e.m(o.parentNode,o)):e&&(M(),m(e,1,1,()=>{e=null}),A())},i(r){i||(p(e),i=!0)},o(r){m(e),i=!1},d(r){u(t),r&&u(s),e&&e.d(r),r&&u(o)}}}function U(a,t,n){let s;D(a,N,e=>n(1,s=e));let o=s.query.get("room"),i=[];return I(async()=>{const r=(await h(()=>import("../chunks/peerjs.min-13412648.js").then(function(_){return _.p}),["chunks/peerjs.min-13412648.js","chunks/vendor-5dfe71dc.js"])).default;let l=new r,c=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});n(0,i=[c]),l.call(o,c).on("stream",_=>{n(0,i=[...i,_])})}),[i]}class K extends y{constructor(t){super();j(this,t,U,O,k,{})}}export{K as default};

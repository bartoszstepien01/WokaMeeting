import{b as be,_ as ke}from"../chunks/paths-16c013c9.js";import{S as Te,i as Ie,s as ye,t as K,g as A,f as H,h as ce,d as f,J as F,K as Me,L as Ne,M as je,N as ze,O as Oe,P as Se,j as B,m as R,o as q,x as E,u as I,v as L,e as _,k,l as ve,Q as Ue,c as h,a as v,n as T,b as y,H as a,w as De,A as Pe,r as Ve}from"../chunks/vendor-91964f2e.js";import{G as Be}from"../chunks/Gallery-79ae892e.js";function we($){let n=$[2](Math.floor($[1]/3600),2)+"",o,r;return{c(){o=K(n),r=K(":")},l(t){o=A(t,n),r=A(t,":")},m(t,u){H(t,o,u),H(t,r,u)},p(t,u){u&2&&n!==(n=t[2](Math.floor(t[1]/3600),2)+"")&&ce(o,n)},d(t){t&&f(o),t&&f(r)}}}function Ee($){let n,o;return n=new Be({props:{streams:$[0]}}),{c(){B(n.$$.fragment)},l(r){R(n.$$.fragment,r)},m(r,t){q(n,r,t),o=!0},p(r,t){const u={};t&1&&(u.streams=r[0]),n.$set(u)},i(r){o||(E(n.$$.fragment,r),o=!0)},o(r){I(n.$$.fragment,r),o=!1},d(r){L(n,r)}}}function Re($){let n,o,r,t,u,g,b,N=Math.floor($[1]/60)>=60,M=$[2](Math.floor($[1]/60)%60,2)+"",w,j,s=$[2]($[1]%60,2)+"",m,z,l,J,O,ne,Q,S,se,W,U,oe,X,fe,Y,D,le,Z,P,ie,x,ue,ee,V,re,C,G,p=N&&we($);O=new F({props:{icon:Me,color:"#ffffff",size:"lg"}}),S=new F({props:{icon:Ne,color:"#ffffff",size:"lg"}}),U=new F({props:{icon:je,color:"#ffffff",size:"lg"}}),D=new F({props:{icon:ze,color:"#ffffff",size:"lg"}}),P=new F({props:{icon:Oe,color:"#ffffff",size:"lg"}}),V=new F({props:{icon:Se,color:"#ffffff",size:"lg"}});let i=$[0].length!==0&&Ee($);return{c(){n=_("link"),o=_("link"),r=_("script"),t=K("let parcelRequire;"),u=k(),g=_("div"),b=_("p"),p&&p.c(),w=K(M),j=K(":"),m=K(s),z=k(),l=_("div"),J=_("button"),B(O.$$.fragment),ne=k(),Q=_("button"),B(S.$$.fragment),se=k(),W=_("button"),B(U.$$.fragment),oe=k(),X=_("div"),fe=k(),Y=_("button"),B(D.$$.fragment),le=k(),Z=_("button"),B(P.$$.fragment),ie=k(),x=_("div"),ue=k(),ee=_("button"),B(V.$$.fragment),re=k(),i&&i.c(),C=ve(),this.h()},l(e){const c=Ue('[data-svelte="svelte-tu3wcf"]',document.head);n=h(c,"LINK",{rel:!0,href:!0}),o=h(c,"LINK",{rel:!0,href:!0}),r=h(c,"SCRIPT",{});var me=v(r);t=A(me,"let parcelRequire;"),me.forEach(f),c.forEach(f),u=T(e),g=h(e,"DIV",{class:!0});var ae=v(g);b=h(ae,"P",{class:!0});var te=v(b);p&&p.l(te),w=A(te,M),j=A(te,":"),m=A(te,s),te.forEach(f),z=T(ae),l=h(ae,"DIV",{class:!0});var d=v(l);J=h(d,"BUTTON",{});var pe=v(J);R(O.$$.fragment,pe),pe.forEach(f),ne=T(d),Q=h(d,"BUTTON",{});var de=v(Q);R(S.$$.fragment,de),de.forEach(f),se=T(d),W=h(d,"BUTTON",{});var $e=v(W);R(U.$$.fragment,$e),$e.forEach(f),oe=T(d),X=h(d,"DIV",{class:!0}),v(X).forEach(f),fe=T(d),Y=h(d,"BUTTON",{});var _e=v(Y);R(D.$$.fragment,_e),_e.forEach(f),le=T(d),Z=h(d,"BUTTON",{});var he=v(Z);R(P.$$.fragment,he),he.forEach(f),ie=T(d),x=h(d,"DIV",{class:!0}),v(x).forEach(f),ue=T(d),ee=h(d,"BUTTON",{});var ge=v(ee);R(V.$$.fragment,ge),ge.forEach(f),d.forEach(f),ae.forEach(f),re=T(e),i&&i.l(e),C=ve(),this.h()},h(){y(n,"rel","icon"),y(n,"href",""+(be+"/favicon.png")),y(o,"rel","manifest"),y(o,"href",""+(be+"/manifest.json")),document.title="Home",y(b,"class","text-white"),y(X,"class","border border-gray-500"),y(x,"class","border border-gray-500"),y(l,"class","flex ml-auto gap-4"),y(g,"class","flex w-screen bg-gray-700 h-16 px-8 items-center")},m(e,c){a(document.head,n),a(document.head,o),a(document.head,r),a(r,t),H(e,u,c),H(e,g,c),a(g,b),p&&p.m(b,null),a(b,w),a(b,j),a(b,m),a(g,z),a(g,l),a(l,J),q(O,J,null),a(l,ne),a(l,Q),q(S,Q,null),a(l,se),a(l,W),q(U,W,null),a(l,oe),a(l,X),a(l,fe),a(l,Y),q(D,Y,null),a(l,le),a(l,Z),q(P,Z,null),a(l,ie),a(l,x),a(l,ue),a(l,ee),q(V,ee,null),H(e,re,c),i&&i.m(e,c),H(e,C,c),G=!0},p(e,[c]){c&2&&(N=Math.floor(e[1]/60)>=60),N?p?p.p(e,c):(p=we(e),p.c(),p.m(b,w)):p&&(p.d(1),p=null),(!G||c&2)&&M!==(M=e[2](Math.floor(e[1]/60)%60,2)+"")&&ce(w,M),(!G||c&2)&&s!==(s=e[2](e[1]%60,2)+"")&&ce(m,s),e[0].length!==0?i?(i.p(e,c),c&1&&E(i,1)):(i=Ee(e),i.c(),E(i,1),i.m(C.parentNode,C)):i&&(Ve(),I(i,1,1,()=>{i=null}),De())},i(e){G||(E(O.$$.fragment,e),E(S.$$.fragment,e),E(U.$$.fragment,e),E(D.$$.fragment,e),E(P.$$.fragment,e),E(V.$$.fragment,e),E(i),G=!0)},o(e){I(O.$$.fragment,e),I(S.$$.fragment,e),I(U.$$.fragment,e),I(D.$$.fragment,e),I(P.$$.fragment,e),I(V.$$.fragment,e),I(i),G=!1},d(e){f(n),f(o),f(r),e&&f(u),e&&f(g),p&&p.d(),L(O),L(S),L(U),L(D),L(P),L(V),e&&f(re),i&&i.d(e),e&&f(C)}}}function qe($,n,o){const r=(b,N)=>String(b).padStart(N,"0");let t=[],u=[],g=0;return Pe(async()=>{const N=(await ke(()=>import("../chunks/peerjs.min-cc7cdaeb.js").then(function(s){return s.p}),["chunks/peerjs.min-cc7cdaeb.js","chunks/vendor-91964f2e.js","assets/vendor-b8c56e4e.css"])).default;let M=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(0,t=[M]);let w=[],j=new N(void 0,{config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}});j.on("open",s=>{console.log(s),u=[s],setInterval(()=>o(1,g++,g),1e3)}),j.on("call",s=>{u=[...u,s.peer],s.answer(M),s.on("stream",m=>{t.map(z=>z.id).includes(m.id)||o(0,t=[...t,m])})}),j.on("connection",s=>{s.on("open",()=>{w.forEach(m=>{m.send({type:"connect",data:{peerId:s.peer}})}),w.push(s)}),s.on("close",()=>{w=w.filter(m=>m!=s),o(0,t=t.filter((m,z)=>u[z]!=s.peer)),u=u.filter(m=>m!=s.peer),w.forEach(m=>{m.send({type:"disconnect",data:{peerId:s.peer}})})}),window.onunload=window.onbeforeunload=()=>{s.close()}})}),[t,g,r]}class Ke extends Te{constructor(n){super();Ie(this,n,qe,Re,ye,{})}}export{Ke as default};

import{b as k,_ as j}from"../chunks/paths-16c013c9.js";import{S as w,i as P,s as R,j as q,m as E,o as I,x as p,u as h,v as L,e as g,t as S,k as x,l as b,J as G,c as v,a as J,g as N,d as u,n as A,b as _,H as d,f as y,w as C,A as D,r as K}from"../chunks/vendor-07f555be.js";import{G as M}from"../chunks/Gallery-4bcb3b09.js";function $(f){let n,a;return n=new M({props:{streams:f[0]}}),{c(){q(n.$$.fragment)},l(t){E(n.$$.fragment,t)},m(t,o){I(n,t,o),a=!0},p(t,o){const l={};o&1&&(l.streams=t[0]),n.$set(l)},i(t){a||(p(n.$$.fragment,t),a=!0)},o(t){h(n.$$.fragment,t),a=!1},d(t){L(n,t)}}}function T(f){let n,a,t,o,l,i,c,e=f[0].length!==0&&$(f);return{c(){n=g("link"),a=g("link"),t=g("script"),o=S("let parcelRequire;"),l=x(),e&&e.c(),i=b(),this.h()},l(r){const s=G('[data-svelte="svelte-uncxtc"]',document.head);n=v(s,"LINK",{rel:!0,href:!0}),a=v(s,"LINK",{rel:!0,href:!0}),t=v(s,"SCRIPT",{});var m=J(t);o=N(m,"let parcelRequire;"),m.forEach(u),s.forEach(u),l=A(r),e&&e.l(r),i=b(),this.h()},h(){_(n,"rel","icon"),_(n,"href",""+(k+"/favicon.png")),_(a,"rel","manifest"),_(a,"href",""+(k+"/manifest.json")),document.title="Join"},m(r,s){d(document.head,n),d(document.head,a),d(document.head,t),d(t,o),y(r,l,s),e&&e.m(r,s),y(r,i,s),c=!0},p(r,[s]){r[0].length!==0?e?(e.p(r,s),s&1&&p(e,1)):(e=$(r),e.c(),p(e,1),e.m(i.parentNode,i)):e&&(K(),h(e,1,1,()=>{e=null}),C())},i(r){c||(p(e),c=!0)},o(r){h(e),c=!1},d(r){u(n),u(a),u(t),r&&u(l),e&&e.d(r),r&&u(i)}}}function U(f,n,a){let t=[];return D(async()=>{const l=(await j(()=>import("../chunks/peerjs.min-90eb8cad.js").then(function(e){return e.p}),["chunks/peerjs.min-90eb8cad.js","chunks/vendor-07f555be.js"])).default;let i=new URL(window.location.href),c=new l(void 0,{config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}});c.on("open",()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(e=>{a(0,t=[e]),c.call(i.searchParams.get("room"),e).on("stream",s=>{t.map(m=>m.id).includes(s.id)||a(0,t=[...t,s])})})})}),[t]}class V extends w{constructor(n){super();P(this,n,U,T,R,{})}}export{V as default};

import{b as k,_ as j}from"../chunks/paths-16c013c9.js";import{S as w,i as P,s as R,j as q,m as E,o as I,x as p,u as h,v as L,e as v,t as S,k as x,l as b,J as G,c as g,a as J,g as N,d as u,n as A,b as _,H as d,f as y,w as C,A as D,r as K}from"../chunks/vendor-07f555be.js";import{G as M}from"../chunks/Gallery-4bcb3b09.js";function $(m){let r,n;return r=new M({props:{streams:m[0]}}),{c(){q(r.$$.fragment)},l(e){E(r.$$.fragment,e)},m(e,i){I(r,e,i),n=!0},p(e,i){const l={};i&1&&(l.streams=e[0]),r.$set(l)},i(e){n||(p(r.$$.fragment,e),n=!0)},o(e){h(r.$$.fragment,e),n=!1},d(e){L(r,e)}}}function T(m){let r,n,e,i,l,o,c,t=m[0].length!==0&&$(m);return{c(){r=v("link"),n=v("link"),e=v("script"),i=S("let parcelRequire;"),l=x(),t&&t.c(),o=b(),this.h()},l(a){const s=G('[data-svelte="svelte-uncxtc"]',document.head);r=g(s,"LINK",{rel:!0,href:!0}),n=g(s,"LINK",{rel:!0,href:!0}),e=g(s,"SCRIPT",{});var f=J(e);i=N(f,"let parcelRequire;"),f.forEach(u),s.forEach(u),l=A(a),t&&t.l(a),o=b(),this.h()},h(){_(r,"rel","icon"),_(r,"href",""+(k+"/favicon.png")),_(n,"rel","manifest"),_(n,"href",""+(k+"/manifest.json")),document.title="Join"},m(a,s){d(document.head,r),d(document.head,n),d(document.head,e),d(e,i),y(a,l,s),t&&t.m(a,s),y(a,o,s),c=!0},p(a,[s]){a[0].length!==0?t?(t.p(a,s),s&1&&p(t,1)):(t=$(a),t.c(),p(t,1),t.m(o.parentNode,o)):t&&(K(),h(t,1,1,()=>{t=null}),C())},i(a){c||(p(t),c=!0)},o(a){h(t),c=!1},d(a){u(r),u(n),u(e),a&&u(l),t&&t.d(a),a&&u(o)}}}function U(m,r,n){let e=[];return D(async()=>{const l=(await j(()=>import("../chunks/peerjs.min-90eb8cad.js").then(function(a){return a.p}),["chunks/peerjs.min-90eb8cad.js","chunks/vendor-07f555be.js"])).default;let o=new l({config:{iceServers:[{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}}),c=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});n(0,e=[c]);let t=new URL(window.location.href);o.on("open",()=>{o.call(t.searchParams.get("room"),c).on("stream",s=>{e.map(f=>f.id).includes(s.id)||n(0,e=[...e,s])})})}),[e]}class V extends w{constructor(r){super();P(this,r,U,T,R,{})}}export{V as default};

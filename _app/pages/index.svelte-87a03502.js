import{b as J,_ as X}from"../chunks/paths-16c013c9.js";import{S as O,i as y,s as z,j as U,m as H,o as C,x as q,u as D,v as N,A as B,e as E,t as A,k as L,c as k,a as j,g as G,d,n as M,b,J as F,f as T,H as v,h as Y,K as Z,L as x,w as ee,r as se}from"../chunks/vendor-ef7a3a0d.js";import{P as te,N as ae,C as re,M as le,G as ne,S as oe}from"../chunks/Members-dd352666.js";function ie(a){let r,t,e,n,c,l,i,m,_,$,w,V,p,R;return{c(){r=E("div"),t=E("div"),e=E("h1"),n=A("Scan QR code"),c=L(),l=E("img"),m=L(),_=E("div"),$=E("h1"),w=A("Enter URL"),V=L(),p=E("p"),R=A(a[1]),this.h()},l(u){r=k(u,"DIV",{class:!0});var g=j(r);t=k(g,"DIV",{class:!0});var f=j(t);e=k(f,"H1",{class:!0});var s=j(e);n=G(s,"Scan QR code"),s.forEach(d),c=M(f),l=k(f,"IMG",{class:!0,src:!0,alt:!0}),f.forEach(d),m=M(g),_=k(g,"DIV",{class:!0});var o=j(_);$=k(o,"H1",{class:!0});var S=j($);w=G(S,"Enter URL"),S.forEach(d),V=M(o),p=k(o,"P",{class:!0});var h=j(p);R=G(h,a[1]),h.forEach(d),o.forEach(d),g.forEach(d),this.h()},h(){b(e,"class","text-white text-xl"),b(l,"class","p-2"),F(l.src,i="http://api.qrserver.com/v1/create-qr-code/?data="+a[1]+"&format=svg&color=ffffff&bgcolor=1f2937")||b(l,"src",i),b(l,"alt",a[1]),b(t,"class","flex flex-col gap-2"),b($,"class","text-white text-xl"),b(p,"class","bg-gray-700 rounded-md text-white px-2 py-1"),b(_,"class","flex flex-col gap-2"),b(r,"class","flex flex-col h-auto flex-1 gap-9 mt-2")},m(u,g){T(u,r,g),v(r,t),v(t,e),v(e,n),v(t,c),v(t,l),v(r,m),v(r,_),v(_,$),v($,w),v(_,V),v(_,p),v(p,R)},p(u,g){g&2&&!F(l.src,i="http://api.qrserver.com/v1/create-qr-code/?data="+u[1]+"&format=svg&color=ffffff&bgcolor=1f2937")&&b(l,"src",i),g&2&&b(l,"alt",u[1]),g&2&&Y(R,u[1])},d(u){u&&d(r)}}}function fe(a){let r,t;return r=new te({props:{title:"Share",visible:a[0],$$slots:{default:[ie]},$$scope:{ctx:a}}}),r.$on("close",a[4]),{c(){U(r.$$.fragment)},l(e){H(r.$$.fragment,e)},m(e,n){C(r,e,n),t=!0},p(e,[n]){const c={};n&1&&(c.visible=e[0]),n&34&&(c.$$scope={dirty:n,ctx:e}),r.$set(c)},i(e){t||(q(r.$$.fragment,e),t=!0)},o(e){D(r.$$.fragment,e),t=!1},d(e){N(r,e)}}}function ce(a,r,t){let e,{visible:n}=r,{id:c}=r,l="";B(()=>{let m=new URL(window.location.href);t(3,l=m.origin+m.pathname+"join?room=")});function i(m){Z.call(this,a,m)}return a.$$set=m=>{"visible"in m&&t(0,n=m.visible),"id"in m&&t(2,c=m.id)},a.$$.update=()=>{a.$$.dirty&12&&t(1,e=l+c)},[n,e,c,l,i]}class me extends O{constructor(r){super();y(this,r,ce,fe,z,{visible:0,id:2})}}function W(a){let r,t;return r=new ne({props:{streams:a[1],sidePanelVisible:a[3]||a[4]||a[5]}}),{c(){U(r.$$.fragment)},l(e){H(r.$$.fragment,e)},m(e,n){C(r,e,n),t=!0},p(e,n){const c={};n&2&&(c.streams=e[1]),n&56&&(c.sidePanelVisible=e[3]||e[4]||e[5]),r.$set(c)},i(e){t||(q(r.$$.fragment,e),t=!0)},o(e){D(r.$$.fragment,e),t=!1},d(e){N(r,e)}}}function he(a){let r,t,e,n,c,l,i,m,_,$,w,V,p,R,u,g;i=new ae({props:{time:ue}}),i.$on("videoswitch",a[7]),i.$on("muteswitch",a[8]),i.$on("sourceswitch",a[9]),i.$on("chatswitch",a[10]),i.$on("membersswitch",a[11]),i.$on("shareswitch",a[12]);let f=a[1].length!==0&&W(a);return w=new re({props:{visible:a[3],messages:a[2]}}),w.$on("close",a[13]),w.$on("messagesend",a[14]),p=new le({props:{visible:a[4],users:a[1]}}),p.$on("close",a[15]),u=new me({props:{visible:a[5],id:a[6]}}),u.$on("close",a[16]),{c(){r=E("link"),t=E("link"),e=E("script"),n=A("let parcelRequire;"),c=L(),l=E("div"),U(i.$$.fragment),m=L(),f&&f.c(),$=L(),U(w.$$.fragment),V=L(),U(p.$$.fragment),R=L(),U(u.$$.fragment),this.h()},l(s){const o=x('[data-svelte="svelte-tu3wcf"]',document.head);r=k(o,"LINK",{rel:!0,href:!0}),t=k(o,"LINK",{rel:!0,href:!0}),e=k(o,"SCRIPT",{});var S=j(e);n=G(S,"let parcelRequire;"),S.forEach(d),o.forEach(d),c=M(s),l=k(s,"DIV",{class:!0});var h=j(l);H(i.$$.fragment,h),m=M(h),f&&f.l(h),h.forEach(d),$=M(s),H(w.$$.fragment,s),V=M(s),H(p.$$.fragment,s),R=M(s),H(u.$$.fragment,s),this.h()},h(){b(r,"rel","icon"),b(r,"href",""+(J+"/favicon.png")),b(t,"rel","manifest"),b(t,"href",""+(J+"/manifest.json")),document.title="Home",b(l,"class",_=""+((a[3]||a[4]||a[5]?"hidden":"flex")+" md:flex flex-col h-screen w-full items-center"))},m(s,o){v(document.head,r),v(document.head,t),v(document.head,e),v(e,n),T(s,c,o),T(s,l,o),C(i,l,null),v(l,m),f&&f.m(l,null),T(s,$,o),C(w,s,o),T(s,V,o),C(p,s,o),T(s,R,o),C(u,s,o),g=!0},p(s,[o]){s[1].length!==0?f?(f.p(s,o),o&2&&q(f,1)):(f=W(s),f.c(),q(f,1),f.m(l,null)):f&&(se(),D(f,1,1,()=>{f=null}),ee()),(!g||o&56&&_!==(_=""+((s[3]||s[4]||s[5]?"hidden":"flex")+" md:flex flex-col h-screen w-full items-center")))&&b(l,"class",_);const S={};o&8&&(S.visible=s[3]),o&4&&(S.messages=s[2]),w.$set(S);const h={};o&16&&(h.visible=s[4]),o&2&&(h.users=s[1]),p.$set(h);const P={};o&32&&(P.visible=s[5]),o&64&&(P.id=s[6]),u.$set(P)},i(s){g||(q(i.$$.fragment,s),q(f),q(w.$$.fragment,s),q(p.$$.fragment,s),q(u.$$.fragment,s),g=!0)},o(s){D(i.$$.fragment,s),D(f),D(w.$$.fragment,s),D(p.$$.fragment,s),D(u.$$.fragment,s),g=!1},d(s){d(r),d(t),d(e),s&&d(c),s&&d(l),N(i),f&&f.d(),s&&d($),N(w,s),s&&d(V),N(p,s),s&&d(R),N(u,s)}}}let ue=0;function de(a,r,t){let e,n=[],c=[],l=!1,i=!1,m=!1,_="",$="";return B(async()=>{const P=(await X(()=>import("../chunks/Host-5f7d2eaf.js"),["chunks/Host-5f7d2eaf.js","chunks/peerjs.min-3f0f69c5.js","chunks/vendor-ef7a3a0d.js","assets/vendor-b8c56e4e.css"])).default;_=window.prompt("Enter username: ");let Q=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});t(0,e=new P(_,Q)),e.on("peer",I=>{n.map(K=>K.stream.id).includes(I.stream.id)||t(1,n=[...n,I])}),e.on("open",I=>{t(1,n=[{id:I,username:_,stream:Q}]),t(6,$=I)}),e.on("disconnect",I=>{t(1,n=n.filter(K=>K.id!=I))}),e.on("message",I=>{t(2,c=[...c,I])})}),[e,n,c,l,i,m,$,()=>n[0].stream.getVideoTracks().forEach(h=>h.enabled=!h.enabled),()=>n[0].stream.getAudioTracks().forEach(h=>h.enabled=!h.enabled),async h=>{let P=h.detail.source==oe.Screen?await navigator.mediaDevices.getDisplayMedia({video:!0}):await navigator.mediaDevices.getUserMedia({video:!0});e.replaceStream(P)},()=>{t(3,l=!l),t(4,i=!1),t(5,m=!1)},()=>{t(4,i=!i),t(3,l=!1),t(5,m=!1)},()=>{t(5,m=!m),t(3,l=!1),t(4,i=!1)},()=>t(3,l=!1),h=>e.send(h.detail.message),()=>t(4,i=!1),()=>t(5,m=!1)]}class be extends O{constructor(r){super();y(this,r,de,he,z,{})}}export{be as default};

import{b as Ee,_ as Ie}from"../chunks/paths-16c013c9.js";import{S as Me,i as Ne,s as Se,t as F,g as J,f as Q,h as de,d as f,J as W,K as Ve,L as je,M as De,N as Oe,O as Ue,P as Pe,j as B,m as R,o as C,x as y,u as N,v as q,e as $,k as I,l as Te,Q as Be,c as g,a as w,n as M,b as S,H as n,R as me,w as Re,T as Ce,A as qe,r as Le}from"../chunks/vendor-22efedaa.js";import{G as Ae}from"../chunks/Gallery-91b49d9c.js";function we(d){let s=d[3](Math.floor(d[1]/3600),2)+"",o,a;return{c(){o=F(s),a=F(":")},l(t){o=J(t,s),a=J(t,":")},m(t,u){Q(t,o,u),Q(t,a,u)},p(t,u){u&2&&s!==(s=t[3](Math.floor(t[1]/3600),2)+"")&&de(o,s)},d(t){t&&f(o),t&&f(a)}}}function ye(d){let s,o;return s=new Ae({props:{streams:d[0]}}),{c(){B(s.$$.fragment)},l(a){R(s.$$.fragment,a)},m(a,t){C(s,a,t),o=!0},p(a,t){const u={};t&1&&(u.streams=a[0]),s.$set(u)},i(a){o||(y(s.$$.fragment,a),o=!0)},o(a){N(s.$$.fragment,a),o=!1},d(a){q(s,a)}}}function Ge(d){let s,o,a,t,u,b,m,re=Math.floor(d[1]/60)>=60,L=d[3](Math.floor(d[1]/60)%60,2)+"",A,v,E=d[3](d[1]%60,2)+"",T,k,l,r,i,V,G,j,se,K,D,oe,X,le,Y,O,fe,Z,U,ie,x,ce,ee,P,ae,z,H,ue,pe,_=re&&we(d);i=new W({props:{icon:Ve,color:"#ffffff",scale:1.3}}),j=new W({props:{icon:je,color:"#ffffff",scale:1.3}}),D=new W({props:{icon:De,color:"#ffffff",scale:1.3}}),O=new W({props:{icon:Oe,color:"#ffffff",scale:1.3}}),U=new W({props:{icon:Ue,color:"#ffffff",scale:1.3}}),P=new W({props:{icon:Pe,color:"#ffffff",scale:1.2}});let c=d[0].length!==0&&ye(d);return{c(){s=$("link"),o=$("link"),a=$("script"),t=F("let parcelRequire;"),u=I(),b=$("div"),m=$("p"),_&&_.c(),A=F(L),v=F(":"),T=F(E),k=I(),l=$("div"),r=$("button"),B(i.$$.fragment),V=I(),G=$("button"),B(j.$$.fragment),se=I(),K=$("button"),B(D.$$.fragment),oe=I(),X=$("div"),le=I(),Y=$("button"),B(O.$$.fragment),fe=I(),Z=$("button"),B(U.$$.fragment),ie=I(),x=$("div"),ce=I(),ee=$("button"),B(P.$$.fragment),ae=I(),c&&c.c(),z=Te(),this.h()},l(e){const p=Be('[data-svelte="svelte-tu3wcf"]',document.head);s=g(p,"LINK",{rel:!0,href:!0}),o=g(p,"LINK",{rel:!0,href:!0}),a=g(p,"SCRIPT",{});var _e=w(a);t=J(_e,"let parcelRequire;"),_e.forEach(f),p.forEach(f),u=M(e),b=g(e,"DIV",{class:!0});var ne=w(b);m=g(ne,"P",{class:!0});var te=w(m);_&&_.l(te),A=J(te,L),v=J(te,":"),T=J(te,E),te.forEach(f),k=M(ne),l=g(ne,"DIV",{class:!0});var h=w(l);r=g(h,"BUTTON",{});var he=w(r);R(i.$$.fragment,he),he.forEach(f),V=M(h),G=g(h,"BUTTON",{});var $e=w(G);R(j.$$.fragment,$e),$e.forEach(f),se=M(h),K=g(h,"BUTTON",{});var ge=w(K);R(D.$$.fragment,ge),ge.forEach(f),oe=M(h),X=g(h,"DIV",{class:!0}),w(X).forEach(f),le=M(h),Y=g(h,"BUTTON",{});var be=w(Y);R(O.$$.fragment,be),be.forEach(f),fe=M(h),Z=g(h,"BUTTON",{});var ve=w(Z);R(U.$$.fragment,ve),ve.forEach(f),ie=M(h),x=g(h,"DIV",{class:!0}),w(x).forEach(f),ce=M(h),ee=g(h,"BUTTON",{});var ke=w(ee);R(P.$$.fragment,ke),ke.forEach(f),h.forEach(f),ne.forEach(f),ae=M(e),c&&c.l(e),z=Te(),this.h()},h(){S(s,"rel","icon"),S(s,"href",""+(Ee+"/favicon.png")),S(o,"rel","manifest"),S(o,"href",""+(Ee+"/manifest.json")),document.title="Home",S(m,"class","text-white"),S(X,"class","border border-gray-500"),S(x,"class","border border-gray-500"),S(l,"class","flex ml-auto gap-5"),S(b,"class","flex w-screen bg-gray-700 h-16 px-8 items-center")},m(e,p){n(document.head,s),n(document.head,o),n(document.head,a),n(a,t),Q(e,u,p),Q(e,b,p),n(b,m),_&&_.m(m,null),n(m,A),n(m,v),n(m,T),n(b,k),n(b,l),n(l,r),C(i,r,null),n(l,V),n(l,G),C(j,G,null),n(l,se),n(l,K),C(D,K,null),n(l,oe),n(l,X),n(l,le),n(l,Y),C(O,Y,null),n(l,fe),n(l,Z),C(U,Z,null),n(l,ie),n(l,x),n(l,ce),n(l,ee),C(P,ee,null),Q(e,ae,p),c&&c.m(e,p),Q(e,z,p),H=!0,ue||(pe=[me(r,"click",d[4]),me(G,"click",d[5]),me(K,"click",d[6])],ue=!0)},p(e,[p]){p&2&&(re=Math.floor(e[1]/60)>=60),re?_?_.p(e,p):(_=we(e),_.c(),_.m(m,A)):_&&(_.d(1),_=null),(!H||p&2)&&L!==(L=e[3](Math.floor(e[1]/60)%60,2)+"")&&de(A,L),(!H||p&2)&&E!==(E=e[3](e[1]%60,2)+"")&&de(T,E),e[0].length!==0?c?(c.p(e,p),p&1&&y(c,1)):(c=ye(e),c.c(),y(c,1),c.m(z.parentNode,z)):c&&(Le(),N(c,1,1,()=>{c=null}),Re())},i(e){H||(y(i.$$.fragment,e),y(j.$$.fragment,e),y(D.$$.fragment,e),y(O.$$.fragment,e),y(U.$$.fragment,e),y(P.$$.fragment,e),y(c),H=!0)},o(e){N(i.$$.fragment,e),N(j.$$.fragment,e),N(D.$$.fragment,e),N(O.$$.fragment,e),N(U.$$.fragment,e),N(P.$$.fragment,e),N(c),H=!1},d(e){f(s),f(o),f(a),e&&f(u),e&&f(b),_&&_.d(),q(i),q(j),q(D),q(O),q(U),q(P),e&&f(ae),c&&c.d(e),e&&f(z),ue=!1,Ce(pe)}}}function Ke(d,s,o){const a=(v,E)=>String(v).padStart(E,"0");let t=[],u=[],b=0,m=[];return qe(async()=>{const E=(await Ie(()=>import("../chunks/peerjs.min-20c52f72.js").then(function(r){return r.p}),["chunks/peerjs.min-20c52f72.js","chunks/vendor-22efedaa.js","assets/vendor-b8c56e4e.css"])).default;let T=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(0,t=[T]);let k=[],l=new E(void 0,{config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}});l.on("open",r=>{console.log(r),u=[r],setInterval(()=>o(1,b++,b),1e3)}),l.on("call",r=>{u=[...u,r.peer],o(2,m=[...m,r]),r.answer(T),r.on("stream",i=>{t.map(V=>V.id).includes(i.id)||(o(0,t=[...t,i]),console.log(r.peerConnection.getSenders()))})}),l.on("connection",r=>{r.on("open",()=>{k.forEach(i=>{i.send({type:"connect",data:{peerId:r.peer}})}),k.push(r)}),r.on("close",()=>{k=k.filter(i=>i!=r),o(0,t=t.filter((i,V)=>u[V]!=r.peer)),u=u.filter(i=>i!=r.peer),o(2,m=m.filter(i=>i.peer!=r.peer)),k.forEach(i=>{i.send({type:"disconnect",data:{peerId:r.peer}})})}),window.onunload=window.onbeforeunload=()=>{r.close()}})}),[t,b,m,a,()=>t[0].getVideoTracks().forEach(v=>v.enabled=!v.enabled),()=>t[0].getAudioTracks().forEach(v=>v.enabled=!v.enabled),async()=>{let E=(await navigator.mediaDevices.getDisplayMedia({video:!0})).getVideoTracks()[0];t[0].getVideoTracks().forEach(T=>{T.stop(),t[0].removeTrack(T)}),t[0].addTrack(E),m.forEach(T=>{T.peerConnection.getSenders().filter(k=>k.track.kind=="video").forEach(k=>k.replaceTrack(E))})}]}class Je extends Me{constructor(s){super();Ne(this,s,Ke,Ge,Se,{})}}export{Je as default};

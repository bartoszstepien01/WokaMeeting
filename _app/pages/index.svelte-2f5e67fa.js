import{b as k,_ as j}from"../chunks/paths-16c013c9.js";import{S as w,i as R,s as q,j as E,m as I,o as P,x as f,u as d,v as S,e as h,t as x,k as G,l as b,J as L,c as g,a as N,g as A,d as u,n as C,b as p,H as _,f as y,w as D,A as H,r as K}from"../chunks/vendor-07f555be.js";import{G as M}from"../chunks/Gallery-4bcb3b09.js";function $(m){let r,a;return r=new M({props:{streams:m[0]}}),{c(){E(r.$$.fragment)},l(t){I(r.$$.fragment,t)},m(t,i){P(r,t,i),a=!0},p(t,i){const o={};i&1&&(o.streams=t[0]),r.$set(o)},i(t){a||(f(r.$$.fragment,t),a=!0)},o(t){d(r.$$.fragment,t),a=!1},d(t){S(r,t)}}}function T(m){let r,a,t,i,o,l,c,e=m[0].length!==0&&$(m);return{c(){r=h("link"),a=h("link"),t=h("script"),i=x("let parcelRequire;"),o=G(),e&&e.c(),l=b(),this.h()},l(s){const n=L('[data-svelte="svelte-tu3wcf"]',document.head);r=g(n,"LINK",{rel:!0,href:!0}),a=g(n,"LINK",{rel:!0,href:!0}),t=g(n,"SCRIPT",{});var v=N(t);i=A(v,"let parcelRequire;"),v.forEach(u),n.forEach(u),o=C(s),e&&e.l(s),l=b(),this.h()},h(){p(r,"rel","icon"),p(r,"href",""+(k+"/favicon.png")),p(a,"rel","manifest"),p(a,"href",""+(k+"/manifest.json")),document.title="Home"},m(s,n){_(document.head,r),_(document.head,a),_(document.head,t),_(t,i),y(s,o,n),e&&e.m(s,n),y(s,l,n),c=!0},p(s,[n]){s[0].length!==0?e?(e.p(s,n),n&1&&f(e,1)):(e=$(s),e.c(),f(e,1),e.m(l.parentNode,l)):e&&(K(),d(e,1,1,()=>{e=null}),D())},i(s){c||(f(e),c=!0)},o(s){d(e),c=!1},d(s){u(r),u(a),u(t),s&&u(o),e&&e.d(s),s&&u(l)}}}function z(m,r,a){let t=[];return H(async()=>{const o=(await j(()=>import("../chunks/peerjs.min-90eb8cad.js").then(function(e){return e.p}),["chunks/peerjs.min-90eb8cad.js","chunks/vendor-07f555be.js"])).default;let l=new o({config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}}),c=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});a(0,t=[c]),l.on("open",e=>{console.log(e)}),l.on("call",e=>{e.answer(c),e.on("stream",s=>{t.map(n=>n.id).includes(s.id)||a(0,t=[...t,s])})})}),[t]}class V extends w{constructor(r){super();R(this,r,z,T,q,{})}}export{V as default};

import{_ as y}from"../chunks/preload-helper-35727bd2.js";import{S as $,i as b,s as j,j as k,m as w,o as P,x as m,u as p,v as R,e as q,t as E,k as G,l as _,J,c as S,a as x,g as A,d as c,n as C,H as d,f as h,w as D,A as I,r as L}from"../chunks/vendor-07f555be.js";import{G as M}from"../chunks/Gallery-4bcb3b09.js";function v(i){let s,r;return s=new M({props:{streams:i[0]}}),{c(){k(s.$$.fragment)},l(e){w(s.$$.fragment,e)},m(e,n){P(s,e,n),r=!0},p(e,n){const o={};n&1&&(o.streams=e[0]),s.$set(o)},i(e){r||(m(s.$$.fragment,e),r=!0)},o(e){p(s.$$.fragment,e),r=!1},d(e){R(s,e)}}}function T(i){let s,r,e,n,o,t=i[0].length!==0&&v(i);return{c(){s=q("script"),r=E("let parcelRequire;"),e=G(),t&&t.c(),n=_(),this.h()},l(a){const l=J('[data-svelte="svelte-8i7r37"]',document.head);s=S(l,"SCRIPT",{});var f=x(s);r=A(f,"let parcelRequire;"),f.forEach(c),l.forEach(c),e=C(a),t&&t.l(a),n=_(),this.h()},h(){document.title="Join"},m(a,l){d(document.head,s),d(s,r),h(a,e,l),t&&t.m(a,l),h(a,n,l),o=!0},p(a,[l]){a[0].length!==0?t?(t.p(a,l),l&1&&m(t,1)):(t=v(a),t.c(),m(t,1),t.m(n.parentNode,n)):t&&(L(),p(t,1,1,()=>{t=null}),D())},i(a){o||(m(t),o=!0)},o(a){p(t),o=!1},d(a){c(s),a&&c(e),t&&t.d(a),a&&c(n)}}}function U(i,s,r){let e=[];return I(async()=>{const o=(await y(()=>import("../chunks/peerjs.min-90eb8cad.js").then(function(u){return u.p}),["chunks/peerjs.min-90eb8cad.js","chunks/vendor-07f555be.js"])).default;let t=new o,a=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});r(0,e=[a]);let l=new URL(window.location.href);t.call(l.searchParams.get("room"),a).on("stream",u=>{e.map(g=>g.id).includes(u.id)||r(0,e=[...e,u])})}),[e]}class V extends ${constructor(s){super();b(this,s,U,T,j,{})}}export{V as default};

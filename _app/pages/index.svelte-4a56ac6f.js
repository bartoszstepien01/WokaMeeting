import{b as B,_ as re}from"../chunks/paths-16c013c9.js";import{S as F,i as W,s as X,j as N,m as C,o as J,x as R,u as V,v as T,A as Y,e as M,t as O,k as D,c as P,a as U,g as Q,d as _,n as L,b as g,J as Z,f as A,H as b,h as ae,K as le,L as ne,M as oe,w as y,N as ie,O as fe,r as x}from"../chunks/vendor-775b6d8d.js";import{P as ce,N as ue,C as me,M as he,J as de,G as pe,S as _e}from"../chunks/JoinPopup-c71c7599.js";function ge(a){let r,t,e,l,c,n,f,o,d,v,I,p,k,$;return{c(){r=M("div"),t=M("div"),e=M("h1"),l=O("Scan QR code"),c=D(),n=M("img"),o=D(),d=M("div"),v=M("h1"),I=O("Enter URL"),p=D(),k=M("p"),$=O(a[1]),this.h()},l(E){r=P(E,"DIV",{class:!0});var h=U(r);t=P(h,"DIV",{class:!0});var S=U(t);e=P(S,"H1",{class:!0});var m=U(e);l=Q(m,"Scan QR code"),m.forEach(_),c=L(S),n=P(S,"IMG",{class:!0,src:!0,alt:!0}),S.forEach(_),o=L(h),d=P(h,"DIV",{class:!0});var u=U(d);v=P(u,"H1",{class:!0});var s=U(v);I=Q(s,"Enter URL"),s.forEach(_),p=L(u),k=P(u,"P",{class:!0});var i=U(k);$=Q(i,a[1]),i.forEach(_),u.forEach(_),h.forEach(_),this.h()},h(){g(e,"class","text-white text-xl"),g(n,"class","p-2"),Z(n.src,f="http://api.qrserver.com/v1/create-qr-code/?data="+a[1]+"&format=svg&color=ffffff&bgcolor=1f2937")||g(n,"src",f),g(n,"alt",a[1]),g(t,"class","flex flex-col gap-2"),g(v,"class","text-white text-xl"),g(k,"class","bg-gray-700 rounded-md text-white px-2 py-1"),g(d,"class","flex flex-col gap-2"),g(r,"class","flex flex-col h-auto flex-1 gap-9 mt-2")},m(E,h){A(E,r,h),b(r,t),b(t,e),b(e,l),b(t,c),b(t,n),b(r,o),b(r,d),b(d,v),b(v,I),b(d,p),b(d,k),b(k,$)},p(E,h){h&2&&!Z(n.src,f="http://api.qrserver.com/v1/create-qr-code/?data="+E[1]+"&format=svg&color=ffffff&bgcolor=1f2937")&&g(n,"src",f),h&2&&g(n,"alt",E[1]),h&2&&ae($,E[1])},d(E){E&&_(r)}}}function be(a){let r,t;return r=new ce({props:{title:"Share",visible:a[0],$$slots:{default:[ge]},$$scope:{ctx:a}}}),r.$on("close",a[4]),{c(){N(r.$$.fragment)},l(e){C(r.$$.fragment,e)},m(e,l){J(r,e,l),t=!0},p(e,[l]){const c={};l&1&&(c.visible=e[0]),l&34&&(c.$$scope={dirty:l,ctx:e}),r.$set(c)},i(e){t||(R(r.$$.fragment,e),t=!0)},o(e){V(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function ve(a,r,t){let e,{visible:l}=r,{id:c}=r,n="";Y(()=>{let o=new URL(window.location.href);t(3,n=o.origin+o.pathname+"join?room=")});function f(o){le.call(this,a,o)}return a.$$set=o=>{"visible"in o&&t(0,l=o.visible),"id"in o&&t(2,c=o.id)},a.$$.update=()=>{a.$$.dirty&12&&t(1,e=n+c)},[l,e,c,n,f]}class we extends F{constructor(r){super();W(this,r,ve,be,X,{visible:0,id:2})}}function ee(a){let r,t,e;function l(n){a[10](n)}let c={};return a[9]!==void 0&&(c.promise=a[9]),r=new de({props:c}),ie.push(()=>fe(r,"promise",l)),{c(){N(r.$$.fragment)},l(n){C(r.$$.fragment,n)},m(n,f){J(r,n,f),e=!0},p(n,f){const o={};!t&&f&512&&(t=!0,o.promise=n[9],ne(()=>t=!1)),r.$set(o)},i(n){e||(R(r.$$.fragment,n),e=!0)},o(n){V(r.$$.fragment,n),e=!1},d(n){T(r,n)}}}function se(a){let r,t;return r=new pe({props:{streams:a[1],sidePanelVisible:a[4]||a[5]||a[6]}}),{c(){N(r.$$.fragment)},l(e){C(r.$$.fragment,e)},m(e,l){J(r,e,l),t=!0},p(e,l){const c={};l&2&&(c.streams=e[1]),l&112&&(c.sidePanelVisible=e[4]||e[5]||e[6]),r.$set(c)},i(e){t||(R(r.$$.fragment,e),t=!0)},o(e){V(r.$$.fragment,e),t=!1},d(e){T(r,e)}}}function $e(a){let r,t,e,l,c,n,f,o,d,v,I,p,k,$,E,h,S,m=a[7]==null&&ee(a);o=new ue({props:{time:a[2]}}),o.$on("videoswitch",a[11]),o.$on("muteswitch",a[12]),o.$on("sourceswitch",a[13]),o.$on("chatswitch",a[14]),o.$on("membersswitch",a[15]),o.$on("shareswitch",a[16]);let u=a[1].length!==0&&se(a);return p=new me({props:{visible:a[4],messages:a[3]}}),p.$on("close",a[17]),p.$on("messagesend",a[18]),$=new he({props:{visible:a[5],users:a[1]}}),$.$on("close",a[19]),h=new we({props:{visible:a[6],id:a[8]}}),h.$on("close",a[20]),{c(){r=M("link"),t=M("link"),e=M("script"),l=O("let parcelRequire;"),c=D(),m&&m.c(),n=D(),f=M("div"),N(o.$$.fragment),d=D(),u&&u.c(),I=D(),N(p.$$.fragment),k=D(),N($.$$.fragment),E=D(),N(h.$$.fragment),this.h()},l(s){const i=oe('[data-svelte="svelte-tu3wcf"]',document.head);r=P(i,"LINK",{rel:!0,href:!0}),t=P(i,"LINK",{rel:!0,href:!0}),e=P(i,"SCRIPT",{});var G=U(e);l=Q(G,"let parcelRequire;"),G.forEach(_),i.forEach(_),c=L(s),m&&m.l(s),n=L(s),f=P(s,"DIV",{class:!0});var q=U(f);C(o.$$.fragment,q),d=L(q),u&&u.l(q),q.forEach(_),I=L(s),C(p.$$.fragment,s),k=L(s),C($.$$.fragment,s),E=L(s),C(h.$$.fragment,s),this.h()},h(){g(r,"rel","icon"),g(r,"href",""+(B+"/favicon.png")),g(t,"rel","manifest"),g(t,"href",""+(B+"/manifest.json")),document.title="Home",g(f,"class",v=""+((a[4]||a[5]||a[6]?"hidden":"flex")+" md:flex flex-col h-screen w-full items-center"))},m(s,i){b(document.head,r),b(document.head,t),b(document.head,e),b(e,l),A(s,c,i),m&&m.m(s,i),A(s,n,i),A(s,f,i),J(o,f,null),b(f,d),u&&u.m(f,null),A(s,I,i),J(p,s,i),A(s,k,i),J($,s,i),A(s,E,i),J(h,s,i),S=!0},p(s,[i]){s[7]==null?m?(m.p(s,i),i&128&&R(m,1)):(m=ee(s),m.c(),R(m,1),m.m(n.parentNode,n)):m&&(x(),V(m,1,1,()=>{m=null}),y());const G={};i&4&&(G.time=s[2]),o.$set(G),s[1].length!==0?u?(u.p(s,i),i&2&&R(u,1)):(u=se(s),u.c(),R(u,1),u.m(f,null)):u&&(x(),V(u,1,1,()=>{u=null}),y()),(!S||i&112&&v!==(v=""+((s[4]||s[5]||s[6]?"hidden":"flex")+" md:flex flex-col h-screen w-full items-center")))&&g(f,"class",v);const q={};i&16&&(q.visible=s[4]),i&8&&(q.messages=s[3]),p.$set(q);const w={};i&32&&(w.visible=s[5]),i&2&&(w.users=s[1]),$.$set(w);const H={};i&64&&(H.visible=s[6]),i&256&&(H.id=s[8]),h.$set(H)},i(s){S||(R(m),R(o.$$.fragment,s),R(u),R(p.$$.fragment,s),R($.$$.fragment,s),R(h.$$.fragment,s),S=!0)},o(s){V(m),V(o.$$.fragment,s),V(u),V(p.$$.fragment,s),V($.$$.fragment,s),V(h.$$.fragment,s),S=!1},d(s){_(r),_(t),_(e),s&&_(c),m&&m.d(s),s&&_(n),s&&_(f),T(o),u&&u.d(),s&&_(I),T(p,s),s&&_(k),T($,s),s&&_(E),T(h,s)}}}function Ee(a,r,t){let e,l=[],c=0,n=[],f=!1,o=!1,d=!1,v,I="",p;Y(async()=>{const H=(await re(()=>import("../chunks/Host-eb68cf27.js"),["chunks/Host-eb68cf27.js","chunks/index-243eeab3.js","chunks/vendor-775b6d8d.js","assets/vendor-b8c56e4e.css"])).default;t(7,v=await p);let z=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});t(0,e=new H(v,z)),e.on("peer",j=>{l.map(K=>K.stream.id).includes(j.stream.id)||t(1,l=[...l,j])}),e.on("open",j=>{t(1,l=[{id:j,username:v,stream:z,video:!0,audio:!0}]),t(8,I=j),setInterval(()=>t(2,c++,c),1e3)}),e.on("disconnect",j=>{t(1,l=l.filter(K=>K.id!=j))}),e.on("message",j=>{t(3,n=[...n,j])}),e.on("toggle",j=>{let K=l.find(te=>te.id==j.id);K.video=j.video,K.audio=j.audio,t(1,l)})});function k(w){p=w,t(9,p)}return[e,l,c,n,f,o,d,v,I,p,k,()=>{l[0].stream.getVideoTracks().forEach(w=>w.enabled=!w.enabled),t(1,l[0].video=!l[0].video,l),e.toggleMedia(!e.videoEnabled)},()=>{l[0].stream.getAudioTracks().forEach(w=>w.enabled=!w.enabled),t(1,l[0].audio=!l[0].audio,l),e.toggleMedia(void 0,!e.audioEnabled)},async w=>{let H=w.detail.source==_e.Screen?await navigator.mediaDevices.getDisplayMedia({video:!0}):await navigator.mediaDevices.getUserMedia({video:!0});e.replaceStream(H)},()=>{t(4,f=!f),t(5,o=!1),t(6,d=!1)},()=>{t(5,o=!o),t(4,f=!1),t(6,d=!1)},()=>{t(6,d=!d),t(4,f=!1),t(5,o=!1)},()=>t(4,f=!1),w=>e.send(w.detail.message),()=>t(5,o=!1),()=>t(6,d=!1)]}class Ie extends F{constructor(r){super();W(this,r,Ee,$e,X,{})}}export{Ie as default};

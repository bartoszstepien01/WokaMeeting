import{b as O,_ as y}from"../chunks/paths-16c013c9.js";import{S as z,i as B,s as F,j as C,m as N,o as T,x as q,u as D,v as A,A as W,e as R,t as K,k as L,c as I,a as j,g as Q,d,n as P,b,J as X,f as G,H as v,h as x,K as ee,L as se,w as te,r as re}from"../chunks/vendor-ae9d1f21.js";import{P as ae,N as le,C as ne,M as oe,G as ie,S as fe}from"../chunks/Members-d600cbee.js";function ce(r){let a,t,e,l,c,n,i,m,h,w,_,V,g,S;return{c(){a=R("div"),t=R("div"),e=R("h1"),l=K("Scan QR code"),c=L(),n=R("img"),m=L(),h=R("div"),w=R("h1"),_=K("Enter URL"),V=L(),g=R("p"),S=K(r[1]),this.h()},l(u){a=I(u,"DIV",{class:!0});var p=j(a);t=I(p,"DIV",{class:!0});var f=j(t);e=I(f,"H1",{class:!0});var s=j(e);l=Q(s,"Scan QR code"),s.forEach(d),c=P(f),n=I(f,"IMG",{class:!0,src:!0,alt:!0}),f.forEach(d),m=P(p),h=I(p,"DIV",{class:!0});var o=j(h);w=I(o,"H1",{class:!0});var M=j(w);_=Q(M,"Enter URL"),M.forEach(d),V=P(o),g=I(o,"P",{class:!0});var k=j(g);S=Q(k,r[1]),k.forEach(d),o.forEach(d),p.forEach(d),this.h()},h(){b(e,"class","text-white text-xl"),b(n,"class","p-2"),X(n.src,i="http://api.qrserver.com/v1/create-qr-code/?data="+r[1]+"&format=svg&color=ffffff&bgcolor=1f2937")||b(n,"src",i),b(n,"alt",r[1]),b(t,"class","flex flex-col gap-2"),b(w,"class","text-white text-xl"),b(g,"class","bg-gray-700 rounded-md text-white px-2 py-1"),b(h,"class","flex flex-col gap-2"),b(a,"class","flex flex-col h-auto flex-1 gap-9 mt-2")},m(u,p){G(u,a,p),v(a,t),v(t,e),v(e,l),v(t,c),v(t,n),v(a,m),v(a,h),v(h,w),v(w,_),v(h,V),v(h,g),v(g,S)},p(u,p){p&2&&!X(n.src,i="http://api.qrserver.com/v1/create-qr-code/?data="+u[1]+"&format=svg&color=ffffff&bgcolor=1f2937")&&b(n,"src",i),p&2&&b(n,"alt",u[1]),p&2&&x(S,u[1])},d(u){u&&d(a)}}}function me(r){let a,t;return a=new ae({props:{title:"Share",visible:r[0],$$slots:{default:[ce]},$$scope:{ctx:r}}}),a.$on("close",r[4]),{c(){C(a.$$.fragment)},l(e){N(a.$$.fragment,e)},m(e,l){T(a,e,l),t=!0},p(e,[l]){const c={};l&1&&(c.visible=e[0]),l&34&&(c.$$scope={dirty:l,ctx:e}),a.$set(c)},i(e){t||(q(a.$$.fragment,e),t=!0)},o(e){D(a.$$.fragment,e),t=!1},d(e){A(a,e)}}}function he(r,a,t){let e,{visible:l}=a,{id:c}=a,n="";W(()=>{let m=new URL(window.location.href);t(3,n=m.origin+m.pathname+"join?room=")});function i(m){ee.call(this,r,m)}return r.$$set=m=>{"visible"in m&&t(0,l=m.visible),"id"in m&&t(2,c=m.id)},r.$$.update=()=>{r.$$.dirty&12&&t(1,e=n+c)},[l,e,c,n,i]}class ue extends z{constructor(a){super();B(this,a,he,me,F,{visible:0,id:2})}}function Y(r){let a,t;return a=new ie({props:{streams:r[1],sidePanelVisible:r[4]||r[5]||r[6]}}),{c(){C(a.$$.fragment)},l(e){N(a.$$.fragment,e)},m(e,l){T(a,e,l),t=!0},p(e,l){const c={};l&2&&(c.streams=e[1]),l&112&&(c.sidePanelVisible=e[4]||e[5]||e[6]),a.$set(c)},i(e){t||(q(a.$$.fragment,e),t=!0)},o(e){D(a.$$.fragment,e),t=!1},d(e){A(a,e)}}}function de(r){let a,t,e,l,c,n,i,m,h,w,_,V,g,S,u,p;i=new le({props:{time:r[2]}}),i.$on("videoswitch",r[8]),i.$on("muteswitch",r[9]),i.$on("sourceswitch",r[10]),i.$on("chatswitch",r[11]),i.$on("membersswitch",r[12]),i.$on("shareswitch",r[13]);let f=r[1].length!==0&&Y(r);return _=new ne({props:{visible:r[4],messages:r[3]}}),_.$on("close",r[14]),_.$on("messagesend",r[15]),g=new oe({props:{visible:r[5],users:r[1]}}),g.$on("close",r[16]),u=new ue({props:{visible:r[6],id:r[7]}}),u.$on("close",r[17]),{c(){a=R("link"),t=R("link"),e=R("script"),l=K("let parcelRequire;"),c=L(),n=R("div"),C(i.$$.fragment),m=L(),f&&f.c(),w=L(),C(_.$$.fragment),V=L(),C(g.$$.fragment),S=L(),C(u.$$.fragment),this.h()},l(s){const o=se('[data-svelte="svelte-tu3wcf"]',document.head);a=I(o,"LINK",{rel:!0,href:!0}),t=I(o,"LINK",{rel:!0,href:!0}),e=I(o,"SCRIPT",{});var M=j(e);l=Q(M,"let parcelRequire;"),M.forEach(d),o.forEach(d),c=P(s),n=I(s,"DIV",{class:!0});var k=j(n);N(i.$$.fragment,k),m=P(k),f&&f.l(k),k.forEach(d),w=P(s),N(_.$$.fragment,s),V=P(s),N(g.$$.fragment,s),S=P(s),N(u.$$.fragment,s),this.h()},h(){b(a,"rel","icon"),b(a,"href",""+(O+"/favicon.png")),b(t,"rel","manifest"),b(t,"href",""+(O+"/manifest.json")),document.title="Home",b(n,"class",h=""+((r[4]||r[5]||r[6]?"hidden":"flex")+" md:flex flex-col h-screen w-full items-center"))},m(s,o){v(document.head,a),v(document.head,t),v(document.head,e),v(e,l),G(s,c,o),G(s,n,o),T(i,n,null),v(n,m),f&&f.m(n,null),G(s,w,o),T(_,s,o),G(s,V,o),T(g,s,o),G(s,S,o),T(u,s,o),p=!0},p(s,[o]){const M={};o&4&&(M.time=s[2]),i.$set(M),s[1].length!==0?f?(f.p(s,o),o&2&&q(f,1)):(f=Y(s),f.c(),q(f,1),f.m(n,null)):f&&(re(),D(f,1,1,()=>{f=null}),te()),(!p||o&112&&h!==(h=""+((s[4]||s[5]||s[6]?"hidden":"flex")+" md:flex flex-col h-screen w-full items-center")))&&b(n,"class",h);const k={};o&16&&(k.visible=s[4]),o&8&&(k.messages=s[3]),_.$set(k);const $={};o&32&&($.visible=s[5]),o&2&&($.users=s[1]),g.$set($);const U={};o&64&&(U.visible=s[6]),o&128&&(U.id=s[7]),u.$set(U)},i(s){p||(q(i.$$.fragment,s),q(f),q(_.$$.fragment,s),q(g.$$.fragment,s),q(u.$$.fragment,s),p=!0)},o(s){D(i.$$.fragment,s),D(f),D(_.$$.fragment,s),D(g.$$.fragment,s),D(u.$$.fragment,s),p=!1},d(s){d(a),d(t),d(e),s&&d(c),s&&d(n),A(i),f&&f.d(),s&&d(w),A(_,s),s&&d(V),A(g,s),s&&d(S),A(u,s)}}}function _e(r,a,t){let e,l=[],c=0,n=[],i=!1,m=!1,h=!1,w="",_="";return W(async()=>{const U=(await y(()=>import("../chunks/Host-0be37258.js"),["chunks/Host-0be37258.js","chunks/index-358da7be.js","chunks/vendor-ae9d1f21.js","assets/vendor-b8c56e4e.css"])).default;w=window.prompt("Enter username: ");let J=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});t(0,e=new U(w,J)),e.on("peer",E=>{l.map(H=>H.stream.id).includes(E.stream.id)||t(1,l=[...l,E])}),e.on("open",E=>{t(1,l=[{id:E,username:w,stream:J,video:!0,audio:!0}]),t(7,_=E),setInterval(()=>t(2,c++,c),1e3)}),e.on("disconnect",E=>{t(1,l=l.filter(H=>H.id!=E))}),e.on("message",E=>{t(3,n=[...n,E])}),e.on("toggle",E=>{let H=l.find(Z=>Z.id==E.id);H.video=E.video,H.audio=E.audio,t(1,l)})}),[e,l,c,n,i,m,h,_,()=>{l[0].stream.getVideoTracks().forEach($=>$.enabled=!$.enabled),t(1,l[0].video=!l[0].video,l),e.toggleMedia(!e.videoEnabled)},()=>{l[0].stream.getAudioTracks().forEach($=>$.enabled=!$.enabled),t(1,l[0].audio=!l[0].audio,l),e.toggleMedia(void 0,!e.audioEnabled)},async $=>{let U=$.detail.source==fe.Screen?await navigator.mediaDevices.getDisplayMedia({video:!0}):await navigator.mediaDevices.getUserMedia({video:!0});e.replaceStream(U)},()=>{t(4,i=!i),t(5,m=!1),t(6,h=!1)},()=>{t(5,m=!m),t(4,i=!1),t(6,h=!1)},()=>{t(6,h=!h),t(4,i=!1),t(5,m=!1)},()=>t(4,i=!1),$=>e.send($.detail.message),()=>t(5,m=!1),()=>t(6,h=!1)]}class ve extends z{constructor(a){super();B(this,a,_e,de,F,{})}}export{ve as default};

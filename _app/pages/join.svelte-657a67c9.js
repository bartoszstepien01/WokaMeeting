import{b as k,_ as j}from"../chunks/paths-16c013c9.js";import{S as w,i as P,s as R,j as q,m as E,o as I,x as p,u as h,v as L,e as v,t as x,k as G,l as b,J,c as g,a as N,g as S,d as u,n as A,b as _,H as d,f as y,w as C,A as D,r as K}from"../chunks/vendor-07f555be.js";import{G as M}from"../chunks/Gallery-4bcb3b09.js";function $(f){let a,n;return a=new M({props:{streams:f[0]}}),{c(){q(a.$$.fragment)},l(t){E(a.$$.fragment,t)},m(t,o){I(a,t,o),n=!0},p(t,o){const l={};o&1&&(l.streams=t[0]),a.$set(l)},i(t){n||(p(a.$$.fragment,t),n=!0)},o(t){h(a.$$.fragment,t),n=!1},d(t){L(a,t)}}}function T(f){let a,n,t,o,l,i,c,e=f[0].length!==0&&$(f);return{c(){a=v("link"),n=v("link"),t=v("script"),o=x("let parcelRequire;"),l=G(),e&&e.c(),i=b(),this.h()},l(r){const s=J('[data-svelte="svelte-uncxtc"]',document.head);a=g(s,"LINK",{rel:!0,href:!0}),n=g(s,"LINK",{rel:!0,href:!0}),t=g(s,"SCRIPT",{});var m=N(t);o=S(m,"let parcelRequire;"),m.forEach(u),s.forEach(u),l=A(r),e&&e.l(r),i=b(),this.h()},h(){_(a,"rel","icon"),_(a,"href",""+(k+"/favicon.png")),_(n,"rel","manifest"),_(n,"href",""+(k+"/manifest.json")),document.title="Join"},m(r,s){d(document.head,a),d(document.head,n),d(document.head,t),d(t,o),y(r,l,s),e&&e.m(r,s),y(r,i,s),c=!0},p(r,[s]){r[0].length!==0?e?(e.p(r,s),s&1&&p(e,1)):(e=$(r),e.c(),p(e,1),e.m(i.parentNode,i)):e&&(K(),h(e,1,1,()=>{e=null}),C())},i(r){c||(p(e),c=!0)},o(r){h(e),c=!1},d(r){u(a),u(n),u(t),r&&u(l),e&&e.d(r),r&&u(i)}}}function U(f,a,n){let t=[];return D(async()=>{const l=(await j(()=>import("../chunks/peerjs.min-90eb8cad.js").then(function(e){return e.p}),["chunks/peerjs.min-90eb8cad.js","chunks/vendor-07f555be.js"])).default;let i=new URL(window.location.href),c=new l;c.on("open",()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(e=>{n(0,t=[e]),c.call(i.searchParams.get("room"),e).on("stream",s=>{t.map(m=>m.id).includes(s.id)||n(0,t=[...t,s])})})})}),[t]}class z extends w{constructor(a){super();P(this,a,U,T,R,{})}}export{z as default};

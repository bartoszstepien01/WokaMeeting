import{_ as h}from"../chunks/preload-helper-549b4fe8.js";import{R as v,S as y,i as j,s as k,j as $,m as q,o as w,x as p,u as m,v as R,e as E,t as P,k as S,l as f,J as x,c as C,a as G,g as J,d as u,n as T,H as d,f as g,w as A,T as D,A as I,r as M}from"../chunks/vendor-5dfe71dc.js";import{G as H}from"../chunks/Gallery-df3fa11a.js";const L=()=>{const a=v("__svelte__");return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:a.navigating.subscribe}},session:a.session}},N={subscribe(a){return L().page.subscribe(a)}};function b(a){let t,o;return t=new H({props:{streams:a[0]}}),{c(){$(t.$$.fragment)},l(s){q(t.$$.fragment,s)},m(s,n){w(t,s,n),o=!0},p(s,n){const i={};n&1&&(i.streams=s[0]),t.$set(i)},i(s){o||(p(t.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),o=!1},d(s){R(t,s)}}}function O(a){let t,o,s,n,i,e=a[0].length!==0&&b(a);return{c(){t=E("script"),o=P("let parcelRequire;"),s=S(),e&&e.c(),n=f(),this.h()},l(r){const l=x('[data-svelte="svelte-8i7r37"]',document.head);t=C(l,"SCRIPT",{});var c=G(t);o=J(c,"let parcelRequire;"),c.forEach(u),l.forEach(u),s=T(r),e&&e.l(r),n=f(),this.h()},h(){document.title="Join"},m(r,l){d(document.head,t),d(t,o),g(r,s,l),e&&e.m(r,l),g(r,n,l),i=!0},p(r,[l]){r[0].length!==0?e?(e.p(r,l),l&1&&p(e,1)):(e=b(r),e.c(),p(e,1),e.m(n.parentNode,n)):e&&(M(),m(e,1,1,()=>{e=null}),A())},i(r){i||(p(e),i=!0)},o(r){m(e),i=!1},d(r){u(t),r&&u(s),e&&e.d(r),r&&u(n)}}}function U(a,t,o){let s;D(a,N,e=>o(1,s=e));let n=s.query.get("room"),i=[];return I(async()=>{const r=(await h(()=>import("../chunks/peerjs.min-13412648.js").then(function(_){return _.p}),["chunks/peerjs.min-13412648.js","chunks/vendor-5dfe71dc.js"])).default;let l=new r,c=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(0,i=[c]),console.log(n),l.call(n,c).on("stream",_=>{o(0,i=[...i,_])})}),[i]}class K extends y{constructor(t){super();j(this,t,U,O,k,{})}}export{K as default};

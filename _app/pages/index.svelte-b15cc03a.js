import{b,_ as j}from"../chunks/paths-16c013c9.js";import{S as $,i as R,s as q,j as E,m as I,o as P,x as p,u as h,v as S,e as g,t as x,k as G,l as k,J as L,c as v,a as N,g as A,d as u,n as C,b as _,H as d,f as y,w as D,A as H,r as K}from"../chunks/vendor-07f555be.js";import{G as M}from"../chunks/Gallery-4bcb3b09.js";function w(f){let s,a;return s=new M({props:{streams:f[0]}}),{c(){E(s.$$.fragment)},l(t){I(s.$$.fragment,t)},m(t,o){P(s,t,o),a=!0},p(t,o){const l={};o&1&&(l.streams=t[0]),s.$set(l)},i(t){a||(p(s.$$.fragment,t),a=!0)},o(t){h(s.$$.fragment,t),a=!1},d(t){S(s,t)}}}function T(f){let s,a,t,o,l,i,c,r=f[0].length!==0&&w(f);return{c(){s=g("link"),a=g("link"),t=g("script"),o=x("let parcelRequire;"),l=G(),r&&r.c(),i=k(),this.h()},l(e){const n=L('[data-svelte="svelte-tu3wcf"]',document.head);s=v(n,"LINK",{rel:!0,href:!0}),a=v(n,"LINK",{rel:!0,href:!0}),t=v(n,"SCRIPT",{});var m=N(t);o=A(m,"let parcelRequire;"),m.forEach(u),n.forEach(u),l=C(e),r&&r.l(e),i=k(),this.h()},h(){_(s,"rel","icon"),_(s,"href",""+(b+"/favicon.png")),_(a,"rel","manifest"),_(a,"href",""+(b+"/manifest.json")),document.title="Home"},m(e,n){d(document.head,s),d(document.head,a),d(document.head,t),d(t,o),y(e,l,n),r&&r.m(e,n),y(e,i,n),c=!0},p(e,[n]){e[0].length!==0?r?(r.p(e,n),n&1&&p(r,1)):(r=w(e),r.c(),p(r,1),r.m(i.parentNode,i)):r&&(K(),h(r,1,1,()=>{r=null}),D())},i(e){c||(p(r),c=!0)},o(e){h(r),c=!1},d(e){u(s),u(a),u(t),e&&u(l),r&&r.d(e),e&&u(i)}}}function z(f,s,a){let t=[],o=[];return H(async()=>{const i=(await j(()=>import("../chunks/peerjs.min-90eb8cad.js").then(function(e){return e.p}),["chunks/peerjs.min-90eb8cad.js","chunks/vendor-07f555be.js"])).default;let c=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});a(0,t=[c]);let r=new i(void 0,{config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}});r.on("open",e=>{console.log(e),o=[e]}),r.on("call",e=>{o=[...o,e.peer],e.answer(c),e.on("stream",n=>{t.map(m=>m.id).includes(n.id)||a(0,t=[...t,n])})}),r.on("connection",e=>{e.on("close",()=>{a(0,t=t.filter((n,m)=>o[m]!=e.peer)),o=o.filter(n=>n!=e.peer)}),window.onbeforeunload=()=>{e.close()}})}),[t]}class V extends ${constructor(s){super();R(this,s,z,T,q,{})}}export{V as default};

import{_ as v}from"../chunks/preload-helper-549b4fe8.js";import{R as y,S as j,i as k,s as $,j as q,m as w,o as R,x as _,u as m,v as E,e as P,t as S,k as x,l as f,J as C,c as G,a as J,g as T,d as u,n as A,H as d,f as g,w as D,T as I,A as M,r as H}from"../chunks/vendor-5dfe71dc.js";import{G as L}from"../chunks/Gallery-df3fa11a.js";const N=()=>{const a=y("__svelte__");return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:a.navigating.subscribe}},session:a.session}},O={subscribe(a){return N().page.subscribe(a)}};function b(a){let t,o;return t=new L({props:{streams:a[0]}}),{c(){q(t.$$.fragment)},l(s){w(t.$$.fragment,s)},m(s,i){R(t,s,i),o=!0},p(s,i){const n={};i&1&&(n.streams=s[0]),t.$set(n)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){m(t.$$.fragment,s),o=!1},d(s){E(t,s)}}}function U(a){let t,o,s,i,n,e=a[0].length!==0&&b(a);return{c(){t=P("script"),o=S("let parcelRequire;"),s=x(),e&&e.c(),i=f(),this.h()},l(r){const l=C('[data-svelte="svelte-8i7r37"]',document.head);t=G(l,"SCRIPT",{});var c=J(t);o=T(c,"let parcelRequire;"),c.forEach(u),l.forEach(u),s=A(r),e&&e.l(r),i=f(),this.h()},h(){document.title="Join"},m(r,l){d(document.head,t),d(t,o),g(r,s,l),e&&e.m(r,l),g(r,i,l),n=!0},p(r,[l]){r[0].length!==0?e?(e.p(r,l),l&1&&_(e,1)):(e=b(r),e.c(),_(e,1),e.m(i.parentNode,i)):e&&(H(),m(e,1,1,()=>{e=null}),D())},i(r){n||(_(e),n=!0)},o(r){m(e),n=!1},d(r){u(t),r&&u(s),e&&e.d(r),r&&u(i)}}}function V(a,t,o){let s;I(a,O,e=>o(1,s=e));let i=s.query.get("room"),n=[];return M(async()=>{const r=(await v(()=>import("../chunks/peerjs.min-13412648.js").then(function(p){return p.p}),["chunks/peerjs.min-13412648.js","chunks/vendor-5dfe71dc.js"])).default;let l=new r,c=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(0,n=[c]),l.call(i,c).on("stream",p=>{n.map(h=>h.id).includes(p.id)||o(0,n=[...n,p])})}),[n]}class Q extends j{constructor(t){super();k(this,t,V,U,$,{})}}export{Q as default};

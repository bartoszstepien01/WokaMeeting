import{S as J,i as Q,s as X,e as E,k as T,t as A,c as k,a as $,d as b,n as y,g as F,b as p,N as Z,f as C,H as g,O as Ve,P as Te,h as Y,I as me,j as N,m as U,o as S,x as O,u as P,v as B,Q as j,r as ye,w as xe,K as ae,A as De,R as Ie,T as Oe,U as Pe,V as H,W as Ce,X as Ne,Y as Ue,Z as Se,_ as Be,$ as je,a0 as _e,a1 as ne,a2 as Me,D as Re,E as Ge,F as He,G as We,J as ge,a3 as ve,a4 as Ae,L as Fe}from"./vendor-d3715cf7.js";function qe(a){let e,s,l,o,h,t,n=a[2].username+"",r,d,i;return{c(){e=E("div"),s=E("video"),l=E("track"),h=T(),t=E("p"),r=A(n),this.h()},l(f){e=k(f,"DIV",{class:!0,style:!0});var u=$(e);s=k(u,"VIDEO",{class:!0});var _=$(s);l=k(_,"TRACK",{kind:!0}),_.forEach(b),h=y(u),t=k(u,"P",{class:!0});var c=$(t);r=F(c,n),c.forEach(b),u.forEach(b),this.h()},h(){p(l,"kind","captions"),s.autoplay=!0,s.muted=a[3],p(s,"class","w-full h-full rounded-xl"),p(t,"class","text-white absolute top-0 left-0 text-xl"),p(e,"class","video-container bg-gray-700 rounded-xl relative svelte-5ldje3"),Z(e,"--width",a[0]+"px"),Z(e,"--height",a[1]+"px")},m(f,u){C(f,e,u),g(e,s),g(s,l),g(e,h),g(e,t),g(t,r),d||(i=Ve(o=ze.call(null,s,a[2].stream)),d=!0)},p(f,[u]){u&8&&(s.muted=f[3]),o&&Te(o.update)&&u&4&&o.update.call(null,f[2].stream),u&4&&n!==(n=f[2].username+"")&&Y(r,n),u&1&&Z(e,"--width",f[0]+"px"),u&2&&Z(e,"--height",f[1]+"px")},i:me,o:me,d(f){f&&b(e),d=!1,i()}}}function ze(a,e){return a.srcObject=e,{destroy(){}}}function Ke(a,e,s){let{width:l}=e,{height:o}=e,{stream:h}=e,{muted:t=!1}=e;return a.$$set=n=>{"width"in n&&s(0,l=n.width),"height"in n&&s(1,o=n.height),"stream"in n&&s(2,h=n.stream),"muted"in n&&s(3,t=n.muted)},[l,o,h,t]}class Le extends J{constructor(e){super();Q(this,e,Ke,qe,X,{width:0,height:1,stream:2,muted:3})}}function be(a,e,s){const l=a.slice();return l[7]=e[s],l[9]=s,l}function pe(a){let e,s;return e=new Le({props:{width:a[2],height:a[3],stream:a[7],muted:a[9]==0}}),{c(){N(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,o){S(e,l,o),s=!0},p(l,o){const h={};o&4&&(h.width=l[2]),o&8&&(h.height=l[3]),o&1&&(h.stream=l[7]),e.$set(h)},i(l){s||(O(e.$$.fragment,l),s=!0)},o(l){P(e.$$.fragment,l),s=!1},d(l){B(e,l)}}}function Je(a){let e,s,l,o,h=a[0],t=[];for(let r=0;r<h.length;r+=1)t[r]=pe(be(a,h,r));const n=r=>P(t[r],1,1,()=>{t[r]=null});return{c(){e=E("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=k(r,"DIV",{id:!0,class:!0});var d=$(e);for(let i=0;i<t.length;i+=1)t[i].l(d);d.forEach(b),this.h()},h(){p(e,"id","gallery"),p(e,"class","flex justify-center items-center flex-wrap flex-1 px-8 py-8 gap-4")},m(r,d){C(r,e,d);for(let i=0;i<t.length;i+=1)t[i].m(e,null);a[6](e),s=!0,l||(o=j(window,"resize",a[4]),l=!0)},p(r,[d]){if(d&13){h=r[0];let i;for(i=0;i<h.length;i+=1){const f=be(r,h,i);t[i]?(t[i].p(f,d),O(t[i],1)):(t[i]=pe(f),t[i].c(),O(t[i],1),t[i].m(e,null))}for(ye(),i=h.length;i<t.length;i+=1)n(i);xe()}},i(r){if(!s){for(let d=0;d<h.length;d+=1)O(t[d]);s=!0}},o(r){t=t.filter(Boolean);for(let d=0;d<t.length;d+=1)P(t[d]);s=!1},d(r){r&&b(e),ae(t,r),a[6](null),l=!1,o()}}}function Qe(a,e,s){let{sidePanelVisible:l=!1}=e,{streams:o=[]}=e,h,t,n;function r(){const i=[16,9],f=o.length,{width:u,height:_}=Ie.largestRect(document.body.clientWidth-64-16*(f-1)-document.body.clientWidth*.2*Oe(l),document.body.clientHeight-64-64-16*(f-1),f,...i);s(2,t=u),s(3,n=_)}De(r);function d(i){Pe[i?"unshift":"push"](()=>{h=i,s(1,h)})}return a.$$set=i=>{"sidePanelVisible"in i&&s(5,l=i.sidePanelVisible),"streams"in i&&s(0,o=i.streams)},a.$$.update=()=>{a.$$.dirty&33&&r()},[o,h,t,n,r,l,d]}class rt extends J{constructor(e){super();Q(this,e,Qe,Je,X,{sidePanelVisible:5,streams:0})}}function Xe(a){let e,s,l=a[2](a[0])+"",o,h,t,n,r,d,i,f,u,_,c,m,v,w,D,I,ee,W,R,te,z,le,K,G,L,se,re;return r=new H({props:{icon:Ce,color:"#ffffff",scale:1.3}}),f=new H({props:{icon:Ne,color:"#ffffff",scale:1.3}}),c=new H({props:{icon:Ue,color:"#ffffff",scale:1.3}}),I=new H({props:{icon:Se,color:"#ffffff",scale:1.3}}),R=new H({props:{icon:Be,color:"#ffffff",scale:1.3}}),G=new H({props:{icon:je,color:"#ffffff",scale:1.2}}),{c(){e=E("div"),s=E("p"),o=A(l),h=T(),t=E("div"),n=E("button"),N(r.$$.fragment),d=T(),i=E("button"),N(f.$$.fragment),u=T(),_=E("button"),N(c.$$.fragment),m=T(),v=E("div"),w=T(),D=E("button"),N(I.$$.fragment),ee=T(),W=E("button"),N(R.$$.fragment),te=T(),z=E("div"),le=T(),K=E("button"),N(G.$$.fragment),this.h()},l(V){e=k(V,"DIV",{class:!0});var M=$(e);s=k(M,"P",{class:!0});var ie=$(s);o=F(ie,l),ie.forEach(b),h=y(M),t=k(M,"DIV",{class:!0});var x=$(t);n=k(x,"BUTTON",{});var oe=$(n);U(r.$$.fragment,oe),oe.forEach(b),d=y(x),i=k(x,"BUTTON",{});var fe=$(i);U(f.$$.fragment,fe),fe.forEach(b),u=y(x),_=k(x,"BUTTON",{class:!0});var ce=$(_);U(c.$$.fragment,ce),ce.forEach(b),m=y(x),v=k(x,"DIV",{class:!0}),$(v).forEach(b),w=y(x),D=k(x,"BUTTON",{});var ue=$(D);U(I.$$.fragment,ue),ue.forEach(b),ee=y(x),W=k(x,"BUTTON",{});var he=$(W);U(R.$$.fragment,he),he.forEach(b),te=y(x),z=k(x,"DIV",{class:!0}),$(z).forEach(b),le=y(x),K=k(x,"BUTTON",{});var de=$(K);U(G.$$.fragment,de),de.forEach(b),x.forEach(b),M.forEach(b),this.h()},h(){p(s,"class","text-white"),p(_,"class","hidden sm:block"),p(v,"class","border border-gray-500"),p(z,"class","border border-gray-500"),p(t,"class","flex ml-auto gap-5"),p(e,"class","flex w-full bg-gray-700 h-16 px-8 items-center")},m(V,M){C(V,e,M),g(e,s),g(s,o),g(e,h),g(e,t),g(t,n),S(r,n,null),g(t,d),g(t,i),S(f,i,null),g(t,u),g(t,_),S(c,_,null),g(t,m),g(t,v),g(t,w),g(t,D),S(I,D,null),g(t,ee),g(t,W),S(R,W,null),g(t,te),g(t,z),g(t,le),g(t,K),S(G,K,null),L=!0,se||(re=[j(n,"click",a[4]),j(i,"click",a[5]),j(_,"click",a[6]),j(D,"click",a[7]),j(W,"click",a[8])],se=!0)},p(V,[M]){(!L||M&1)&&l!==(l=V[2](V[0])+"")&&Y(o,l)},i(V){L||(O(r.$$.fragment,V),O(f.$$.fragment,V),O(c.$$.fragment,V),O(I.$$.fragment,V),O(R.$$.fragment,V),O(G.$$.fragment,V),L=!0)},o(V){P(r.$$.fragment,V),P(f.$$.fragment,V),P(c.$$.fragment,V),P(I.$$.fragment,V),P(R.$$.fragment,V),P(G.$$.fragment,V),L=!1},d(V){V&&b(e),B(r),B(f),B(c),B(I),B(R),B(G),se=!1,_e(re)}}}var q;(function(a){a[a.Camera=0]="Camera",a[a.Screen=1]="Screen"})(q||(q={}));function Ye(a,e,s){let l=q.Camera,{time:o=0}=e;const h=(_,c)=>String(_).padStart(c,"0"),t=_=>(~~(_/60)>=60?`${h(~~(_/3600),2)}:`:"")+`${h(~~(_/60)%60,2)}:${h(_%60,2)}`,n=ne(),r=()=>n("videoswitch"),d=()=>n("muteswitch"),i=()=>{s(1,l=l==q.Camera?q.Screen:q.Camera),n("sourceswitch",{source:l})},f=()=>n("chatswitch"),u=()=>n("membersswitch");return a.$$set=_=>{"time"in _&&s(0,o=_.time)},[o,l,t,n,r,d,i,f,u]}class it extends J{constructor(e){super();Q(this,e,Ye,Xe,X,{time:0})}}function Ze(a){let e,s,l,o,h,t,n,r,d,i,f,u;n=new H({props:{icon:Me,color:"#ffffff",scale:1.3}});const _=a[4].default,c=Re(_,a,a[3],null);return{c(){e=E("div"),s=E("div"),l=E("h1"),o=A(a[0]),h=T(),t=E("button"),N(n.$$.fragment),r=T(),c&&c.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var v=$(e);s=k(v,"DIV",{class:!0});var w=$(s);l=k(w,"H1",{class:!0});var D=$(l);o=F(D,a[0]),D.forEach(b),h=y(w),t=k(w,"BUTTON",{class:!0});var I=$(t);U(n.$$.fragment,I),I.forEach(b),w.forEach(b),r=y(v),c&&c.l(v),v.forEach(b),this.h()},h(){p(l,"class","text-3xl text-white font-semibold"),p(t,"class","block md:hidden ml-auto"),p(s,"class","flex mb-3"),p(e,"class",d=""+((a[1]?"flex":"hidden")+" flex-col w-full h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8"))},m(m,v){C(m,e,v),g(e,s),g(s,l),g(l,o),g(s,h),g(s,t),S(n,t,null),g(e,r),c&&c.m(e,null),i=!0,f||(u=j(t,"click",a[5]),f=!0)},p(m,[v]){(!i||v&1)&&Y(o,m[0]),c&&c.p&&(!i||v&8)&&Ge(c,_,m,m[3],i?We(_,m[3],v,null):He(m[3]),null),(!i||v&2&&d!==(d=""+((m[1]?"flex":"hidden")+" flex-col w-full h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8")))&&p(e,"class",d)},i(m){i||(O(n.$$.fragment,m),O(c,m),i=!0)},o(m){P(n.$$.fragment,m),P(c,m),i=!1},d(m){m&&b(e),B(n),c&&c.d(m),f=!1,u()}}}function et(a,e,s){let{$$slots:l={},$$scope:o}=e,{title:h}=e,{visible:t}=e;const n=ne(),r=()=>n("close");return a.$$set=d=>{"title"in d&&s(0,h=d.title),"visible"in d&&s(1,t=d.visible),"$$scope"in d&&s(3,o=d.$$scope)},[h,t,n,o,l,r]}class tt extends J{constructor(e){super();Q(this,e,et,Ze,X,{title:0,visible:1})}}function we(a,e,s){const l=a.slice();return l[1]=e[s],l}function Ee(a,e,s){const l=a.slice();return l[10]=e[s],l}function ke(a){let e,s,l=a[10].message+"",o,h,t;return{c(){e=E("div"),s=E("p"),o=A(l),h=T(),this.h()},l(n){e=k(n,"DIV",{class:!0});var r=$(e);s=k(r,"P",{});var d=$(s);o=F(d,l),d.forEach(b),h=y(r),r.forEach(b),this.h()},h(){p(e,"class",t="flex items-center bg-gray-600 text-white rounded-b-md "+(a[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")},m(n,r){C(n,e,r),g(e,s),g(s,o),g(e,h)},p(n,r){r&4&&l!==(l=n[10].message+"")&&Y(o,l),r&4&&t!==(t="flex items-center bg-gray-600 text-white rounded-b-md "+(n[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")&&p(e,"class",t)},d(n){n&&b(e)}}}function $e(a){let e,s,l,o,h,t,n,r=a[1][0].author+"",d,i,f,u,_=a[1],c=[];for(let m=0;m<_.length;m+=1)c[m]=ke(Ee(a,_,m));return{c(){e=E("div"),s=E("img"),h=T(),t=E("div"),n=E("p"),d=A(r),i=T();for(let m=0;m<c.length;m+=1)c[m].c();f=T(),this.h()},l(m){e=k(m,"DIV",{class:!0});var v=$(e);s=k(v,"IMG",{src:!0,alt:!0,class:!0}),h=y(v),t=k(v,"DIV",{class:!0});var w=$(t);n=k(w,"P",{class:!0});var D=$(n);d=F(D,r),D.forEach(b),i=y(w);for(let I=0;I<c.length;I+=1)c[I].l(w);w.forEach(b),f=y(v),v.forEach(b),this.h()},h(){ge(s.src,l="https://avatars.dicebear.com/api/initials/"+a[1][0].author+".svg")||p(s,"src",l),p(s,"alt",o=a[1][0].author),p(s,"class","rounded-md w-12 h-12 mt-auto"),p(n,"class","text-gray-400 text-xs"),p(t,"class","flex flex-col flex-1 gap-1"),p(e,"class",u="flex gap-2 "+(a[1][0].me?"flex-row-reverse":"flex-row"))},m(m,v){C(m,e,v),g(e,s),g(e,h),g(e,t),g(t,n),g(n,d),g(t,i);for(let w=0;w<c.length;w+=1)c[w].m(t,null);g(e,f)},p(m,v){if(v&4&&!ge(s.src,l="https://avatars.dicebear.com/api/initials/"+m[1][0].author+".svg")&&p(s,"src",l),v&4&&o!==(o=m[1][0].author)&&p(s,"alt",o),v&4&&r!==(r=m[1][0].author+"")&&Y(d,r),v&4){_=m[1];let w;for(w=0;w<_.length;w+=1){const D=Ee(m,_,w);c[w]?c[w].p(D,v):(c[w]=ke(D),c[w].c(),c[w].m(t,null))}for(;w<c.length;w+=1)c[w].d(1);c.length=_.length}v&4&&u!==(u="flex gap-2 "+(m[1][0].me?"flex-row-reverse":"flex-row"))&&p(e,"class",u)},d(m){m&&b(e),ae(c,m)}}}function lt(a){let e,s,l,o,h,t,n,r,d,i=a[2],f=[];for(let u=0;u<i.length;u+=1)f[u]=$e(we(a,i,u));return{c(){e=E("div");for(let u=0;u<f.length;u+=1)f[u].c();s=T(),l=E("form"),o=E("input"),h=T(),t=E("button"),n=A("Send"),this.h()},l(u){e=k(u,"DIV",{class:!0});var _=$(e);for(let v=0;v<f.length;v+=1)f[v].l(_);_.forEach(b),s=y(u),l=k(u,"FORM",{class:!0});var c=$(l);o=k(c,"INPUT",{type:!0,class:!0,placeholder:!0}),h=y(c),t=k(c,"BUTTON",{class:!0});var m=$(t);n=F(m,"Send"),m.forEach(b),c.forEach(b),this.h()},h(){p(e,"class","flex flex-col h-auto flex-1 gap-6"),p(o,"type","text"),p(o,"class","w-full bg-gray-700 text-white focus:outline-none h-9 px-4 rounded-md"),p(o,"placeholder","Aa"),p(t,"class","text-white bg-blue-600 px-4 rounded-md"),p(l,"class","flex gap-2")},m(u,_){C(u,e,_);for(let c=0;c<f.length;c+=1)f[c].m(e,null);C(u,s,_),C(u,l,_),g(l,o),ve(o,a[3]),g(l,h),g(l,t),g(t,n),r||(d=[j(o,"input",a[5]),j(l,"submit",Ae(a[6]))],r=!0)},p(u,_){if(_&4){i=u[2];let c;for(c=0;c<i.length;c+=1){const m=we(u,i,c);f[c]?f[c].p(m,_):(f[c]=$e(m),f[c].c(),f[c].m(e,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=i.length}_&8&&o.value!==u[3]&&ve(o,u[3])},d(u){u&&b(e),ae(f,u),u&&b(s),u&&b(l),r=!1,_e(d)}}}function st(a){let e,s;return e=new tt({props:{title:"Chat",visible:a[0],$$slots:{default:[lt]},$$scope:{ctx:a}}}),e.$on("close",a[7]),{c(){N(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,o){S(e,l,o),s=!0},p(l,[o]){const h={};o&1&&(h.visible=l[0]),o&8204&&(h.$$scope={dirty:o,ctx:l}),e.$set(h)},i(l){s||(O(e.$$.fragment,l),s=!0)},o(l){P(e.$$.fragment,l),s=!1},d(l){B(e,l)}}}function at(a,e,s){const l=ne();let{visible:o=!1}=e,{messages:h=[]}=e,t="",n=[];function r(){t=this.value,s(3,t)}const d=()=>{l("messagesend",{message:t}),s(3,t="")};function i(f){Fe.call(this,a,f)}return a.$$set=f=>{"visible"in f&&s(0,o=f.visible),"messages"in f&&s(1,h=f.messages)},a.$$.update=()=>{if(a.$$.dirty&6){let f=[];s(2,n=[]),h.forEach(u=>{if(f.length==0||f[f.length-1]!=u.id){f.push(u.id),n.push([u]);return}n[n.length-1].push(u)}),s(2,n=[...n])}},[o,h,n,t,l,r,d,i]}class ot extends J{constructor(e){super();Q(this,e,at,st,X,{visible:0,messages:1})}}export{ot as C,rt as G,it as N,tt as P,q as S};

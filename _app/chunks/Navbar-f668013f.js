import{S as Y,i as Z,s as J,e as v,k as y,t as fe,c as b,a as p,d as g,n as T,g as ce,b as w,L as A,f as ee,H as d,M as ge,N as _e,h as ue,I as de,j as N,m as I,o as U,x as k,u as V,v as j,O as G,r as ve,w as be,P as pe,A as we,Q as $e,R as Ee,T as B,U as ke,V as ye,W as Te,X as Ve,Y as Oe,Z as Se,_ as Ce,$ as De}from"./vendor-fab53af6.js";function Ne(r){let e,a,n,u,c,t,f=r[2].username+"",s,i,l;return{c(){e=v("div"),a=v("video"),n=v("track"),c=y(),t=v("p"),s=fe(f),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0});var m=p(e);a=b(m,"VIDEO",{class:!0});var $=p(a);n=b($,"TRACK",{kind:!0}),$.forEach(g),c=T(m),t=b(m,"P",{class:!0});var E=p(t);s=ce(E,f),E.forEach(g),m.forEach(g),this.h()},h(){w(n,"kind","captions"),a.autoplay=!0,a.muted=r[3],w(a,"class","w-full h-full rounded-xl"),w(t,"class","text-white absolute top-0 left-0 text-xl"),w(e,"class","video-container bg-gray-700 rounded-xl relative svelte-5ldje3"),A(e,"--width",r[0]+"px"),A(e,"--height",r[1]+"px")},m(o,m){ee(o,e,m),d(e,a),d(a,n),d(e,c),d(e,t),d(t,s),i||(l=ge(u=Ie.call(null,a,r[2].stream)),i=!0)},p(o,[m]){m&8&&(a.muted=o[3]),u&&_e(u.update)&&m&4&&u.update.call(null,o[2].stream),m&4&&f!==(f=o[2].username+"")&&ue(s,f),m&1&&A(e,"--width",o[0]+"px"),m&2&&A(e,"--height",o[1]+"px")},i:de,o:de,d(o){o&&g(e),i=!1,l()}}}function Ie(r,e){return r.srcObject=e,{destroy(){}}}function Ue(r,e,a){let{width:n}=e,{height:u}=e,{stream:c}=e,{muted:t=!1}=e;return r.$$set=f=>{"width"in f&&a(0,n=f.width),"height"in f&&a(1,u=f.height),"stream"in f&&a(2,c=f.stream),"muted"in f&&a(3,t=f.muted)},[n,u,c,t]}class je extends Y{constructor(e){super();Z(this,e,Ue,Ne,J,{width:0,height:1,stream:2,muted:3})}}function he(r,e,a){const n=r.slice();return n[6]=e[a],n[8]=a,n}function me(r){let e,a;return e=new je({props:{width:r[2],height:r[3],stream:r[6],muted:r[8]==0}}),{c(){N(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,u){U(e,n,u),a=!0},p(n,u){const c={};u&4&&(c.width=n[2]),u&8&&(c.height=n[3]),u&1&&(c.stream=n[6]),e.$set(c)},i(n){a||(k(e.$$.fragment,n),a=!0)},o(n){V(e.$$.fragment,n),a=!1},d(n){j(e,n)}}}function Be(r){let e,a,n,u,c=r[0],t=[];for(let s=0;s<c.length;s+=1)t[s]=me(he(r,c,s));const f=s=>V(t[s],1,1,()=>{t[s]=null});return{c(){e=v("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=b(s,"DIV",{id:!0,class:!0});var i=p(e);for(let l=0;l<t.length;l+=1)t[l].l(i);i.forEach(g),this.h()},h(){w(e,"id","gallery"),w(e,"class","flex justify-center items-center flex-wrap w-full h-full px-8 py-8 gap-4")},m(s,i){ee(s,e,i);for(let l=0;l<t.length;l+=1)t[l].m(e,null);r[5](e),a=!0,n||(u=G(window,"resize",r[4]),n=!0)},p(s,[i]){if(i&13){c=s[0];let l;for(l=0;l<c.length;l+=1){const o=he(s,c,l);t[l]?(t[l].p(o,i),k(t[l],1)):(t[l]=me(o),t[l].c(),k(t[l],1),t[l].m(e,null))}for(ve(),l=c.length;l<t.length;l+=1)f(l);be()}},i(s){if(!a){for(let i=0;i<c.length;i+=1)k(t[i]);a=!0}},o(s){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)V(t[i]);a=!1},d(s){s&&g(e),pe(t,s),r[5](null),n=!1,u()}}}function Pe(r,e,a){let{streams:n=[]}=e,u,c,t;function f(){const i=[16,9],l=n.length,{width:o,height:m}=$e.largestRect(document.body.clientWidth-64-16*(l-1),document.body.clientHeight-64-64-16*(l-1),l,...i);a(2,c=o),a(3,t=m)}we(f);function s(i){Ee[i?"unshift":"push"](()=>{u=i,a(1,u)})}return r.$$set=i=>{"streams"in i&&a(0,n=i.streams)},r.$$.update=()=>{r.$$.dirty&1&&f()},[n,u,c,t,f,s]}class Me extends Y{constructor(e){super();Z(this,e,Pe,Be,J,{streams:0})}}function Re(r){let e,a,n=r[2](r[1])+"",u,c,t,f,s,i,l,o,m,$,E,L,R,q,x,S,F,H,C,K,M,Q,W,D,z,X,te;return s=new B({props:{icon:ke,color:"#ffffff",scale:1.3}}),o=new B({props:{icon:ye,color:"#ffffff",scale:1.3}}),E=new B({props:{icon:Te,color:"#ffffff",scale:1.3}}),S=new B({props:{icon:Ve,color:"#ffffff",scale:1.3}}),C=new B({props:{icon:Oe,color:"#ffffff",scale:1.3}}),D=new B({props:{icon:Se,color:"#ffffff",scale:1.2}}),{c(){e=v("div"),a=v("p"),u=fe(n),c=y(),t=v("div"),f=v("button"),N(s.$$.fragment),i=y(),l=v("button"),N(o.$$.fragment),m=y(),$=v("button"),N(E.$$.fragment),L=y(),R=v("div"),q=y(),x=v("button"),N(S.$$.fragment),F=y(),H=v("button"),N(C.$$.fragment),K=y(),M=v("div"),Q=y(),W=v("button"),N(D.$$.fragment),this.h()},l(h){e=b(h,"DIV",{class:!0});var O=p(e);a=b(O,"P",{class:!0});var ne=p(a);u=ce(ne,n),ne.forEach(g),c=T(O),t=b(O,"DIV",{class:!0});var _=p(t);f=b(_,"BUTTON",{});var ae=p(f);I(s.$$.fragment,ae),ae.forEach(g),i=T(_),l=b(_,"BUTTON",{});var re=p(l);I(o.$$.fragment,re),re.forEach(g),m=T(_),$=b(_,"BUTTON",{class:!0});var se=p($);I(E.$$.fragment,se),se.forEach(g),L=T(_),R=b(_,"DIV",{class:!0}),p(R).forEach(g),q=T(_),x=b(_,"BUTTON",{});var le=p(x);I(S.$$.fragment,le),le.forEach(g),F=T(_),H=b(_,"BUTTON",{});var oe=p(H);I(C.$$.fragment,oe),oe.forEach(g),K=T(_),M=b(_,"DIV",{class:!0}),p(M).forEach(g),Q=T(_),W=b(_,"BUTTON",{});var ie=p(W);I(D.$$.fragment,ie),ie.forEach(g),_.forEach(g),O.forEach(g),this.h()},h(){w(a,"class","text-white"),w($,"class","hidden sm:block"),w(R,"class","border border-gray-500"),w(M,"class","border border-gray-500"),w(t,"class","flex ml-auto gap-5"),w(e,"class","flex w-full bg-gray-700 h-16 px-8 items-center")},m(h,O){ee(h,e,O),d(e,a),d(a,u),d(e,c),d(e,t),d(t,f),U(s,f,null),d(t,i),d(t,l),U(o,l,null),d(t,m),d(t,$),U(E,$,null),d(t,L),d(t,R),d(t,q),d(t,x),U(S,x,null),d(t,F),d(t,H),U(C,H,null),d(t,K),d(t,M),d(t,Q),d(t,W),U(D,W,null),z=!0,X||(te=[G(f,"click",r[4]),G(l,"click",r[5]),G($,"click",r[6])],X=!0)},p(h,[O]){(!z||O&2)&&n!==(n=h[2](h[1])+"")&&ue(u,n)},i(h){z||(k(s.$$.fragment,h),k(o.$$.fragment,h),k(E.$$.fragment,h),k(S.$$.fragment,h),k(C.$$.fragment,h),k(D.$$.fragment,h),z=!0)},o(h){V(s.$$.fragment,h),V(o.$$.fragment,h),V(E.$$.fragment,h),V(S.$$.fragment,h),V(C.$$.fragment,h),V(D.$$.fragment,h),z=!1},d(h){h&&g(e),j(s),j(o),j(E),j(S),j(C),j(D),X=!1,Ce(te)}}}var P;(function(r){r[r.Camera=0]="Camera",r[r.Screen=1]="Screen"})(P||(P={}));function xe(r,e,a){let{currentSource:n=P.Camera}=e,{time:u=0}=e;const c=(o,m)=>String(o).padStart(m,"0"),t=o=>(~~(o/60)>=60?`${c(~~(o/3600),2)}:`:"")+`${c(~~(o/60)%60,2)}:${c(o%60,2)}`,f=De(),s=()=>f("videoswitch"),i=()=>f("muteswitch"),l=()=>{a(0,n=n==P.Camera?P.Screen:P.Camera),f("sourceswitch",{source:n})};return r.$$set=o=>{"currentSource"in o&&a(0,n=o.currentSource),"time"in o&&a(1,u=o.time)},[n,u,t,f,s,i,l]}class We extends Y{constructor(e){super();Z(this,e,xe,Re,J,{currentSource:0,time:1})}}export{Me as G,We as N,P as S};

import{S as Y,i as Z,s as Q,e as v,k as E,t as fe,c as b,a as p,d as g,n as V,g as ce,b as $,R as G,f as ee,H as h,T as ge,U as _e,h as ue,I as de,j as N,m as S,o as U,x as y,u as T,v as j,L as A,r as ve,w as be,O as pe,A as we,V as $e,W as ke,X as ye,J as P,Y as Ee,Z as Ve,_ as Te,$ as Oe,a0 as Ce,a1 as De,a2 as Ie,M as Ne}from"./vendor-f5d27702.js";function Se(r){let e,n,s,f,o,t,i=r[2].username+"",l,d,a;return{c(){e=v("div"),n=v("video"),s=v("track"),o=E(),t=v("p"),l=fe(i),this.h()},l(c){e=b(c,"DIV",{class:!0,style:!0});var u=p(e);n=b(u,"VIDEO",{class:!0});var w=p(n);s=b(w,"TRACK",{kind:!0}),w.forEach(g),o=V(u),t=b(u,"P",{class:!0});var k=p(t);l=ce(k,i),k.forEach(g),u.forEach(g),this.h()},h(){$(s,"kind","captions"),n.autoplay=!0,n.muted=r[3],$(n,"class","w-full h-full rounded-xl"),$(t,"class","text-white absolute top-0 left-0 text-xl"),$(e,"class","video-container bg-gray-700 rounded-xl relative svelte-5ldje3"),G(e,"--width",r[0]+"px"),G(e,"--height",r[1]+"px")},m(c,u){ee(c,e,u),h(e,n),h(n,s),h(e,o),h(e,t),h(t,l),d||(a=ge(f=Ue.call(null,n,r[2].stream)),d=!0)},p(c,[u]){u&8&&(n.muted=c[3]),f&&_e(f.update)&&u&4&&f.update.call(null,c[2].stream),u&4&&i!==(i=c[2].username+"")&&ue(l,i),u&1&&G(e,"--width",c[0]+"px"),u&2&&G(e,"--height",c[1]+"px")},i:de,o:de,d(c){c&&g(e),d=!1,a()}}}function Ue(r,e){return r.srcObject=e,{destroy(){}}}function je(r,e,n){let{width:s}=e,{height:f}=e,{stream:o}=e,{muted:t=!1}=e;return r.$$set=i=>{"width"in i&&n(0,s=i.width),"height"in i&&n(1,f=i.height),"stream"in i&&n(2,o=i.stream),"muted"in i&&n(3,t=i.muted)},[s,f,o,t]}class Be extends Y{constructor(e){super();Z(this,e,je,Se,Q,{width:0,height:1,stream:2,muted:3})}}function he(r,e,n){const s=r.slice();return s[7]=e[n],s[9]=n,s}function me(r){let e,n;return e=new Be({props:{width:r[2],height:r[3],stream:r[7],muted:r[9]==0}}),{c(){N(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,f){U(e,s,f),n=!0},p(s,f){const o={};f&4&&(o.width=s[2]),f&8&&(o.height=s[3]),f&1&&(o.stream=s[7]),e.$set(o)},i(s){n||(y(e.$$.fragment,s),n=!0)},o(s){T(e.$$.fragment,s),n=!1},d(s){j(e,s)}}}function Pe(r){let e,n,s,f,o=r[0],t=[];for(let l=0;l<o.length;l+=1)t[l]=me(he(r,o,l));const i=l=>T(t[l],1,1,()=>{t[l]=null});return{c(){e=v("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=b(l,"DIV",{id:!0,class:!0});var d=p(e);for(let a=0;a<t.length;a+=1)t[a].l(d);d.forEach(g),this.h()},h(){$(e,"id","gallery"),$(e,"class","flex justify-center items-center flex-wrap flex-1 px-8 py-8 gap-4")},m(l,d){ee(l,e,d);for(let a=0;a<t.length;a+=1)t[a].m(e,null);r[6](e),n=!0,s||(f=A(window,"resize",r[4]),s=!0)},p(l,[d]){if(d&13){o=l[0];let a;for(a=0;a<o.length;a+=1){const c=he(l,o,a);t[a]?(t[a].p(c,d),y(t[a],1)):(t[a]=me(c),t[a].c(),y(t[a],1),t[a].m(e,null))}for(ve(),a=o.length;a<t.length;a+=1)i(a);be()}},i(l){if(!n){for(let d=0;d<o.length;d+=1)y(t[d]);n=!0}},o(l){t=t.filter(Boolean);for(let d=0;d<t.length;d+=1)T(t[d]);n=!1},d(l){l&&g(e),pe(t,l),r[6](null),s=!1,f()}}}function Re(r,e,n){let{sidePanelVisible:s=!1}=e,{streams:f=[]}=e,o,t,i;function l(){const a=[16,9],c=f.length,{width:u,height:w}=$e.largestRect(document.body.clientWidth-64-16*(c-1)-document.body.clientWidth*.2*ke(s),document.body.clientHeight-64-64-16*(c-1),c,...a);n(2,t=u),n(3,i=w)}we(l);function d(a){ye[a?"unshift":"push"](()=>{o=a,n(1,o)})}return r.$$set=a=>{"sidePanelVisible"in a&&n(5,s=a.sidePanelVisible),"streams"in a&&n(0,f=a.streams)},r.$$.update=()=>{r.$$.dirty&33&&l()},[f,o,t,i,l,s,d]}class Me extends Y{constructor(e){super();Z(this,e,Re,Pe,Q,{sidePanelVisible:5,streams:0})}}function We(r){let e,n,s=r[2](r[0])+"",f,o,t,i,l,d,a,c,u,w,k,L,W,q,B,C,F,x,D,J,H,K,M,I,z,X,te;return l=new P({props:{icon:Ee,color:"#ffffff",scale:1.3}}),c=new P({props:{icon:Ve,color:"#ffffff",scale:1.3}}),k=new P({props:{icon:Te,color:"#ffffff",scale:1.3}}),C=new P({props:{icon:Oe,color:"#ffffff",scale:1.3}}),D=new P({props:{icon:Ce,color:"#ffffff",scale:1.3}}),I=new P({props:{icon:De,color:"#ffffff",scale:1.2}}),{c(){e=v("div"),n=v("p"),f=fe(s),o=E(),t=v("div"),i=v("button"),N(l.$$.fragment),d=E(),a=v("button"),N(c.$$.fragment),u=E(),w=v("button"),N(k.$$.fragment),L=E(),W=v("div"),q=E(),B=v("button"),N(C.$$.fragment),F=E(),x=v("button"),N(D.$$.fragment),J=E(),H=v("div"),K=E(),M=v("button"),N(I.$$.fragment),this.h()},l(m){e=b(m,"DIV",{class:!0});var O=p(e);n=b(O,"P",{class:!0});var ae=p(n);f=ce(ae,s),ae.forEach(g),o=V(O),t=b(O,"DIV",{class:!0});var _=p(t);i=b(_,"BUTTON",{});var ne=p(i);S(l.$$.fragment,ne),ne.forEach(g),d=V(_),a=b(_,"BUTTON",{});var se=p(a);S(c.$$.fragment,se),se.forEach(g),u=V(_),w=b(_,"BUTTON",{class:!0});var re=p(w);S(k.$$.fragment,re),re.forEach(g),L=V(_),W=b(_,"DIV",{class:!0}),p(W).forEach(g),q=V(_),B=b(_,"BUTTON",{});var le=p(B);S(C.$$.fragment,le),le.forEach(g),F=V(_),x=b(_,"BUTTON",{});var ie=p(x);S(D.$$.fragment,ie),ie.forEach(g),J=V(_),H=b(_,"DIV",{class:!0}),p(H).forEach(g),K=V(_),M=b(_,"BUTTON",{});var oe=p(M);S(I.$$.fragment,oe),oe.forEach(g),_.forEach(g),O.forEach(g),this.h()},h(){$(n,"class","text-white"),$(w,"class","hidden sm:block"),$(W,"class","border border-gray-500"),$(H,"class","border border-gray-500"),$(t,"class","flex ml-auto gap-5"),$(e,"class","flex w-full bg-gray-700 h-16 px-8 items-center")},m(m,O){ee(m,e,O),h(e,n),h(n,f),h(e,o),h(e,t),h(t,i),U(l,i,null),h(t,d),h(t,a),U(c,a,null),h(t,u),h(t,w),U(k,w,null),h(t,L),h(t,W),h(t,q),h(t,B),U(C,B,null),h(t,F),h(t,x),U(D,x,null),h(t,J),h(t,H),h(t,K),h(t,M),U(I,M,null),z=!0,X||(te=[A(i,"click",r[4]),A(a,"click",r[5]),A(w,"click",r[6]),A(B,"click",r[7])],X=!0)},p(m,[O]){(!z||O&1)&&s!==(s=m[2](m[0])+"")&&ue(f,s)},i(m){z||(y(l.$$.fragment,m),y(c.$$.fragment,m),y(k.$$.fragment,m),y(C.$$.fragment,m),y(D.$$.fragment,m),y(I.$$.fragment,m),z=!0)},o(m){T(l.$$.fragment,m),T(c.$$.fragment,m),T(k.$$.fragment,m),T(C.$$.fragment,m),T(D.$$.fragment,m),T(I.$$.fragment,m),z=!1},d(m){m&&g(e),j(l),j(c),j(k),j(C),j(D),j(I),X=!1,Ie(te)}}}var R;(function(r){r[r.Camera=0]="Camera",r[r.Screen=1]="Screen"})(R||(R={}));function xe(r,e,n){let s=R.Camera,{time:f=0}=e;const o=(u,w)=>String(u).padStart(w,"0"),t=u=>(~~(u/60)>=60?`${o(~~(u/3600),2)}:`:"")+`${o(~~(u/60)%60,2)}:${o(u%60,2)}`,i=Ne(),l=()=>i("videoswitch"),d=()=>i("muteswitch"),a=()=>{n(1,s=s==R.Camera?R.Screen:R.Camera),i("sourceswitch",{source:s})},c=()=>i("chatswitch");return r.$$set=u=>{"time"in u&&n(0,f=u.time)},[f,s,t,i,l,d,a,c]}class ze extends Y{constructor(e){super();Z(this,e,xe,We,Q,{time:0})}}export{Me as G,ze as N,R as S};

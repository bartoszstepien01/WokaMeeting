import{S as q,i as z,s as K,e as w,k as T,t as A,c as $,a as k,d as b,n as I,g as H,b as v,K as J,f as C,H as _,L as xe,M as ye,h as L,I as _e,j as N,m as M,o as S,x as O,u as P,v as U,N as B,r as Oe,w as Pe,O as ee,A as Ce,P as Ne,Q as Me,R as Se,T as W,U as Ue,V as Be,W as je,X as Ge,Y as Re,Z as Ae,_ as ge,$ as re,a0 as He,D as We,E as Fe,F as qe,G as ze,a1 as te,a2 as ve,a3 as Ke,a4 as be}from"./vendor-d517c024.js";function Le(a){let e,s,t,n,c,l,r=a[2].username+"",f,d,i;return{c(){e=w("div"),s=w("video"),t=w("track"),c=T(),l=w("p"),f=A(r),this.h()},l(o){e=$(o,"DIV",{class:!0,style:!0});var h=k(e);s=$(h,"VIDEO",{class:!0});var g=k(s);t=$(g,"TRACK",{kind:!0}),g.forEach(b),c=I(h),l=$(h,"P",{class:!0});var u=k(l);f=H(u,r),u.forEach(b),h.forEach(b),this.h()},h(){v(t,"kind","captions"),s.autoplay=!0,s.muted=a[3],v(s,"class","w-full h-full rounded-xl"),v(l,"class","text-white absolute top-0 left-0 text-xl"),v(e,"class","video-container bg-gray-700 rounded-xl relative svelte-5ldje3"),J(e,"--width",a[0]+"px"),J(e,"--height",a[1]+"px")},m(o,h){C(o,e,h),_(e,s),_(s,t),_(e,c),_(e,l),_(l,f),d||(i=xe(n=Qe.call(null,s,a[2].stream)),d=!0)},p(o,[h]){h&8&&(s.muted=o[3]),n&&ye(n.update)&&h&4&&n.update.call(null,o[2].stream),h&4&&r!==(r=o[2].username+"")&&L(f,r),h&1&&J(e,"--width",o[0]+"px"),h&2&&J(e,"--height",o[1]+"px")},i:_e,o:_e,d(o){o&&b(e),d=!1,i()}}}function Qe(a,e){return a.srcObject=e,{destroy(){}}}function Xe(a,e,s){let{width:t}=e,{height:n}=e,{stream:c}=e,{muted:l=!1}=e;return a.$$set=r=>{"width"in r&&s(0,t=r.width),"height"in r&&s(1,n=r.height),"stream"in r&&s(2,c=r.stream),"muted"in r&&s(3,l=r.muted)},[t,n,c,l]}class Ye extends q{constructor(e){super();z(this,e,Xe,Le,K,{width:0,height:1,stream:2,muted:3})}}function pe(a,e,s){const t=a.slice();return t[7]=e[s],t[9]=s,t}function we(a){let e,s;return e=new Ye({props:{width:a[2],height:a[3],stream:a[7],muted:a[9]==0}}),{c(){N(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,n){S(e,t,n),s=!0},p(t,n){const c={};n&4&&(c.width=t[2]),n&8&&(c.height=t[3]),n&1&&(c.stream=t[7]),e.$set(c)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){P(e.$$.fragment,t),s=!1},d(t){U(e,t)}}}function Ze(a){let e,s,t,n,c=a[0],l=[];for(let f=0;f<c.length;f+=1)l[f]=we(pe(a,c,f));const r=f=>P(l[f],1,1,()=>{l[f]=null});return{c(){e=w("div");for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){e=$(f,"DIV",{id:!0,class:!0});var d=k(e);for(let i=0;i<l.length;i+=1)l[i].l(d);d.forEach(b),this.h()},h(){v(e,"id","gallery"),v(e,"class","flex justify-center items-center flex-wrap flex-1 px-8 py-8 gap-4")},m(f,d){C(f,e,d);for(let i=0;i<l.length;i+=1)l[i].m(e,null);a[6](e),s=!0,t||(n=B(window,"resize",a[4]),t=!0)},p(f,[d]){if(d&13){c=f[0];let i;for(i=0;i<c.length;i+=1){const o=pe(f,c,i);l[i]?(l[i].p(o,d),O(l[i],1)):(l[i]=we(o),l[i].c(),O(l[i],1),l[i].m(e,null))}for(Oe(),i=c.length;i<l.length;i+=1)r(i);Pe()}},i(f){if(!s){for(let d=0;d<c.length;d+=1)O(l[d]);s=!0}},o(f){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)P(l[d]);s=!1},d(f){f&&b(e),ee(l,f),a[6](null),t=!1,n()}}}function Je(a,e,s){let{sidePanelVisible:t=!1}=e,{streams:n=[]}=e,c,l,r;function f(){const i=[16,9],o=n.length,{width:h,height:g}=Ne.largestRect(document.body.clientWidth-64-16*(o-1)-document.body.clientWidth*.25*Me(t),document.body.clientHeight-64-64-16*(o-1),o,...i);s(2,l=h),s(3,r=g)}Ce(f);function d(i){Se[i?"unshift":"push"](()=>{c=i,s(1,c)})}return a.$$set=i=>{"sidePanelVisible"in i&&s(5,t=i.sidePanelVisible),"streams"in i&&s(0,n=i.streams)},a.$$.update=()=>{a.$$.dirty&33&&f()},[n,c,l,r,f,t,d]}class ut extends q{constructor(e){super();z(this,e,Je,Ze,K,{sidePanelVisible:5,streams:0})}}function et(a){let e,s,t=a[2](a[0])+"",n,c,l,r,f,d,i,o,h,g,u,m,p,E,x,y,le,F,G,se,X,ae,Y,R,Z,ne,ie;return f=new W({props:{icon:Ue,color:"#ffffff",scale:1.3}}),o=new W({props:{icon:Be,color:"#ffffff",scale:1.3}}),u=new W({props:{icon:je,color:"#ffffff",scale:1.3}}),y=new W({props:{icon:Ge,color:"#ffffff",scale:1.3}}),G=new W({props:{icon:Re,color:"#ffffff",scale:1.3}}),R=new W({props:{icon:Ae,color:"#ffffff",scale:1.2}}),{c(){e=w("div"),s=w("p"),n=A(t),c=T(),l=w("div"),r=w("button"),N(f.$$.fragment),d=T(),i=w("button"),N(o.$$.fragment),h=T(),g=w("button"),N(u.$$.fragment),m=T(),p=w("div"),E=T(),x=w("button"),N(y.$$.fragment),le=T(),F=w("button"),N(G.$$.fragment),se=T(),X=w("div"),ae=T(),Y=w("button"),N(R.$$.fragment),this.h()},l(V){e=$(V,"DIV",{class:!0});var j=k(e);s=$(j,"P",{class:!0});var oe=k(s);n=H(oe,t),oe.forEach(b),c=I(j),l=$(j,"DIV",{class:!0});var D=k(l);r=$(D,"BUTTON",{});var ce=k(r);M(f.$$.fragment,ce),ce.forEach(b),d=I(D),i=$(D,"BUTTON",{});var fe=k(i);M(o.$$.fragment,fe),fe.forEach(b),h=I(D),g=$(D,"BUTTON",{class:!0});var ue=k(g);M(u.$$.fragment,ue),ue.forEach(b),m=I(D),p=$(D,"DIV",{class:!0}),k(p).forEach(b),E=I(D),x=$(D,"BUTTON",{});var he=k(x);M(y.$$.fragment,he),he.forEach(b),le=I(D),F=$(D,"BUTTON",{});var de=k(F);M(G.$$.fragment,de),de.forEach(b),se=I(D),X=$(D,"DIV",{class:!0}),k(X).forEach(b),ae=I(D),Y=$(D,"BUTTON",{});var me=k(Y);M(R.$$.fragment,me),me.forEach(b),D.forEach(b),j.forEach(b),this.h()},h(){v(s,"class","text-white"),v(g,"class","hidden sm:block"),v(p,"class","border border-gray-500"),v(X,"class","border border-gray-500"),v(l,"class","flex ml-auto gap-5"),v(e,"class","flex w-full bg-gray-700 h-16 px-8 items-center")},m(V,j){C(V,e,j),_(e,s),_(s,n),_(e,c),_(e,l),_(l,r),S(f,r,null),_(l,d),_(l,i),S(o,i,null),_(l,h),_(l,g),S(u,g,null),_(l,m),_(l,p),_(l,E),_(l,x),S(y,x,null),_(l,le),_(l,F),S(G,F,null),_(l,se),_(l,X),_(l,ae),_(l,Y),S(R,Y,null),Z=!0,ne||(ie=[B(r,"click",a[4]),B(i,"click",a[5]),B(g,"click",a[6]),B(x,"click",a[7]),B(F,"click",a[8])],ne=!0)},p(V,[j]){(!Z||j&1)&&t!==(t=V[2](V[0])+"")&&L(n,t)},i(V){Z||(O(f.$$.fragment,V),O(o.$$.fragment,V),O(u.$$.fragment,V),O(y.$$.fragment,V),O(G.$$.fragment,V),O(R.$$.fragment,V),Z=!0)},o(V){P(f.$$.fragment,V),P(o.$$.fragment,V),P(u.$$.fragment,V),P(y.$$.fragment,V),P(G.$$.fragment,V),P(R.$$.fragment,V),Z=!1},d(V){V&&b(e),U(f),U(o),U(u),U(y),U(G),U(R),ne=!1,ge(ie)}}}var Q;(function(a){a[a.Camera=0]="Camera",a[a.Screen=1]="Screen"})(Q||(Q={}));function tt(a,e,s){let t=Q.Camera,{time:n=0}=e;const c=(g,u)=>String(g).padStart(u,"0"),l=g=>(~~(g/60)>=60?`${c(~~(g/3600),2)}:`:"")+`${c(~~(g/60)%60,2)}:${c(g%60,2)}`,r=re(),f=()=>r("videoswitch"),d=()=>r("muteswitch"),i=()=>{s(1,t=t==Q.Camera?Q.Screen:Q.Camera),r("sourceswitch",{source:t})},o=()=>r("chatswitch"),h=()=>r("membersswitch");return a.$$set=g=>{"time"in g&&s(0,n=g.time)},[n,t,l,r,f,d,i,o,h]}class ht extends q{constructor(e){super();z(this,e,tt,et,K,{time:0})}}function lt(a){let e,s,t,n,c,l,r,f,d,i,o,h;r=new W({props:{icon:He,color:"#ffffff",scale:1.3}});const g=a[4].default,u=We(g,a,a[3],null);return{c(){e=w("div"),s=w("div"),t=w("h1"),n=A(a[0]),c=T(),l=w("button"),N(r.$$.fragment),f=T(),u&&u.c(),this.h()},l(m){e=$(m,"DIV",{class:!0});var p=k(e);s=$(p,"DIV",{class:!0});var E=k(s);t=$(E,"H1",{class:!0});var x=k(t);n=H(x,a[0]),x.forEach(b),c=I(E),l=$(E,"BUTTON",{class:!0});var y=k(l);M(r.$$.fragment,y),y.forEach(b),E.forEach(b),f=I(p),u&&u.l(p),p.forEach(b),this.h()},h(){v(t,"class","text-3xl text-white font-semibold"),v(l,"class","block md:hidden ml-auto"),v(s,"class","flex mb-3"),v(e,"class",d=""+((a[1]?"flex":"hidden")+" flex-col w-full md:w-[25vw] h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8"))},m(m,p){C(m,e,p),_(e,s),_(s,t),_(t,n),_(s,c),_(s,l),S(r,l,null),_(e,f),u&&u.m(e,null),i=!0,o||(h=B(l,"click",a[5]),o=!0)},p(m,[p]){(!i||p&1)&&L(n,m[0]),u&&u.p&&(!i||p&8)&&Fe(u,g,m,m[3],i?ze(g,m[3],p,null):qe(m[3]),null),(!i||p&2&&d!==(d=""+((m[1]?"flex":"hidden")+" flex-col w-full md:w-[25vw] h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8")))&&v(e,"class",d)},i(m){i||(O(r.$$.fragment,m),O(u,m),i=!0)},o(m){P(r.$$.fragment,m),P(u,m),i=!1},d(m){m&&b(e),U(r),u&&u.d(m),o=!1,h()}}}function st(a,e,s){let{$$slots:t={},$$scope:n}=e,{title:c}=e,{visible:l}=e;const r=re(),f=()=>r("close");return a.$$set=d=>{"title"in d&&s(0,c=d.title),"visible"in d&&s(1,l=d.visible),"$$scope"in d&&s(3,n=d.$$scope)},[c,l,r,n,t,f]}class $e extends q{constructor(e){super();z(this,e,st,lt,K,{title:0,visible:1})}}function Ee(a,e,s){const t=a.slice();return t[1]=e[s],t}function ke(a,e,s){const t=a.slice();return t[10]=e[s],t}function Ve(a){let e,s,t=a[10].message+"",n,c,l;return{c(){e=w("div"),s=w("p"),n=A(t),c=T(),this.h()},l(r){e=$(r,"DIV",{class:!0});var f=k(e);s=$(f,"P",{});var d=k(s);n=H(d,t),d.forEach(b),c=I(f),f.forEach(b),this.h()},h(){v(e,"class",l="flex items-center bg-gray-600 text-white rounded-b-md "+(a[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")},m(r,f){C(r,e,f),_(e,s),_(s,n),_(e,c)},p(r,f){f&4&&t!==(t=r[10].message+"")&&L(n,t),f&4&&l!==(l="flex items-center bg-gray-600 text-white rounded-b-md "+(r[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")&&v(e,"class",l)},d(r){r&&b(e)}}}function Te(a){let e,s,t,n,c,l,r,f=a[1][0].author+"",d,i,o,h,g=a[1],u=[];for(let m=0;m<g.length;m+=1)u[m]=Ve(ke(a,g,m));return{c(){e=w("div"),s=w("img"),c=T(),l=w("div"),r=w("p"),d=A(f),i=T();for(let m=0;m<u.length;m+=1)u[m].c();o=T(),this.h()},l(m){e=$(m,"DIV",{class:!0});var p=k(e);s=$(p,"IMG",{src:!0,alt:!0,class:!0}),c=I(p),l=$(p,"DIV",{class:!0});var E=k(l);r=$(E,"P",{class:!0});var x=k(r);d=H(x,f),x.forEach(b),i=I(E);for(let y=0;y<u.length;y+=1)u[y].l(E);E.forEach(b),o=I(p),p.forEach(b),this.h()},h(){te(s.src,t="https://avatars.dicebear.com/api/initials/"+a[1][0].author+".svg")||v(s,"src",t),v(s,"alt",n=a[1][0].author),v(s,"class","rounded-md w-12 h-12 mt-auto"),v(r,"class","text-gray-400 text-xs"),v(l,"class","flex flex-col flex-1 gap-1"),v(e,"class",h="flex gap-2 "+(a[1][0].me?"flex-row-reverse":"flex-row"))},m(m,p){C(m,e,p),_(e,s),_(e,c),_(e,l),_(l,r),_(r,d),_(l,i);for(let E=0;E<u.length;E+=1)u[E].m(l,null);_(e,o)},p(m,p){if(p&4&&!te(s.src,t="https://avatars.dicebear.com/api/initials/"+m[1][0].author+".svg")&&v(s,"src",t),p&4&&n!==(n=m[1][0].author)&&v(s,"alt",n),p&4&&f!==(f=m[1][0].author+"")&&L(d,f),p&4){g=m[1];let E;for(E=0;E<g.length;E+=1){const x=ke(m,g,E);u[E]?u[E].p(x,p):(u[E]=Ve(x),u[E].c(),u[E].m(l,null))}for(;E<u.length;E+=1)u[E].d(1);u.length=g.length}p&4&&h!==(h="flex gap-2 "+(m[1][0].me?"flex-row-reverse":"flex-row"))&&v(e,"class",h)},d(m){m&&b(e),ee(u,m)}}}function at(a){let e,s,t,n,c,l,r,f,d,i=a[2],o=[];for(let h=0;h<i.length;h+=1)o[h]=Te(Ee(a,i,h));return{c(){e=w("div");for(let h=0;h<o.length;h+=1)o[h].c();s=T(),t=w("form"),n=w("input"),c=T(),l=w("button"),r=A("Send"),this.h()},l(h){e=$(h,"DIV",{class:!0});var g=k(e);for(let p=0;p<o.length;p+=1)o[p].l(g);g.forEach(b),s=I(h),t=$(h,"FORM",{class:!0});var u=k(t);n=$(u,"INPUT",{type:!0,class:!0,placeholder:!0}),c=I(u),l=$(u,"BUTTON",{class:!0});var m=k(l);r=H(m,"Send"),m.forEach(b),u.forEach(b),this.h()},h(){v(e,"class","flex flex-col h-auto flex-1 gap-6"),v(n,"type","text"),v(n,"class","w-full bg-gray-700 text-white focus:outline-none h-9 px-4 rounded-md"),v(n,"placeholder","Aa"),v(l,"class","text-white bg-blue-600 px-4 rounded-md"),v(t,"class","flex gap-2")},m(h,g){C(h,e,g);for(let u=0;u<o.length;u+=1)o[u].m(e,null);C(h,s,g),C(h,t,g),_(t,n),ve(n,a[3]),_(t,c),_(t,l),_(l,r),f||(d=[B(n,"input",a[5]),B(t,"submit",Ke(a[6]))],f=!0)},p(h,g){if(g&4){i=h[2];let u;for(u=0;u<i.length;u+=1){const m=Ee(h,i,u);o[u]?o[u].p(m,g):(o[u]=Te(m),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}g&8&&n.value!==h[3]&&ve(n,h[3])},d(h){h&&b(e),ee(o,h),h&&b(s),h&&b(t),f=!1,ge(d)}}}function nt(a){let e,s;return e=new $e({props:{title:"Chat",visible:a[0],$$slots:{default:[at]},$$scope:{ctx:a}}}),e.$on("close",a[7]),{c(){N(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,n){S(e,t,n),s=!0},p(t,[n]){const c={};n&1&&(c.visible=t[0]),n&8204&&(c.$$scope={dirty:n,ctx:t}),e.$set(c)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){P(e.$$.fragment,t),s=!1},d(t){U(e,t)}}}function rt(a,e,s){const t=re();let{visible:n=!1}=e,{messages:c=[]}=e,l="",r=[];function f(){l=this.value,s(3,l)}const d=()=>{t("messagesend",{message:l}),s(3,l="")};function i(o){be.call(this,a,o)}return a.$$set=o=>{"visible"in o&&s(0,n=o.visible),"messages"in o&&s(1,c=o.messages)},a.$$.update=()=>{if(a.$$.dirty&6){let o=[];s(2,r=[]),c.forEach(h=>{if(o.length==0||o[o.length-1]!=h.id){o.push(h.id),r.push([h]);return}r[r.length-1].push(h)}),s(2,r=[...r])}},[n,c,r,l,t,f,d,i]}class dt extends q{constructor(e){super();z(this,e,rt,nt,K,{visible:0,messages:1})}}function Ie(a,e,s){const t=a.slice();return t[3]=e[s],t}function De(a){let e,s,t,n,c,l,r=a[3].username+"",f,d;return{c(){e=w("div"),s=w("img"),c=T(),l=w("p"),f=A(r),d=T(),this.h()},l(i){e=$(i,"DIV",{class:!0});var o=k(e);s=$(o,"IMG",{src:!0,alt:!0,class:!0}),c=I(o),l=$(o,"P",{class:!0});var h=k(l);f=H(h,r),h.forEach(b),d=I(o),o.forEach(b),this.h()},h(){te(s.src,t="https://avatars.dicebear.com/api/initials/"+a[3].username+".svg")||v(s,"src",t),v(s,"alt",n=a[3].username),v(s,"class","rounded-md w-12 h-12 mt-auto"),v(l,"class","text-white"),v(e,"class","flex gap-2 flex-row items-center")},m(i,o){C(i,e,o),_(e,s),_(e,c),_(e,l),_(l,f),_(e,d)},p(i,o){o&2&&!te(s.src,t="https://avatars.dicebear.com/api/initials/"+i[3].username+".svg")&&v(s,"src",t),o&2&&n!==(n=i[3].username)&&v(s,"alt",n),o&2&&r!==(r=i[3].username+"")&&L(f,r)},d(i){i&&b(e)}}}function it(a){let e,s=a[1],t=[];for(let n=0;n<s.length;n+=1)t[n]=De(Ie(a,s,n));return{c(){e=w("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=$(n,"DIV",{class:!0});var c=k(e);for(let l=0;l<t.length;l+=1)t[l].l(c);c.forEach(b),this.h()},h(){v(e,"class","flex flex-col h-auto flex-1 gap-4 mt-2")},m(n,c){C(n,e,c);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(n,c){if(c&2){s=n[1];let l;for(l=0;l<s.length;l+=1){const r=Ie(n,s,l);t[l]?t[l].p(r,c):(t[l]=De(r),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=s.length}},d(n){n&&b(e),ee(t,n)}}}function ot(a){let e,s;return e=new $e({props:{title:"Members",visible:a[0],$$slots:{default:[it]},$$scope:{ctx:a}}}),e.$on("close",a[2]),{c(){N(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,n){S(e,t,n),s=!0},p(t,[n]){const c={};n&1&&(c.visible=t[0]),n&66&&(c.$$scope={dirty:n,ctx:t}),e.$set(c)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){P(e.$$.fragment,t),s=!1},d(t){U(e,t)}}}function ct(a,e,s){let{visible:t}=e,{users:n}=e;function c(l){be.call(this,a,l)}return a.$$set=l=>{"visible"in l&&s(0,t=l.visible),"users"in l&&s(1,n=l.users)},[t,n,c]}class mt extends q{constructor(e){super();z(this,e,ct,ot,K,{visible:0,users:1})}}export{dt as C,ut as G,mt as M,ht as N,Q as S};

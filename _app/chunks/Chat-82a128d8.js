import{S as Q,i as X,s as Y,e as E,k as T,t as W,c as $,a as k,d as b,n as y,g as A,b as p,K as J,f as N,H as _,L as Ve,M as Te,h as Z,I as me,j as P,m as U,o as S,x as O,u as C,v as B,N as M,r as ye,w as xe,O as ae,A as De,P as Ie,Q as Oe,R as Ce,T as H,U as Ne,V as Pe,W as Ue,X as Se,Y as Be,Z as je,_ as _e,$ as ne,a0 as Me,D as Re,E as Ge,F as He,G as We,a1 as ge,a2 as ve,a3 as Ae,a4 as Fe}from"./vendor-4dd1f186.js";function qe(a){let e,s,l,f,d,t,n=a[2].username+"",r,h,o;return{c(){e=E("div"),s=E("video"),l=E("track"),d=T(),t=E("p"),r=W(n),this.h()},l(c){e=$(c,"DIV",{class:!0,style:!0});var i=k(e);s=$(i,"VIDEO",{class:!0});var g=k(s);l=$(g,"TRACK",{kind:!0}),g.forEach(b),d=y(i),t=$(i,"P",{class:!0});var u=k(t);r=A(u,n),u.forEach(b),i.forEach(b),this.h()},h(){p(l,"kind","captions"),s.autoplay=!0,s.muted=a[3],p(s,"class","w-full h-full rounded-xl"),p(t,"class","text-white absolute top-0 left-0 text-xl"),p(e,"class","video-container bg-gray-700 rounded-xl relative svelte-5ldje3"),J(e,"--width",a[0]+"px"),J(e,"--height",a[1]+"px")},m(c,i){N(c,e,i),_(e,s),_(s,l),_(e,d),_(e,t),_(t,r),h||(o=Ve(f=ze.call(null,s,a[2].stream)),h=!0)},p(c,[i]){i&8&&(s.muted=c[3]),f&&Te(f.update)&&i&4&&f.update.call(null,c[2].stream),i&4&&n!==(n=c[2].username+"")&&Z(r,n),i&1&&J(e,"--width",c[0]+"px"),i&2&&J(e,"--height",c[1]+"px")},i:me,o:me,d(c){c&&b(e),h=!1,o()}}}function ze(a,e){return a.srcObject=e,{destroy(){}}}function Ke(a,e,s){let{width:l}=e,{height:f}=e,{stream:d}=e,{muted:t=!1}=e;return a.$$set=n=>{"width"in n&&s(0,l=n.width),"height"in n&&s(1,f=n.height),"stream"in n&&s(2,d=n.stream),"muted"in n&&s(3,t=n.muted)},[l,f,d,t]}class Le extends Q{constructor(e){super();X(this,e,Ke,qe,Y,{width:0,height:1,stream:2,muted:3})}}function be(a,e,s){const l=a.slice();return l[7]=e[s],l[9]=s,l}function pe(a){let e,s;return e=new Le({props:{width:a[2],height:a[3],stream:a[7],muted:a[9]==0}}),{c(){P(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,f){S(e,l,f),s=!0},p(l,f){const d={};f&4&&(d.width=l[2]),f&8&&(d.height=l[3]),f&1&&(d.stream=l[7]),e.$set(d)},i(l){s||(O(e.$$.fragment,l),s=!0)},o(l){C(e.$$.fragment,l),s=!1},d(l){B(e,l)}}}function Qe(a){let e,s,l,f,d=a[0],t=[];for(let r=0;r<d.length;r+=1)t[r]=pe(be(a,d,r));const n=r=>C(t[r],1,1,()=>{t[r]=null});return{c(){e=E("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=$(r,"DIV",{id:!0,class:!0});var h=k(e);for(let o=0;o<t.length;o+=1)t[o].l(h);h.forEach(b),this.h()},h(){p(e,"id","gallery"),p(e,"class","flex justify-center items-center flex-wrap flex-1 px-8 py-8 gap-4")},m(r,h){N(r,e,h);for(let o=0;o<t.length;o+=1)t[o].m(e,null);a[6](e),s=!0,l||(f=M(window,"resize",a[4]),l=!0)},p(r,[h]){if(h&13){d=r[0];let o;for(o=0;o<d.length;o+=1){const c=be(r,d,o);t[o]?(t[o].p(c,h),O(t[o],1)):(t[o]=pe(c),t[o].c(),O(t[o],1),t[o].m(e,null))}for(ye(),o=d.length;o<t.length;o+=1)n(o);xe()}},i(r){if(!s){for(let h=0;h<d.length;h+=1)O(t[h]);s=!0}},o(r){t=t.filter(Boolean);for(let h=0;h<t.length;h+=1)C(t[h]);s=!1},d(r){r&&b(e),ae(t,r),a[6](null),l=!1,f()}}}function Xe(a,e,s){let{sidePanelVisible:l=!1}=e,{streams:f=[]}=e,d,t,n;function r(){const o=[16,9],c=f.length,{width:i,height:g}=Ie.largestRect(document.body.clientWidth-64-16*(c-1)-document.body.clientWidth*.2*Oe(l),document.body.clientHeight-64-64-16*(c-1),c,...o);s(2,t=i),s(3,n=g)}De(r);function h(o){Ce[o?"unshift":"push"](()=>{d=o,s(1,d)})}return a.$$set=o=>{"sidePanelVisible"in o&&s(5,l=o.sidePanelVisible),"streams"in o&&s(0,f=o.streams)},a.$$.update=()=>{a.$$.dirty&33&&r()},[f,d,t,n,r,l,h]}class rt extends Q{constructor(e){super();X(this,e,Xe,Qe,Y,{sidePanelVisible:5,streams:0})}}function Ye(a){let e,s,l=a[2](a[0])+"",f,d,t,n,r,h,o,c,i,g,u,m,v,w,D,I,ee,q,R,te,z,le,K,G,L,se,re;return r=new H({props:{icon:Ne,color:"#ffffff",scale:1.3}}),c=new H({props:{icon:Pe,color:"#ffffff",scale:1.3}}),u=new H({props:{icon:Ue,color:"#ffffff",scale:1.3}}),I=new H({props:{icon:Se,color:"#ffffff",scale:1.3}}),R=new H({props:{icon:Be,color:"#ffffff",scale:1.3}}),G=new H({props:{icon:je,color:"#ffffff",scale:1.2}}),{c(){e=E("div"),s=E("p"),f=W(l),d=T(),t=E("div"),n=E("button"),P(r.$$.fragment),h=T(),o=E("button"),P(c.$$.fragment),i=T(),g=E("button"),P(u.$$.fragment),m=T(),v=E("div"),w=T(),D=E("button"),P(I.$$.fragment),ee=T(),q=E("button"),P(R.$$.fragment),te=T(),z=E("div"),le=T(),K=E("button"),P(G.$$.fragment),this.h()},l(V){e=$(V,"DIV",{class:!0});var j=k(e);s=$(j,"P",{class:!0});var ie=k(s);f=A(ie,l),ie.forEach(b),d=y(j),t=$(j,"DIV",{class:!0});var x=k(t);n=$(x,"BUTTON",{});var oe=k(n);U(r.$$.fragment,oe),oe.forEach(b),h=y(x),o=$(x,"BUTTON",{});var fe=k(o);U(c.$$.fragment,fe),fe.forEach(b),i=y(x),g=$(x,"BUTTON",{class:!0});var ce=k(g);U(u.$$.fragment,ce),ce.forEach(b),m=y(x),v=$(x,"DIV",{class:!0}),k(v).forEach(b),w=y(x),D=$(x,"BUTTON",{});var ue=k(D);U(I.$$.fragment,ue),ue.forEach(b),ee=y(x),q=$(x,"BUTTON",{});var de=k(q);U(R.$$.fragment,de),de.forEach(b),te=y(x),z=$(x,"DIV",{class:!0}),k(z).forEach(b),le=y(x),K=$(x,"BUTTON",{});var he=k(K);U(G.$$.fragment,he),he.forEach(b),x.forEach(b),j.forEach(b),this.h()},h(){p(s,"class","text-white"),p(g,"class","hidden sm:block"),p(v,"class","border border-gray-500"),p(z,"class","border border-gray-500"),p(t,"class","flex ml-auto gap-5"),p(e,"class","flex w-full bg-gray-700 h-16 px-8 items-center")},m(V,j){N(V,e,j),_(e,s),_(s,f),_(e,d),_(e,t),_(t,n),S(r,n,null),_(t,h),_(t,o),S(c,o,null),_(t,i),_(t,g),S(u,g,null),_(t,m),_(t,v),_(t,w),_(t,D),S(I,D,null),_(t,ee),_(t,q),S(R,q,null),_(t,te),_(t,z),_(t,le),_(t,K),S(G,K,null),L=!0,se||(re=[M(n,"click",a[4]),M(o,"click",a[5]),M(g,"click",a[6]),M(D,"click",a[7])],se=!0)},p(V,[j]){(!L||j&1)&&l!==(l=V[2](V[0])+"")&&Z(f,l)},i(V){L||(O(r.$$.fragment,V),O(c.$$.fragment,V),O(u.$$.fragment,V),O(I.$$.fragment,V),O(R.$$.fragment,V),O(G.$$.fragment,V),L=!0)},o(V){C(r.$$.fragment,V),C(c.$$.fragment,V),C(u.$$.fragment,V),C(I.$$.fragment,V),C(R.$$.fragment,V),C(G.$$.fragment,V),L=!1},d(V){V&&b(e),B(r),B(c),B(u),B(I),B(R),B(G),se=!1,_e(re)}}}var F;(function(a){a[a.Camera=0]="Camera",a[a.Screen=1]="Screen"})(F||(F={}));function Ze(a,e,s){let l=F.Camera,{time:f=0}=e;const d=(i,g)=>String(i).padStart(g,"0"),t=i=>(~~(i/60)>=60?`${d(~~(i/3600),2)}:`:"")+`${d(~~(i/60)%60,2)}:${d(i%60,2)}`,n=ne(),r=()=>n("videoswitch"),h=()=>n("muteswitch"),o=()=>{s(1,l=l==F.Camera?F.Screen:F.Camera),n("sourceswitch",{source:l})},c=()=>n("chatswitch");return a.$$set=i=>{"time"in i&&s(0,f=i.time)},[f,l,t,n,r,h,o,c]}class it extends Q{constructor(e){super();X(this,e,Ze,Ye,Y,{time:0})}}function Je(a){let e,s,l,f,d,t,n,r,h,o,c,i;n=new H({props:{icon:Me,color:"#ffffff",scale:1.3}});const g=a[4].default,u=Re(g,a,a[3],null);return{c(){e=E("div"),s=E("div"),l=E("h1"),f=W(a[0]),d=T(),t=E("button"),P(n.$$.fragment),r=T(),u&&u.c(),this.h()},l(m){e=$(m,"DIV",{class:!0});var v=k(e);s=$(v,"DIV",{class:!0});var w=k(s);l=$(w,"H1",{class:!0});var D=k(l);f=A(D,a[0]),D.forEach(b),d=y(w),t=$(w,"BUTTON",{class:!0});var I=k(t);U(n.$$.fragment,I),I.forEach(b),w.forEach(b),r=y(v),u&&u.l(v),v.forEach(b),this.h()},h(){p(l,"class","text-3xl text-white font-semibold"),p(t,"class","block md:hidden ml-auto"),p(s,"class","flex mb-3"),p(e,"class",h=""+((a[1]?"flex":"hidden")+" flex-col w-full h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8"))},m(m,v){N(m,e,v),_(e,s),_(s,l),_(l,f),_(s,d),_(s,t),S(n,t,null),_(e,r),u&&u.m(e,null),o=!0,c||(i=M(t,"click",a[5]),c=!0)},p(m,[v]){(!o||v&1)&&Z(f,m[0]),u&&u.p&&(!o||v&8)&&Ge(u,g,m,m[3],o?We(g,m[3],v,null):He(m[3]),null),(!o||v&2&&h!==(h=""+((m[1]?"flex":"hidden")+" flex-col w-full h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8")))&&p(e,"class",h)},i(m){o||(O(n.$$.fragment,m),O(u,m),o=!0)},o(m){C(n.$$.fragment,m),C(u,m),o=!1},d(m){m&&b(e),B(n),u&&u.d(m),c=!1,i()}}}function et(a,e,s){let{$$slots:l={},$$scope:f}=e,{title:d}=e,{visible:t}=e;const n=ne(),r=()=>n("close");return a.$$set=h=>{"title"in h&&s(0,d=h.title),"visible"in h&&s(1,t=h.visible),"$$scope"in h&&s(3,f=h.$$scope)},[d,t,n,f,l,r]}class tt extends Q{constructor(e){super();X(this,e,et,Je,Y,{title:0,visible:1})}}function we(a,e,s){const l=a.slice();return l[1]=e[s],l}function Ee(a,e,s){const l=a.slice();return l[10]=e[s],l}function $e(a){let e,s,l=a[10].message+"",f,d,t;return{c(){e=E("div"),s=E("p"),f=W(l),d=T(),this.h()},l(n){e=$(n,"DIV",{class:!0});var r=k(e);s=$(r,"P",{});var h=k(s);f=A(h,l),h.forEach(b),d=y(r),r.forEach(b),this.h()},h(){p(e,"class",t="flex items-center bg-gray-600 text-white rounded-b-md "+(a[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")},m(n,r){N(n,e,r),_(e,s),_(s,f),_(e,d)},p(n,r){r&4&&l!==(l=n[10].message+"")&&Z(f,l),r&4&&t!==(t="flex items-center bg-gray-600 text-white rounded-b-md "+(n[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")&&p(e,"class",t)},d(n){n&&b(e)}}}function ke(a){let e,s,l,f,d,t,n,r=a[1][0].author+"",h,o,c,i,g=a[1],u=[];for(let m=0;m<g.length;m+=1)u[m]=$e(Ee(a,g,m));return{c(){e=E("div"),s=E("img"),d=T(),t=E("div"),n=E("p"),h=W(r),o=T();for(let m=0;m<u.length;m+=1)u[m].c();c=T(),this.h()},l(m){e=$(m,"DIV",{class:!0});var v=k(e);s=$(v,"IMG",{src:!0,alt:!0,class:!0}),d=y(v),t=$(v,"DIV",{class:!0});var w=k(t);n=$(w,"P",{class:!0});var D=k(n);h=A(D,r),D.forEach(b),o=y(w);for(let I=0;I<u.length;I+=1)u[I].l(w);w.forEach(b),c=y(v),v.forEach(b),this.h()},h(){ge(s.src,l="https://avatars.dicebear.com/api/initials/"+a[1][0].author+".svg")||p(s,"src",l),p(s,"alt",f=a[1][0].author),p(s,"class","rounded-md w-12 h-12 mt-auto"),p(n,"class","text-gray-400 text-xs"),p(t,"class","flex flex-col flex-1 gap-1"),p(e,"class",i="flex gap-2 "+(a[1][0].me?"flex-row-reverse":"flex-row"))},m(m,v){N(m,e,v),_(e,s),_(e,d),_(e,t),_(t,n),_(n,h),_(t,o);for(let w=0;w<u.length;w+=1)u[w].m(t,null);_(e,c)},p(m,v){if(v&4&&!ge(s.src,l="https://avatars.dicebear.com/api/initials/"+m[1][0].author+".svg")&&p(s,"src",l),v&4&&f!==(f=m[1][0].author)&&p(s,"alt",f),v&4&&r!==(r=m[1][0].author+"")&&Z(h,r),v&4){g=m[1];let w;for(w=0;w<g.length;w+=1){const D=Ee(m,g,w);u[w]?u[w].p(D,v):(u[w]=$e(D),u[w].c(),u[w].m(t,null))}for(;w<u.length;w+=1)u[w].d(1);u.length=g.length}v&4&&i!==(i="flex gap-2 "+(m[1][0].me?"flex-row-reverse":"flex-row"))&&p(e,"class",i)},d(m){m&&b(e),ae(u,m)}}}function lt(a){let e,s,l,f,d,t,n,r,h,o=a[2],c=[];for(let i=0;i<o.length;i+=1)c[i]=ke(we(a,o,i));return{c(){e=E("div");for(let i=0;i<c.length;i+=1)c[i].c();s=T(),l=E("form"),f=E("input"),d=T(),t=E("button"),n=W("Send"),this.h()},l(i){e=$(i,"DIV",{class:!0});var g=k(e);for(let v=0;v<c.length;v+=1)c[v].l(g);g.forEach(b),s=y(i),l=$(i,"FORM",{class:!0});var u=k(l);f=$(u,"INPUT",{type:!0,class:!0,placeholder:!0}),d=y(u),t=$(u,"BUTTON",{class:!0});var m=k(t);n=A(m,"Send"),m.forEach(b),u.forEach(b),this.h()},h(){p(e,"class","flex flex-col h-auto flex-1 gap-6"),p(f,"type","text"),p(f,"class","w-full bg-gray-700 text-white focus:outline-none h-9 px-4 rounded-md"),p(f,"placeholder","Aa"),p(t,"class","text-white bg-blue-600 px-4 rounded-md"),p(l,"class","flex gap-2")},m(i,g){N(i,e,g);for(let u=0;u<c.length;u+=1)c[u].m(e,null);N(i,s,g),N(i,l,g),_(l,f),ve(f,a[3]),_(l,d),_(l,t),_(t,n),r||(h=[M(f,"input",a[5]),M(l,"submit",Ae(a[6]))],r=!0)},p(i,g){if(g&4){o=i[2];let u;for(u=0;u<o.length;u+=1){const m=we(i,o,u);c[u]?c[u].p(m,g):(c[u]=ke(m),c[u].c(),c[u].m(e,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=o.length}g&8&&f.value!==i[3]&&ve(f,i[3])},d(i){i&&b(e),ae(c,i),i&&b(s),i&&b(l),r=!1,_e(h)}}}function st(a){let e,s;return e=new tt({props:{title:"Chat",visible:a[0],$$slots:{default:[lt]},$$scope:{ctx:a}}}),e.$on("close",a[7]),{c(){P(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,f){S(e,l,f),s=!0},p(l,[f]){const d={};f&1&&(d.visible=l[0]),f&8204&&(d.$$scope={dirty:f,ctx:l}),e.$set(d)},i(l){s||(O(e.$$.fragment,l),s=!0)},o(l){C(e.$$.fragment,l),s=!1},d(l){B(e,l)}}}function at(a,e,s){const l=ne();let{visible:f=!1}=e,{messages:d=[]}=e,t="",n=[];function r(){t=this.value,s(3,t)}const h=()=>{l("messagesend",{message:t}),s(3,t="")};function o(c){Fe.call(this,a,c)}return a.$$set=c=>{"visible"in c&&s(0,f=c.visible),"messages"in c&&s(1,d=c.messages)},a.$$.update=()=>{if(a.$$.dirty&6){let c=[];s(2,n=[]),d.forEach(i=>{if(c.length==0||c[c.length-1]!=i.id){c.push(i.id),n.push([i]);return}n[n.length-1].push(i)}),s(2,n=[...n])}},[f,d,n,t,l,r,h,o]}class ot extends Q{constructor(e){super();X(this,e,at,st,Y,{visible:0,messages:1})}}export{ot as C,rt as G,it as N,F as S};

import{S as q,i as z,s as K,e as w,k as I,t as A,c as k,a as $,d as g,n as D,g as H,b as v,M as X,f as N,H as _,N as De,O as Oe,h as J,I as se,j as S,m as U,o as B,x as O,u as x,v as j,P as G,r as he,w as de,Q as Y,A as Pe,R as xe,T as ye,U as Ce,V as W,W as Ne,X as Me,Y as Se,Z as Ue,_ as Be,$ as me,a0 as ae,a1 as je,a2 as Ge,D as Re,E as Ae,F as He,G as We,J as Z,a3 as _e,a4 as Fe,K as ge}from"./vendor-ef7a3a0d.js";function qe(n){let e,s,t,a,i,l,o=n[2].username+"",r,d,f;return{c(){e=w("div"),s=w("video"),t=w("track"),i=I(),l=w("p"),r=A(o),this.h()},l(c){e=k(c,"DIV",{class:!0,style:!0});var m=$(e);s=k(m,"VIDEO",{class:!0});var p=$(s);t=k(p,"TRACK",{kind:!0}),p.forEach(g),i=D(m),l=k(m,"P",{class:!0});var u=$(l);r=H(u,o),u.forEach(g),m.forEach(g),this.h()},h(){v(t,"kind","captions"),s.autoplay=!0,s.muted=n[3],v(s,"class","w-full h-full rounded-xl"),v(l,"class","text-white absolute top-0 left-0 text-xl"),v(e,"class","video-container bg-gray-700 rounded-xl relative svelte-5ldje3"),X(e,"--width",n[0]+"px"),X(e,"--height",n[1]+"px")},m(c,m){N(c,e,m),_(e,s),_(s,t),_(e,i),_(e,l),_(l,r),d||(f=De(a=ze.call(null,s,n[2].stream)),d=!0)},p(c,[m]){m&8&&(s.muted=c[3]),a&&Oe(a.update)&&m&4&&a.update.call(null,c[2].stream),m&4&&o!==(o=c[2].username+"")&&J(r,o),m&1&&X(e,"--width",c[0]+"px"),m&2&&X(e,"--height",c[1]+"px")},i:se,o:se,d(c){c&&g(e),d=!1,f()}}}function ze(n,e){return n.srcObject=e,{destroy(){}}}function Ke(n,e,s){let{width:t}=e,{height:a}=e,{stream:i}=e,{muted:l=!1}=e;return n.$$set=o=>{"width"in o&&s(0,t=o.width),"height"in o&&s(1,a=o.height),"stream"in o&&s(2,i=o.stream),"muted"in o&&s(3,l=o.muted)},[t,a,i,l]}class Je extends q{constructor(e){super();z(this,e,Ke,qe,K,{width:0,height:1,stream:2,muted:3})}}function ve(n,e,s){const t=n.slice();return t[7]=e[s],t[9]=s,t}function be(n){let e,s;return e=new Je({props:{width:n[2],height:n[3],stream:n[7],muted:n[9]==0}}),{c(){S(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,a){B(e,t,a),s=!0},p(t,a){const i={};a&4&&(i.width=t[2]),a&8&&(i.height=t[3]),a&1&&(i.stream=t[7]),e.$set(i)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function Le(n){let e,s,t,a,i=n[0],l=[];for(let r=0;r<i.length;r+=1)l[r]=be(ve(n,i,r));const o=r=>x(l[r],1,1,()=>{l[r]=null});return{c(){e=w("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=k(r,"DIV",{id:!0,class:!0});var d=$(e);for(let f=0;f<l.length;f+=1)l[f].l(d);d.forEach(g),this.h()},h(){v(e,"id","gallery"),v(e,"class","flex justify-center items-center flex-wrap flex-1 px-8 py-8 gap-4")},m(r,d){N(r,e,d);for(let f=0;f<l.length;f+=1)l[f].m(e,null);n[6](e),s=!0,t||(a=G(window,"resize",n[4]),t=!0)},p(r,[d]){if(d&13){i=r[0];let f;for(f=0;f<i.length;f+=1){const c=ve(r,i,f);l[f]?(l[f].p(c,d),O(l[f],1)):(l[f]=be(c),l[f].c(),O(l[f],1),l[f].m(e,null))}for(he(),f=i.length;f<l.length;f+=1)o(f);de()}},i(r){if(!s){for(let d=0;d<i.length;d+=1)O(l[d]);s=!0}},o(r){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)x(l[d]);s=!1},d(r){r&&g(e),Y(l,r),n[6](null),t=!1,a()}}}function Qe(n,e,s){let{sidePanelVisible:t=!1}=e,{streams:a=[]}=e,i,l,o;function r(){const f=[16,9],c=a.length,{width:m,height:p}=xe.largestRect(document.body.clientWidth-64-16*(c-1)-document.body.clientWidth*.25*ye(t),document.body.clientHeight-64-64-16*(c-1),c,...f);s(2,l=m),s(3,o=p)}Pe(r);function d(f){Ce[f?"unshift":"push"](()=>{i=f,s(1,i)})}return n.$$set=f=>{"sidePanelVisible"in f&&s(5,t=f.sidePanelVisible),"streams"in f&&s(0,a=f.streams)},n.$$.update=()=>{n.$$.dirty&33&&r()},[a,i,l,o,r,t,d]}class ot extends q{constructor(e){super();z(this,e,Qe,Le,K,{sidePanelVisible:5,streams:0})}}function pe(n){let e,s,t,a,i,l,o;return a=new W({props:{icon:je,color:"#ffffff",scale:1.2}}),{c(){e=w("div"),s=I(),t=w("button"),S(a.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0}),$(e).forEach(g),s=D(r),t=k(r,"BUTTON",{});var d=$(t);U(a.$$.fragment,d),d.forEach(g),this.h()},h(){v(e,"class","border border-gray-500")},m(r,d){N(r,e,d),N(r,s,d),N(r,t,d),B(a,t,null),i=!0,l||(o=G(t,"click",n[10]),l=!0)},p:se,i(r){i||(O(a.$$.fragment,r),i=!0)},o(r){x(a.$$.fragment,r),i=!1},d(r){r&&g(e),r&&g(s),r&&g(t),j(a),l=!1,o()}}}function Xe(n){let e,s,t=n[3](n[0])+"",a,i,l,o,r,d,f,c,m,p,u,h,b,E,P,y,ee,F,R,te,Q,le,ne;r=new W({props:{icon:Ne,color:"#ffffff",scale:1.3}}),c=new W({props:{icon:Me,color:"#ffffff",scale:1.3}}),u=new W({props:{icon:Se,color:"#ffffff",scale:1.3}}),y=new W({props:{icon:Ue,color:"#ffffff",scale:1.3}}),R=new W({props:{icon:Be,color:"#ffffff",scale:1.3}});let T=!n[1]&&pe(n);return{c(){e=w("div"),s=w("p"),a=A(t),i=I(),l=w("div"),o=w("button"),S(r.$$.fragment),d=I(),f=w("button"),S(c.$$.fragment),m=I(),p=w("button"),S(u.$$.fragment),h=I(),b=w("div"),E=I(),P=w("button"),S(y.$$.fragment),ee=I(),F=w("button"),S(R.$$.fragment),te=I(),T&&T.c(),this.h()},l(V){e=k(V,"DIV",{class:!0});var M=$(e);s=k(M,"P",{class:!0});var re=$(s);a=H(re,t),re.forEach(g),i=D(M),l=k(M,"DIV",{class:!0});var C=$(l);o=k(C,"BUTTON",{});var ie=$(o);U(r.$$.fragment,ie),ie.forEach(g),d=D(C),f=k(C,"BUTTON",{});var oe=$(f);U(c.$$.fragment,oe),oe.forEach(g),m=D(C),p=k(C,"BUTTON",{class:!0});var fe=$(p);U(u.$$.fragment,fe),fe.forEach(g),h=D(C),b=k(C,"DIV",{class:!0}),$(b).forEach(g),E=D(C),P=k(C,"BUTTON",{});var ce=$(P);U(y.$$.fragment,ce),ce.forEach(g),ee=D(C),F=k(C,"BUTTON",{});var ue=$(F);U(R.$$.fragment,ue),ue.forEach(g),te=D(C),T&&T.l(C),C.forEach(g),M.forEach(g),this.h()},h(){v(s,"class","text-white"),v(p,"class","hidden sm:block"),v(b,"class","border border-gray-500"),v(l,"class","flex ml-auto gap-5"),v(e,"class","flex w-full bg-gray-700 h-16 px-8 items-center")},m(V,M){N(V,e,M),_(e,s),_(s,a),_(e,i),_(e,l),_(l,o),B(r,o,null),_(l,d),_(l,f),B(c,f,null),_(l,m),_(l,p),B(u,p,null),_(l,h),_(l,b),_(l,E),_(l,P),B(y,P,null),_(l,ee),_(l,F),B(R,F,null),_(l,te),T&&T.m(l,null),Q=!0,le||(ne=[G(o,"click",n[5]),G(f,"click",n[6]),G(p,"click",n[7]),G(P,"click",n[8]),G(F,"click",n[9])],le=!0)},p(V,[M]){(!Q||M&1)&&t!==(t=V[3](V[0])+"")&&J(a,t),V[1]?T&&(he(),x(T,1,1,()=>{T=null}),de()):T?(T.p(V,M),M&2&&O(T,1)):(T=pe(V),T.c(),O(T,1),T.m(l,null))},i(V){Q||(O(r.$$.fragment,V),O(c.$$.fragment,V),O(u.$$.fragment,V),O(y.$$.fragment,V),O(R.$$.fragment,V),O(T),Q=!0)},o(V){x(r.$$.fragment,V),x(c.$$.fragment,V),x(u.$$.fragment,V),x(y.$$.fragment,V),x(R.$$.fragment,V),x(T),Q=!1},d(V){V&&g(e),j(r),j(c),j(u),j(y),j(R),T&&T.d(),le=!1,me(ne)}}}var L;(function(n){n[n.Camera=0]="Camera",n[n.Screen=1]="Screen"})(L||(L={}));function Ye(n,e,s){let t=L.Camera,{time:a=0}=e,{peer:i=!1}=e;const l=(h,b)=>String(h).padStart(b,"0"),o=h=>(~~(h/60)>=60?`${l(~~(h/3600),2)}:`:"")+`${l(~~(h/60)%60,2)}:${l(h%60,2)}`,r=ae(),d=()=>r("videoswitch"),f=()=>r("muteswitch"),c=()=>{s(2,t=t==L.Camera?L.Screen:L.Camera),r("sourceswitch",{source:t})},m=()=>r("chatswitch"),p=()=>r("membersswitch"),u=()=>r("shareswitch");return n.$$set=h=>{"time"in h&&s(0,a=h.time),"peer"in h&&s(1,i=h.peer)},[a,i,t,o,r,d,f,c,m,p,u]}class ft extends q{constructor(e){super();z(this,e,Ye,Xe,K,{time:0,peer:1})}}function Ze(n){let e,s,t,a,i,l,o,r,d,f,c,m;o=new W({props:{icon:Ge,color:"#ffffff",scale:1.3}});const p=n[4].default,u=Re(p,n,n[3],null);return{c(){e=w("div"),s=w("div"),t=w("h1"),a=A(n[0]),i=I(),l=w("button"),S(o.$$.fragment),r=I(),u&&u.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var b=$(e);s=k(b,"DIV",{class:!0});var E=$(s);t=k(E,"H1",{class:!0});var P=$(t);a=H(P,n[0]),P.forEach(g),i=D(E),l=k(E,"BUTTON",{class:!0});var y=$(l);U(o.$$.fragment,y),y.forEach(g),E.forEach(g),r=D(b),u&&u.l(b),b.forEach(g),this.h()},h(){v(t,"class","text-3xl text-white font-semibold"),v(l,"class","block md:hidden ml-auto"),v(s,"class","flex mb-3"),v(e,"class",d=""+((n[1]?"flex":"hidden")+" flex-col w-full md:w-[25vw] h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8"))},m(h,b){N(h,e,b),_(e,s),_(s,t),_(t,a),_(s,i),_(s,l),B(o,l,null),_(e,r),u&&u.m(e,null),f=!0,c||(m=G(l,"click",n[5]),c=!0)},p(h,[b]){(!f||b&1)&&J(a,h[0]),u&&u.p&&(!f||b&8)&&Ae(u,p,h,h[3],f?We(p,h[3],b,null):He(h[3]),null),(!f||b&2&&d!==(d=""+((h[1]?"flex":"hidden")+" flex-col w-full md:w-[25vw] h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8")))&&v(e,"class",d)},i(h){f||(O(o.$$.fragment,h),O(u,h),f=!0)},o(h){x(o.$$.fragment,h),x(u,h),f=!1},d(h){h&&g(e),j(o),u&&u.d(h),c=!1,m()}}}function et(n,e,s){let{$$slots:t={},$$scope:a}=e,{title:i}=e,{visible:l}=e;const o=ae(),r=()=>o("close");return n.$$set=d=>{"title"in d&&s(0,i=d.title),"visible"in d&&s(1,l=d.visible),"$$scope"in d&&s(3,a=d.$$scope)},[i,l,o,a,t,r]}class we extends q{constructor(e){super();z(this,e,et,Ze,K,{title:0,visible:1})}}function ke(n,e,s){const t=n.slice();return t[1]=e[s],t}function Ee(n,e,s){const t=n.slice();return t[10]=e[s],t}function $e(n){let e,s,t=n[10].message+"",a,i,l;return{c(){e=w("div"),s=w("p"),a=A(t),i=I(),this.h()},l(o){e=k(o,"DIV",{class:!0});var r=$(e);s=k(r,"P",{});var d=$(s);a=H(d,t),d.forEach(g),i=D(r),r.forEach(g),this.h()},h(){v(e,"class",l="flex items-center bg-gray-600 text-white rounded-b-md "+(n[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")},m(o,r){N(o,e,r),_(e,s),_(s,a),_(e,i)},p(o,r){r&4&&t!==(t=o[10].message+"")&&J(a,t),r&4&&l!==(l="flex items-center bg-gray-600 text-white rounded-b-md "+(o[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")&&v(e,"class",l)},d(o){o&&g(e)}}}function Ve(n){let e,s,t,a,i,l,o,r=n[1][0].author+"",d,f,c,m,p=n[1],u=[];for(let h=0;h<p.length;h+=1)u[h]=$e(Ee(n,p,h));return{c(){e=w("div"),s=w("img"),i=I(),l=w("div"),o=w("p"),d=A(r),f=I();for(let h=0;h<u.length;h+=1)u[h].c();c=I(),this.h()},l(h){e=k(h,"DIV",{class:!0});var b=$(e);s=k(b,"IMG",{src:!0,alt:!0,class:!0}),i=D(b),l=k(b,"DIV",{class:!0});var E=$(l);o=k(E,"P",{class:!0});var P=$(o);d=H(P,r),P.forEach(g),f=D(E);for(let y=0;y<u.length;y+=1)u[y].l(E);E.forEach(g),c=D(b),b.forEach(g),this.h()},h(){Z(s.src,t="https://avatars.dicebear.com/api/initials/"+n[1][0].author+".svg")||v(s,"src",t),v(s,"alt",a=n[1][0].author),v(s,"class","rounded-md w-12 h-12 mt-auto"),v(o,"class","text-gray-400 text-xs"),v(l,"class","flex flex-col flex-1 gap-1"),v(e,"class",m="flex gap-2 "+(n[1][0].me?"flex-row-reverse":"flex-row"))},m(h,b){N(h,e,b),_(e,s),_(e,i),_(e,l),_(l,o),_(o,d),_(l,f);for(let E=0;E<u.length;E+=1)u[E].m(l,null);_(e,c)},p(h,b){if(b&4&&!Z(s.src,t="https://avatars.dicebear.com/api/initials/"+h[1][0].author+".svg")&&v(s,"src",t),b&4&&a!==(a=h[1][0].author)&&v(s,"alt",a),b&4&&r!==(r=h[1][0].author+"")&&J(d,r),b&4){p=h[1];let E;for(E=0;E<p.length;E+=1){const P=Ee(h,p,E);u[E]?u[E].p(P,b):(u[E]=$e(P),u[E].c(),u[E].m(l,null))}for(;E<u.length;E+=1)u[E].d(1);u.length=p.length}b&4&&m!==(m="flex gap-2 "+(h[1][0].me?"flex-row-reverse":"flex-row"))&&v(e,"class",m)},d(h){h&&g(e),Y(u,h)}}}function tt(n){let e,s,t,a,i,l,o,r,d,f=n[2],c=[];for(let m=0;m<f.length;m+=1)c[m]=Ve(ke(n,f,m));return{c(){e=w("div");for(let m=0;m<c.length;m+=1)c[m].c();s=I(),t=w("form"),a=w("input"),i=I(),l=w("button"),o=A("Send"),this.h()},l(m){e=k(m,"DIV",{class:!0});var p=$(e);for(let b=0;b<c.length;b+=1)c[b].l(p);p.forEach(g),s=D(m),t=k(m,"FORM",{class:!0});var u=$(t);a=k(u,"INPUT",{type:!0,class:!0,placeholder:!0}),i=D(u),l=k(u,"BUTTON",{class:!0});var h=$(l);o=H(h,"Send"),h.forEach(g),u.forEach(g),this.h()},h(){v(e,"class","flex flex-col h-auto flex-1 gap-6"),v(a,"type","text"),v(a,"class","w-full bg-gray-700 text-white focus:outline-none h-9 px-4 rounded-md"),v(a,"placeholder","Aa"),v(l,"class","text-white bg-blue-600 px-4 rounded-md"),v(t,"class","flex gap-2")},m(m,p){N(m,e,p);for(let u=0;u<c.length;u+=1)c[u].m(e,null);N(m,s,p),N(m,t,p),_(t,a),_e(a,n[3]),_(t,i),_(t,l),_(l,o),r||(d=[G(a,"input",n[5]),G(t,"submit",Fe(n[6]))],r=!0)},p(m,p){if(p&4){f=m[2];let u;for(u=0;u<f.length;u+=1){const h=ke(m,f,u);c[u]?c[u].p(h,p):(c[u]=Ve(h),c[u].c(),c[u].m(e,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=f.length}p&8&&a.value!==m[3]&&_e(a,m[3])},d(m){m&&g(e),Y(c,m),m&&g(s),m&&g(t),r=!1,me(d)}}}function lt(n){let e,s;return e=new we({props:{title:"Chat",visible:n[0],$$slots:{default:[tt]},$$scope:{ctx:n}}}),e.$on("close",n[7]),{c(){S(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,a){B(e,t,a),s=!0},p(t,[a]){const i={};a&1&&(i.visible=t[0]),a&8204&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function st(n,e,s){const t=ae();let{visible:a=!1}=e,{messages:i=[]}=e,l="",o=[];function r(){l=this.value,s(3,l)}const d=()=>{t("messagesend",{message:l}),s(3,l="")};function f(c){ge.call(this,n,c)}return n.$$set=c=>{"visible"in c&&s(0,a=c.visible),"messages"in c&&s(1,i=c.messages)},n.$$.update=()=>{if(n.$$.dirty&6){let c=[];s(2,o=[]),i.forEach(m=>{if(c.length==0||c[c.length-1]!=m.id){c.push(m.id),o.push([m]);return}o[o.length-1].push(m)}),s(2,o=[...o])}},[a,i,o,l,t,r,d,f]}class ct extends q{constructor(e){super();z(this,e,st,lt,K,{visible:0,messages:1})}}function Te(n,e,s){const t=n.slice();return t[3]=e[s],t}function Ie(n){let e,s,t,a,i,l,o=n[3].username+"",r,d;return{c(){e=w("div"),s=w("img"),i=I(),l=w("p"),r=A(o),d=I(),this.h()},l(f){e=k(f,"DIV",{class:!0});var c=$(e);s=k(c,"IMG",{src:!0,alt:!0,class:!0}),i=D(c),l=k(c,"P",{class:!0});var m=$(l);r=H(m,o),m.forEach(g),d=D(c),c.forEach(g),this.h()},h(){Z(s.src,t="https://avatars.dicebear.com/api/initials/"+n[3].username+".svg")||v(s,"src",t),v(s,"alt",a=n[3].username),v(s,"class","rounded-md w-12 h-12 mt-auto"),v(l,"class","text-white"),v(e,"class","flex gap-2 flex-row items-center")},m(f,c){N(f,e,c),_(e,s),_(e,i),_(e,l),_(l,r),_(e,d)},p(f,c){c&2&&!Z(s.src,t="https://avatars.dicebear.com/api/initials/"+f[3].username+".svg")&&v(s,"src",t),c&2&&a!==(a=f[3].username)&&v(s,"alt",a),c&2&&o!==(o=f[3].username+"")&&J(r,o)},d(f){f&&g(e)}}}function at(n){let e,s=n[1],t=[];for(let a=0;a<s.length;a+=1)t[a]=Ie(Te(n,s,a));return{c(){e=w("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var i=$(e);for(let l=0;l<t.length;l+=1)t[l].l(i);i.forEach(g),this.h()},h(){v(e,"class","flex flex-col h-auto flex-1 gap-4 mt-2")},m(a,i){N(a,e,i);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(a,i){if(i&2){s=a[1];let l;for(l=0;l<s.length;l+=1){const o=Te(a,s,l);t[l]?t[l].p(o,i):(t[l]=Ie(o),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=s.length}},d(a){a&&g(e),Y(t,a)}}}function nt(n){let e,s;return e=new we({props:{title:"Members",visible:n[0],$$slots:{default:[at]},$$scope:{ctx:n}}}),e.$on("close",n[2]),{c(){S(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,a){B(e,t,a),s=!0},p(t,[a]){const i={};a&1&&(i.visible=t[0]),a&66&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function rt(n,e,s){let{visible:t}=e,{users:a}=e;function i(l){ge.call(this,n,l)}return n.$$set=l=>{"visible"in l&&s(0,t=l.visible),"users"in l&&s(1,a=l.users)},[t,a,i]}class ut extends q{constructor(e){super();z(this,e,rt,nt,K,{visible:0,users:1})}}export{ct as C,ot as G,ut as M,ft as N,we as P,L as S};

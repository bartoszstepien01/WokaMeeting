import{S as z,i as K,s as J,e as k,k as I,t as H,c as E,a as $,d as g,n as D,g as W,b,M as Z,f as M,H as _,N as Se,O as Ne,h as L,I as ne,j as y,m as B,o as j,x as C,u as S,v as x,P as G,r as he,w as de,Q as ee,A as Me,R as Ue,T as ye,U as Be,V as F,W as me,X as _e,Y as ge,Z as ve,_ as je,$ as xe,a0 as Ge,a1 as be,a2 as re,a3 as Re,a4 as Ae,D as He,E as We,F as Fe,G as qe,J as te,a5 as pe,a6 as ze,K as we}from"./vendor-7aa203f2.js";function Ke(a){let e,s,t,n,o,l,f=a[2].username+"",r,h,i;return{c(){e=k("div"),s=k("video"),t=k("track"),o=I(),l=k("p"),r=H(f),this.h()},l(c){e=E(c,"DIV",{class:!0,style:!0});var d=$(e);s=E(d,"VIDEO",{class:!0});var w=$(s);t=E(w,"TRACK",{kind:!0}),w.forEach(g),o=D(d),l=E(d,"P",{class:!0});var u=$(l);r=W(u,f),u.forEach(g),d.forEach(g),this.h()},h(){b(t,"kind","captions"),s.autoplay=!0,s.muted=a[3],b(s,"class","w-full h-full rounded-xl"),b(l,"class","text-white absolute top-0 left-0 text-xl"),b(e,"class","video-container bg-gray-700 rounded-xl relative svelte-5ldje3"),Z(e,"--width",a[0]+"px"),Z(e,"--height",a[1]+"px")},m(c,d){M(c,e,d),_(e,s),_(s,t),_(e,o),_(e,l),_(l,r),h||(i=Se(n=Je.call(null,s,a[2].stream)),h=!0)},p(c,[d]){d&8&&(s.muted=c[3]),n&&Ne(n.update)&&d&4&&n.update.call(null,c[2].stream),d&4&&f!==(f=c[2].username+"")&&L(r,f),d&1&&Z(e,"--width",c[0]+"px"),d&2&&Z(e,"--height",c[1]+"px")},i:ne,o:ne,d(c){c&&g(e),h=!1,i()}}}function Je(a,e){return a.srcObject=e,{destroy(){}}}function Le(a,e,s){let{width:t}=e,{height:n}=e,{stream:o}=e,{muted:l=!1}=e;return a.$$set=f=>{"width"in f&&s(0,t=f.width),"height"in f&&s(1,n=f.height),"stream"in f&&s(2,o=f.stream),"muted"in f&&s(3,l=f.muted)},[t,n,o,l]}class Qe extends z{constructor(e){super();K(this,e,Le,Ke,J,{width:0,height:1,stream:2,muted:3})}}function ke(a,e,s){const t=a.slice();return t[7]=e[s],t[9]=s,t}function Ee(a){let e,s;return e=new Qe({props:{width:a[2],height:a[3],stream:a[7],muted:a[9]==0}}),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,n){j(e,t,n),s=!0},p(t,n){const o={};n&4&&(o.width=t[2]),n&8&&(o.height=t[3]),n&1&&(o.stream=t[7]),e.$set(o)},i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){x(e,t)}}}function Xe(a){let e,s,t,n,o=a[0],l=[];for(let r=0;r<o.length;r+=1)l[r]=Ee(ke(a,o,r));const f=r=>S(l[r],1,1,()=>{l[r]=null});return{c(){e=k("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=E(r,"DIV",{id:!0,class:!0});var h=$(e);for(let i=0;i<l.length;i+=1)l[i].l(h);h.forEach(g),this.h()},h(){b(e,"id","gallery"),b(e,"class","flex justify-center items-center flex-wrap flex-1 px-8 py-8 gap-4")},m(r,h){M(r,e,h);for(let i=0;i<l.length;i+=1)l[i].m(e,null);a[6](e),s=!0,t||(n=G(window,"resize",a[4]),t=!0)},p(r,[h]){if(h&13){o=r[0];let i;for(i=0;i<o.length;i+=1){const c=ke(r,o,i);l[i]?(l[i].p(c,h),C(l[i],1)):(l[i]=Ee(c),l[i].c(),C(l[i],1),l[i].m(e,null))}for(he(),i=o.length;i<l.length;i+=1)f(i);de()}},i(r){if(!s){for(let h=0;h<o.length;h+=1)C(l[h]);s=!0}},o(r){l=l.filter(Boolean);for(let h=0;h<l.length;h+=1)S(l[h]);s=!1},d(r){r&&g(e),ee(l,r),a[6](null),t=!1,n()}}}function Ye(a,e,s){let{sidePanelVisible:t=!1}=e,{streams:n=[]}=e,o,l,f;function r(){const i=[16,9],c=n.length,{width:d,height:w}=Ue.largestRect(document.body.clientWidth-64-16*(c-1)-document.body.clientWidth*.25*ye(t),document.body.clientHeight-64-64-16*(c-1),c,...i);s(2,l=d),s(3,f=w)}Me(r);function h(i){Be[i?"unshift":"push"](()=>{o=i,s(1,o)})}return a.$$set=i=>{"sidePanelVisible"in i&&s(5,t=i.sidePanelVisible),"streams"in i&&s(0,n=i.streams)},a.$$.update=()=>{a.$$.dirty&33&&r()},[n,o,l,f,r,t,h]}class ct extends z{constructor(e){super();K(this,e,Ye,Xe,J,{sidePanelVisible:5,streams:0})}}function $e(a){let e,s,t,n,o,l,f;return n=new F({props:{icon:Re,color:"#ffffff",scale:1.2}}),{c(){e=k("div"),s=I(),t=k("button"),y(n.$$.fragment),this.h()},l(r){e=E(r,"DIV",{class:!0}),$(e).forEach(g),s=D(r),t=E(r,"BUTTON",{});var h=$(t);B(n.$$.fragment,h),h.forEach(g),this.h()},h(){b(e,"class","border border-gray-500")},m(r,h){M(r,e,h),M(r,s,h),M(r,t,h),j(n,t,null),o=!0,l||(f=G(t,"click",a[12]),l=!0)},p:ne,i(r){o||(C(n.$$.fragment,r),o=!0)},o(r){S(n.$$.fragment,r),o=!1},d(r){r&&g(e),r&&g(s),r&&g(t),x(n),l=!1,f()}}}function Ze(a){let e,s,t=a[5](a[0])+"",n,o,l,f,r,h,i,c,d,w,u,m,p,v,O,N,le,q,A,se,Q,ae,ie;r=new F({props:{icon:a[2]?me:_e,color:"#ffffff",scale:1.3}}),c=new F({props:{icon:a[3]?ge:ve,color:"#ffffff",scale:1.3}}),u=new F({props:{icon:je,color:a[4]==R.Camera?"#ffffff":"#34d399",scale:1.3}}),N=new F({props:{icon:xe,color:"#ffffff",scale:1.3}}),A=new F({props:{icon:Ge,color:"#ffffff",scale:1.3}});let T=!a[1]&&$e(a);return{c(){e=k("div"),s=k("p"),n=H(t),o=I(),l=k("div"),f=k("button"),y(r.$$.fragment),h=I(),i=k("button"),y(c.$$.fragment),d=I(),w=k("button"),y(u.$$.fragment),m=I(),p=k("div"),v=I(),O=k("button"),y(N.$$.fragment),le=I(),q=k("button"),y(A.$$.fragment),se=I(),T&&T.c(),this.h()},l(V){e=E(V,"DIV",{class:!0});var U=$(e);s=E(U,"P",{class:!0});var X=$(s);n=W(X,t),X.forEach(g),o=D(U),l=E(U,"DIV",{class:!0});var P=$(l);f=E(P,"BUTTON",{});var Y=$(f);B(r.$$.fragment,Y),Y.forEach(g),h=D(P),i=E(P,"BUTTON",{});var oe=$(i);B(c.$$.fragment,oe),oe.forEach(g),d=D(P),w=E(P,"BUTTON",{class:!0});var fe=$(w);B(u.$$.fragment,fe),fe.forEach(g),m=D(P),p=E(P,"DIV",{class:!0}),$(p).forEach(g),v=D(P),O=E(P,"BUTTON",{});var ce=$(O);B(N.$$.fragment,ce),ce.forEach(g),le=D(P),q=E(P,"BUTTON",{});var ue=$(q);B(A.$$.fragment,ue),ue.forEach(g),se=D(P),T&&T.l(P),P.forEach(g),U.forEach(g),this.h()},h(){b(s,"class","text-white"),b(w,"class","hidden sm:block"),b(p,"class","border border-gray-500"),b(l,"class","flex ml-auto gap-5"),b(e,"class","flex w-full bg-gray-700 h-16 px-8 items-center")},m(V,U){M(V,e,U),_(e,s),_(s,n),_(e,o),_(e,l),_(l,f),j(r,f,null),_(l,h),_(l,i),j(c,i,null),_(l,d),_(l,w),j(u,w,null),_(l,m),_(l,p),_(l,v),_(l,O),j(N,O,null),_(l,le),_(l,q),j(A,q,null),_(l,se),T&&T.m(l,null),Q=!0,ae||(ie=[G(f,"click",a[7]),G(i,"click",a[8]),G(w,"click",a[9]),G(O,"click",a[10]),G(q,"click",a[11])],ae=!0)},p(V,[U]){(!Q||U&1)&&t!==(t=V[5](V[0])+"")&&L(n,t);const X={};U&4&&(X.icon=V[2]?me:_e),r.$set(X);const P={};U&8&&(P.icon=V[3]?ge:ve),c.$set(P);const Y={};U&16&&(Y.color=V[4]==R.Camera?"#ffffff":"#34d399"),u.$set(Y),V[1]?T&&(he(),S(T,1,1,()=>{T=null}),de()):T?(T.p(V,U),U&2&&C(T,1)):(T=$e(V),T.c(),C(T,1),T.m(l,null))},i(V){Q||(C(r.$$.fragment,V),C(c.$$.fragment,V),C(u.$$.fragment,V),C(N.$$.fragment,V),C(A.$$.fragment,V),C(T),Q=!0)},o(V){S(r.$$.fragment,V),S(c.$$.fragment,V),S(u.$$.fragment,V),S(N.$$.fragment,V),S(A.$$.fragment,V),S(T),Q=!1},d(V){V&&g(e),x(r),x(c),x(u),x(N),x(A),T&&T.d(),ae=!1,be(ie)}}}var R;(function(a){a[a.Camera=0]="Camera",a[a.Screen=1]="Screen"})(R||(R={}));function et(a,e,s){let t=!0,n=!0,o=R.Camera,{time:l=0}=e,{peer:f=!1}=e;const r=(v,O)=>String(v).padStart(O,"0"),h=v=>(~~(v/60)>=60?`${r(~~(v/3600),2)}:`:"")+`${r(~~(v/60)%60,2)}:${r(v%60,2)}`,i=re(),c=()=>{s(2,t=!t),i("videoswitch")},d=()=>{s(3,n=!n),i("muteswitch")},w=()=>{s(4,o=o==R.Camera?R.Screen:R.Camera),i("sourceswitch",{source:o})},u=()=>i("chatswitch"),m=()=>i("membersswitch"),p=()=>i("shareswitch");return a.$$set=v=>{"time"in v&&s(0,l=v.time),"peer"in v&&s(1,f=v.peer)},[l,f,t,n,o,h,i,c,d,w,u,m,p]}class ut extends z{constructor(e){super();K(this,e,et,Ze,J,{time:0,peer:1})}}function tt(a){let e,s,t,n,o,l,f,r,h,i,c,d;f=new F({props:{icon:Ae,color:"#ffffff",scale:1.3}});const w=a[4].default,u=He(w,a,a[3],null);return{c(){e=k("div"),s=k("div"),t=k("h1"),n=H(a[0]),o=I(),l=k("button"),y(f.$$.fragment),r=I(),u&&u.c(),this.h()},l(m){e=E(m,"DIV",{class:!0});var p=$(e);s=E(p,"DIV",{class:!0});var v=$(s);t=E(v,"H1",{class:!0});var O=$(t);n=W(O,a[0]),O.forEach(g),o=D(v),l=E(v,"BUTTON",{class:!0});var N=$(l);B(f.$$.fragment,N),N.forEach(g),v.forEach(g),r=D(p),u&&u.l(p),p.forEach(g),this.h()},h(){b(t,"class","text-3xl text-white font-semibold"),b(l,"class","block md:hidden ml-auto"),b(s,"class","flex mb-3"),b(e,"class",h=""+((a[1]?"flex":"hidden")+" flex-col w-full md:w-[25vw] h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8"))},m(m,p){M(m,e,p),_(e,s),_(s,t),_(t,n),_(s,o),_(s,l),j(f,l,null),_(e,r),u&&u.m(e,null),i=!0,c||(d=G(l,"click",a[5]),c=!0)},p(m,[p]){(!i||p&1)&&L(n,m[0]),u&&u.p&&(!i||p&8)&&We(u,w,m,m[3],i?qe(w,m[3],p,null):Fe(m[3]),null),(!i||p&2&&h!==(h=""+((m[1]?"flex":"hidden")+" flex-col w-full md:w-[25vw] h-screen bg-gray-800 border-l-0 md:border-l-2 border-gray-700 px-4 pt-3 pb-8")))&&b(e,"class",h)},i(m){i||(C(f.$$.fragment,m),C(u,m),i=!0)},o(m){S(f.$$.fragment,m),S(u,m),i=!1},d(m){m&&g(e),x(f),u&&u.d(m),c=!1,d()}}}function lt(a,e,s){let{$$slots:t={},$$scope:n}=e,{title:o}=e,{visible:l}=e;const f=re(),r=()=>f("close");return a.$$set=h=>{"title"in h&&s(0,o=h.title),"visible"in h&&s(1,l=h.visible),"$$scope"in h&&s(3,n=h.$$scope)},[o,l,f,n,t,r]}class Ve extends z{constructor(e){super();K(this,e,lt,tt,J,{title:0,visible:1})}}function Te(a,e,s){const t=a.slice();return t[1]=e[s],t}function Ie(a,e,s){const t=a.slice();return t[10]=e[s],t}function De(a){let e,s,t=a[10].message+"",n,o,l;return{c(){e=k("div"),s=k("p"),n=H(t),o=I(),this.h()},l(f){e=E(f,"DIV",{class:!0});var r=$(e);s=E(r,"P",{});var h=$(s);n=W(h,t),h.forEach(g),o=D(r),r.forEach(g),this.h()},h(){b(e,"class",l="flex items-center bg-gray-600 text-white rounded-b-md "+(a[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")},m(f,r){M(f,e,r),_(e,s),_(s,n),_(e,o)},p(f,r){r&4&&t!==(t=f[10].message+"")&&L(n,t),r&4&&l!==(l="flex items-center bg-gray-600 text-white rounded-b-md "+(f[1][0].me?"rounded-tl-md":"rounded-tr-md")+" flex-1 px-2 py-2")&&b(e,"class",l)},d(f){f&&g(e)}}}function Oe(a){let e,s,t,n,o,l,f,r=a[1][0].author+"",h,i,c,d,w=a[1],u=[];for(let m=0;m<w.length;m+=1)u[m]=De(Ie(a,w,m));return{c(){e=k("div"),s=k("img"),o=I(),l=k("div"),f=k("p"),h=H(r),i=I();for(let m=0;m<u.length;m+=1)u[m].c();c=I(),this.h()},l(m){e=E(m,"DIV",{class:!0});var p=$(e);s=E(p,"IMG",{src:!0,alt:!0,class:!0}),o=D(p),l=E(p,"DIV",{class:!0});var v=$(l);f=E(v,"P",{class:!0});var O=$(f);h=W(O,r),O.forEach(g),i=D(v);for(let N=0;N<u.length;N+=1)u[N].l(v);v.forEach(g),c=D(p),p.forEach(g),this.h()},h(){te(s.src,t="https://avatars.dicebear.com/api/initials/"+a[1][0].author+".svg")||b(s,"src",t),b(s,"alt",n=a[1][0].author),b(s,"class","rounded-md w-12 h-12 mt-auto"),b(f,"class","text-gray-400 text-xs"),b(l,"class","flex flex-col flex-1 gap-1"),b(e,"class",d="flex gap-2 "+(a[1][0].me?"flex-row-reverse":"flex-row"))},m(m,p){M(m,e,p),_(e,s),_(e,o),_(e,l),_(l,f),_(f,h),_(l,i);for(let v=0;v<u.length;v+=1)u[v].m(l,null);_(e,c)},p(m,p){if(p&4&&!te(s.src,t="https://avatars.dicebear.com/api/initials/"+m[1][0].author+".svg")&&b(s,"src",t),p&4&&n!==(n=m[1][0].author)&&b(s,"alt",n),p&4&&r!==(r=m[1][0].author+"")&&L(h,r),p&4){w=m[1];let v;for(v=0;v<w.length;v+=1){const O=Ie(m,w,v);u[v]?u[v].p(O,p):(u[v]=De(O),u[v].c(),u[v].m(l,null))}for(;v<u.length;v+=1)u[v].d(1);u.length=w.length}p&4&&d!==(d="flex gap-2 "+(m[1][0].me?"flex-row-reverse":"flex-row"))&&b(e,"class",d)},d(m){m&&g(e),ee(u,m)}}}function st(a){let e,s,t,n,o,l,f,r,h,i=a[2],c=[];for(let d=0;d<i.length;d+=1)c[d]=Oe(Te(a,i,d));return{c(){e=k("div");for(let d=0;d<c.length;d+=1)c[d].c();s=I(),t=k("form"),n=k("input"),o=I(),l=k("button"),f=H("Send"),this.h()},l(d){e=E(d,"DIV",{class:!0});var w=$(e);for(let p=0;p<c.length;p+=1)c[p].l(w);w.forEach(g),s=D(d),t=E(d,"FORM",{class:!0});var u=$(t);n=E(u,"INPUT",{type:!0,class:!0,placeholder:!0}),o=D(u),l=E(u,"BUTTON",{class:!0});var m=$(l);f=W(m,"Send"),m.forEach(g),u.forEach(g),this.h()},h(){b(e,"class","flex flex-col h-auto flex-1 gap-6"),b(n,"type","text"),b(n,"class","w-full bg-gray-700 text-white focus:outline-none h-9 px-4 rounded-md"),b(n,"placeholder","Aa"),b(l,"class","text-white bg-blue-600 px-4 rounded-md"),b(t,"class","flex gap-2")},m(d,w){M(d,e,w);for(let u=0;u<c.length;u+=1)c[u].m(e,null);M(d,s,w),M(d,t,w),_(t,n),pe(n,a[3]),_(t,o),_(t,l),_(l,f),r||(h=[G(n,"input",a[5]),G(t,"submit",ze(a[6]))],r=!0)},p(d,w){if(w&4){i=d[2];let u;for(u=0;u<i.length;u+=1){const m=Te(d,i,u);c[u]?c[u].p(m,w):(c[u]=Oe(m),c[u].c(),c[u].m(e,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=i.length}w&8&&n.value!==d[3]&&pe(n,d[3])},d(d){d&&g(e),ee(c,d),d&&g(s),d&&g(t),r=!1,be(h)}}}function at(a){let e,s;return e=new Ve({props:{title:"Chat",visible:a[0],$$slots:{default:[st]},$$scope:{ctx:a}}}),e.$on("close",a[7]),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,n){j(e,t,n),s=!0},p(t,[n]){const o={};n&1&&(o.visible=t[0]),n&8204&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){x(e,t)}}}function nt(a,e,s){const t=re();let{visible:n=!1}=e,{messages:o=[]}=e,l="",f=[];function r(){l=this.value,s(3,l)}const h=()=>{t("messagesend",{message:l}),s(3,l="")};function i(c){we.call(this,a,c)}return a.$$set=c=>{"visible"in c&&s(0,n=c.visible),"messages"in c&&s(1,o=c.messages)},a.$$.update=()=>{if(a.$$.dirty&6){let c=[];s(2,f=[]),o.forEach(d=>{if(c.length==0||c[c.length-1]!=d.id){c.push(d.id),f.push([d]);return}f[f.length-1].push(d)}),s(2,f=[...f])}},[n,o,f,l,t,r,h,i]}class ht extends z{constructor(e){super();K(this,e,nt,at,J,{visible:0,messages:1})}}function Pe(a,e,s){const t=a.slice();return t[3]=e[s],t}function Ce(a){let e,s,t,n,o,l,f=a[3].username+"",r,h;return{c(){e=k("div"),s=k("img"),o=I(),l=k("p"),r=H(f),h=I(),this.h()},l(i){e=E(i,"DIV",{class:!0});var c=$(e);s=E(c,"IMG",{src:!0,alt:!0,class:!0}),o=D(c),l=E(c,"P",{class:!0});var d=$(l);r=W(d,f),d.forEach(g),h=D(c),c.forEach(g),this.h()},h(){te(s.src,t="https://avatars.dicebear.com/api/initials/"+a[3].username+".svg")||b(s,"src",t),b(s,"alt",n=a[3].username),b(s,"class","rounded-md w-12 h-12 mt-auto"),b(l,"class","text-white"),b(e,"class","flex gap-2 flex-row items-center")},m(i,c){M(i,e,c),_(e,s),_(e,o),_(e,l),_(l,r),_(e,h)},p(i,c){c&2&&!te(s.src,t="https://avatars.dicebear.com/api/initials/"+i[3].username+".svg")&&b(s,"src",t),c&2&&n!==(n=i[3].username)&&b(s,"alt",n),c&2&&f!==(f=i[3].username+"")&&L(r,f)},d(i){i&&g(e)}}}function rt(a){let e,s=a[1],t=[];for(let n=0;n<s.length;n+=1)t[n]=Ce(Pe(a,s,n));return{c(){e=k("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);for(let l=0;l<t.length;l+=1)t[l].l(o);o.forEach(g),this.h()},h(){b(e,"class","flex flex-col h-auto flex-1 gap-4 mt-2")},m(n,o){M(n,e,o);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(n,o){if(o&2){s=n[1];let l;for(l=0;l<s.length;l+=1){const f=Pe(n,s,l);t[l]?t[l].p(f,o):(t[l]=Ce(f),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=s.length}},d(n){n&&g(e),ee(t,n)}}}function it(a){let e,s;return e=new Ve({props:{title:"Participants",visible:a[0],$$slots:{default:[rt]},$$scope:{ctx:a}}}),e.$on("close",a[2]),{c(){y(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,n){j(e,t,n),s=!0},p(t,[n]){const o={};n&1&&(o.visible=t[0]),n&66&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){s||(C(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){x(e,t)}}}function ot(a,e,s){let{visible:t}=e,{users:n}=e;function o(l){we.call(this,a,l)}return a.$$set=l=>{"visible"in l&&s(0,t=l.visible),"users"in l&&s(1,n=l.users)},[t,n,o]}class dt extends z{constructor(e){super();K(this,e,ot,it,J,{visible:0,users:1})}}export{ht as C,ct as G,dt as M,ut as N,Ve as P,R as S};
